<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 【工具】通用型状态管理库XState | Wayne的博客</title><meta name="description" content="【工具】通用型状态管理库XState - Micheal Wayne"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/scss/casual.css"><link rel="stylesheet" href="/css/icon.css"><link rel="search" type="application/opensearchdescription+xml" href="http://blog.michealwayne.cn/atom.xml" title="Wayne的博客"></head><script>(function (w) {w.frontjsConfig={token:"81a82620fb0dca7680f2f06be134fa4f",behaviour:8,FPSThreshold:10};w.frontjsTmpData = {r:[],e:[],l:[]};w.frontjsTmpCollector = function (ev) {(ev.message ? window.frontjsTmpData.e : window.frontjsTmpData.r).push([new Date().getTime(), ev])};w.FrontJS = {addEventListener: function (t, f) {w.frontjsTmpData.l.push([t, f]);return f;},removeEventListener: function (t, f) {for (var i = 0; i < w.frontjsTmpData.l.length; i++) {t === w.frontjsTmpData.l[i][0] && f === w.frontjsTmpData.l[i][1] && w.frontjsTmpData.l.splice(i, 1);}return f;}};w.document.addEventListener("error", w.frontjsTmpCollector, true);w.addEventListener("error", w.frontjsTmpCollector, true);w.addEventListener("load", function () {var n = w.document.createElement("script");n.src = "https://frontjs-static.pgyer.com/dist/current/frontjs.web.min.js"; w.document.body.appendChild(n);}, true);})(window);</script><body><div class="header"><header class="site-header"><div class="site-nav"><span class="button-toggle"></span><div class="container"><div class="nav-item"><a href="/" target="_self" data-text="home">Home</a></div><div class="nav-item"><a href="/archives" target="_self" data-text="archive">Archive</a></div><div class="nav-item"><a href="/about" target="_self" data-text="about">About</a></div></div><form id="search-form" class="nav-item"><input type="text" id="local-search-input" name="q" results="0" placeholder="search" autocomplete="off" autocorrect="off" class="search form-control"><span onclick="resetSearch()" class="fa fa-times"> </span></form><div id="local-search-result"></div><p class="no-result">No results found</p></div></header></div><div class="main"><div class="container"><div class="content"><div class="post"><article class="post-block"><h1 class="post-title">【工具】通用型状态管理库XState</h1><span class="post-date">Oct 8, 2020</span><span class="post-tag"><a href="/tags/笔记/">笔记</a><a href="/tags/前端/">前端</a><a href="/tags/工具/">工具</a></span><img src="/images/xstate/i-logo.jpg" class="bgimage"><div class="post-content"><h1 id="通用型状态管理库XState"><a href="#通用型状态管理库XState" class="headerlink" title="通用型状态管理库XState"></a>通用型状态管理库XState</h1><p>前端的状态管理库一直有很多，比如常用于React的<a href="https://www.redux.org.cn/" target="_blank" rel="noopener">Redux</a>、<a href="https://mobx.js.org/README.html" target="_blank" rel="noopener">Mobx</a>、<a href="https://facebook.github.io/flux/" target="_blank" rel="noopener">Flux</a>，常用于Vue的<a href="https://vuex.vuejs.org/zh/" target="_blank" rel="noopener">vuex</a>。在现在已经有这么多库的情况下，为什么还要再引入<a href="https://xstate.js.org/docs/" target="_blank" rel="noopener">XState</a>呢？这就是本文要整理的内容</p>
<h2 id="Statecharts"><a href="#Statecharts" class="headerlink" title="Statecharts"></a>Statecharts</h2><blockquote>
<p>XState: JavaScript state machines and statecharts.</p>
</blockquote>
<p>从 XState 的描述来看，我们就知道它与 Statecharts 有着密切关联。XState 的核心也在于 Statecharts，也就是我们需要定义好整个应用程式会有哪些状态，每个状态能转换到哪些状态（顺序性）以及他们之间如何转换。它解决了状态机(State Machine)的状态易于爆炸的缺陷，使之真正可用。</p>
<blockquote>
<p>A state diagram is a type of diagram used in computer science and related fields to describe the behavior of systems.</p>
</blockquote>
<h3 id="Statecharts的概念"><a href="#Statecharts的概念" class="headerlink" title="Statecharts的概念"></a>Statecharts的概念</h3><blockquote>
<p>A statechart can be explained in many ways, and we’ll get to those explanations, but essentially, a statechart is a drawing. </p>
</blockquote>
<p><img src="/images/xstate/p-3.jpg" alt="p-3.jpg"></p>
<p>Statecharts 是一种状态图，1984 年 David HAREL 的论文率先提出了 Statecharts，此文对状态图加入了三个元素，分別处理了<strong>层级(hierarchy)</strong>、<strong>并发(concurrency)</strong>和<strong>通讯(communication)</strong>。让原先的状态图变得高度结构化且能更有效地描述各种状态。</p>
<p>例如，用 Statecharts 来描述 Fetch API：</p>
<p><img src="/images/xstate/p-1.jpg" alt="p-1.jpg"></p>
<h2 id="为什么需要-XState"><a href="#为什么需要-XState" class="headerlink" title="为什么需要 XState"></a>为什么需要 XState</h2><p>状态管理的重要性不用多说，那么在XState之前的一些状态管理库有什么问题呢？</p>
<h3 id="其他状态管理库的问题"><a href="#其他状态管理库的问题" class="headerlink" title="其他状态管理库的问题"></a>其他状态管理库的问题</h3><h4 id="1-缺乏清晰的状态描述"><a href="#1-缺乏清晰的状态描述" class="headerlink" title="1.缺乏清晰的状态描述"></a>1.缺乏清晰的状态描述</h4><p>不管是使用 Redux 或其他相关的 Library 都会有状态难以清晰描述的问题，最主要原因有两个，第一个是我们完全混合了状态(state)跟资料(context)，所有东西都直接往 Reducer 里面塞导致我们无法分清楚哪些是资料，哪些是状态。</p>
<blockquote>
<p>这里的资料(context)指的是显示在页面上的內容，通常這些资料会存储在后端并透过 API 取得，在 XState 称之为 context，在 UML State Mechine 里面称为 Extended states；而状态(state)则是指应用程式当前的状态，比如说是否已登入或者 Menu 是否展开等等状态。</p>
</blockquote>
<p>另一个因素是我们通常都是用 flag 来表达某个小状态，再由多个 flags来表达某个状态，当这种 flag 越来越多时，我们的程序就会很容易出现 bug，如</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (isLogin &amp;&amp; isYYY &amp;&amp; isXXX) &#123;</span><br><span class="line">	<span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样的代码其实就是所谓的 bottom-up code，通常是我们先有一个小状态比如说 isLogin，然后后面又加了其他各种状态。当这种小状态一多，就会让程序容易出现难以察觉的 bug。</p>
<h4 id="2-过于自由的状态转换"><a href="#2-过于自由的状态转换" class="headerlink" title="2.过于自由的状态转换"></a>2.过于自由的状态转换</h4><p>如上提到的，过去我们的状态是由多个 flags 所组成，这导致了我们无法明确得定义各种状态之间的关系，最后就会变成我们无法确定状态之间的切换是否正确。</p>
<p>比如说 isAdmin 为 true 时 isLogin 应该必定为 true。像这样用 flag 储存小状态就会有可能出现状态转换出错的情况，比如说 isAdmin 设定成 true 了，却忘记把 isLogin 也设为true。这样的程序代码大到一定程度就会变成我们再也无法真正理解程序有哪些状态，以及那些可能的状态应该被处理。</p>
<h4 id="3-难以与工程师之外的人讨论"><a href="#3-难以与工程师之外的人讨论" class="headerlink" title="3.难以与工程师之外的人讨论"></a>3.难以与工程师之外的人讨论</h4><p>用 flags 的方式去描述整个应用程序状态的这种做法是很难与工程师之外的人沟通或讨论的，而且就算是工程师也要追 Code 花时间理解当前的程序状态与运作，这会让我们很难快速地发现问题也很难跟 PM 讨论需求设计是否存在逻辑上的矛盾，或是否有未处理的状态。</p>
<h3 id="XState-的优势"><a href="#XState-的优势" class="headerlink" title="XState 的优势"></a>XState 的优势</h3><p>而 XState 是 Statecharts 的一个 JavaScript 实现。</p>
<h4 id="1-代码即-UI-Spec"><a href="#1-代码即-UI-Spec" class="headerlink" title="1.代码即 UI Spec"></a>1.代码即 UI Spec</h4><p>当我们今天用 XState 定义好各种状态之后，就可以直接利用 <a href="https://xstate.js.org/viz/" target="_blank" rel="noopener">XState Visualizer</a> 把程序代码转换成图片。</p>
<p><img src="/images/xstate/p-2.jpg" alt="p-2.jpg"></p>
<p>我们可以用这张状态图当作 UI Spec 跟 PM 或设计交互人员讨论流程是否有问题。甚至可以说 XState 可以作为 DSL，推进 DDD。</p>
<h4 id="2-写更少的测试"><a href="#2-写更少的测试" class="headerlink" title="2.写更少的测试"></a>2.写更少的测试</h4><p>由于我们已经明确定义出各个状态以及每个状态之间的关系，这让我们可以更轻松得编写测试，也不需要测试那些根本不可能出现的状态，通过 <a href="https://en.wikipedia.org/wiki/Model-based_testing" target="_blank" rel="noopener">Model-based Testing</a> ，我们只需要写各个状态下的断言(assertion)，就可以自动把各种状态切换的路径都测试完。</p>
<p><a href="https://github.com/davidkpiano/xstate/tree/master/packages/xstate-test" target="_blank" rel="noopener">xstate-test案例</a></p>
<blockquote>
<p>Model-based Testing：基于模型测试，利用模型自动产生测试用例/测试套件，然后执行测试。</p>
</blockquote>
<h4 id="3-更快速的路径优化"><a href="#3-更快速的路径优化" class="headerlink" title="3.更快速的路径优化"></a>3.更快速的路径优化</h4><p>当我们完成一个应用程序时，最需要做的通常就是使用体验(User Experience)的优化，我们常常需要利用各种服务来收集各个页面间的转化率或是哪些状态让使用者最快跳过等等的数据。透过这些数据来优化我们应用程序的流程，让使用者体验进一步的提升。而如果使用了 XState ，我们就可以在各个状态转换之间送 log 到数据收集的服务，从而进一步分析哪些状态可能是不必要的，来优化 User Flow。</p>
<p>XState 在这方面也释放出了<a href="https://github.com/davidkpiano/xstate/tree/master/packages/xstate-analytics" target="_blank" rel="noopener">xstate-analytics</a>。</p>
<blockquote>
<p>David Khourshid 在2019年 ReactiveConf 上也分享了如何利用 XState 分析应用程序的 User Flow，还有可能搭配深度強化学习(Deep Reinforcement Learning)做路径优化！<a href="https://www.youtube.com/watch?v=na1-RumWtxE&amp;fbclid=IwAR15N3cd_0PYZo6ilTfQHuA9uO1EclHEniHcpabZ2J6-h-YqOvzM6TnV51A" target="_blank" rel="noopener">演讲地址</a></p>
</blockquote>
<h3 id="Statecharts建模的对比优势"><a href="#Statecharts建模的对比优势" class="headerlink" title="Statecharts建模的对比优势"></a>Statecharts建模的对比优势</h3><p>例如一个按钮，它有两种状态：</p>
<ul>
<li>启用</li>
<li>禁用</li>
</ul>
<p>我们在 redux 下建模时通常会赋予它一个真假值的属性，比如 <code>isEnabled</code>：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  isEnabled: <span class="literal">true</span> <span class="comment">// true 为启用状态，false 为禁用状态</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>假设点击按钮后，浏览器会从服务器加载一些数据回来，则在启用、禁用状态之外，按钮还应该有一个 loading 状态。于是它又多出一个属性，且叫它 <code>isLoading</code>：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  isEnabled: <span class="literal">true</span>,</span><br><span class="line">  isLoading: <span class="literal">false</span>, <span class="comment">// 新增 isLoading</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>然而这个模型有个非常明显的缺陷：<code>isLoading</code> 的状态其实从属于 <code>isEnabled: true</code> 的，只有在按钮启用状态下，我们才有可能进入 <code>isLoading: true</code> 状态，但上述模型并不能看出这个关系，我们只看到四种可能的组合：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 4 种可能的状态组件</span></span><br><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    isEnabled: <span class="literal">true</span>,</span><br><span class="line">    isLoading: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    isEnabled: <span class="literal">true</span>,</span><br><span class="line">    isLoading: <span class="literal">false</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    isEnabled: <span class="literal">false</span>,</span><br><span class="line">    isLoading: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    isEnabled: <span class="literal">false</span>,</span><br><span class="line">    isLoading: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>
<p>再来几个 isYYY？则上述组合会指数级增长。</p>
<p>如果用 Statecharts 的模式进行建模的话。我们另有一种建模方案：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  initial: <span class="string">'enabled'</span>, <span class="comment">// 按钮默认启用</span></span><br><span class="line">  states: &#123;</span><br><span class="line">    enabled: &#123;&#125;,</span><br><span class="line">    disabled: &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里我们给按钮定义了两种状态，分别是 <code>enabled</code> 与 <code>disabled</code>，初始状态为 <code>enabled</code>。</p>
<p>接着再引入 <code>loading</code> 状态：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  initial: <span class="string">'enabled'</span>,</span><br><span class="line">  states: &#123;</span><br><span class="line">    enabled: &#123;</span><br><span class="line">      initial: <span class="string">'idle'</span>,</span><br><span class="line">      states: &#123;</span><br><span class="line">        idle: &#123;&#125;,</span><br><span class="line">        loading: &#123;&#125; <span class="comment">// loading 状态现在从属于 enabled 状态</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    disabled: &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这里，在 <code>enabled</code> 状态下，我们细化了状态，分离出 <code>idle</code> 及 <code>loading</code> 两种子状态，于是 <code>loading</code> 与 <code>enabled</code> 间的从属关系一目了然。甚至，我们可以借由这样的数据绘制出谁都看得懂的图表：</p>
<p><img src="/images/xstate/p-4.jpg" alt="p-4.jpg"></p>
<p>对比两种建模方法，我们可以看到：</p>
<ul>
<li>第一种建模方法里，所有的状态都是平行的，没有应有的从属关系，十分混乱，且每个新状态的引入都会迅速增加状态管理的难度；</li>
<li>借由 statecharts ，我们可以不断细分、<a href="https://xstate.js.org/docs/guides/hierarchical.html" target="_blank" rel="noopener">深化状态</a>，只要有需要，我们就可以源源不断引入新状态，不用担心状态失控。</li>
</ul>
<h2 id="XState-理论储备"><a href="#XState-理论储备" class="headerlink" title="XState 理论储备"></a>XState 理论储备</h2><h3 id="有限状态机-Finite-State-Machine"><a href="#有限状态机-Finite-State-Machine" class="headerlink" title="有限状态机 (Finite State Machine)"></a>有限状态机 (Finite State Machine)</h3><p>有限状态机是一种数学模型，用于描述系统的行为，这个系统在任何时间点上都只存在于一种状态。比如红绿灯就只有 红灯、绿灯、黄灯三种状态，在任何时间点上一定是这三种状态的其中一种，不可能在一个时间点上存在两种或两种以上的状态。</p>
<p>一个正式的有限状态机包含五个部分：</p>
<ul>
<li>有限数量的状态 (state)</li>
<li>有限数量的事件 (event)</li>
<li>一个初始状态 (initial state)</li>
<li>一个转换函数 (transition function)，传入当前的状态及事件时会返回下一个状态</li>
<li>具有 0 至 n 个最终状态 (final state)</li>
</ul>
<p>需要强调的是这里的 状态 (State) 指的是系统定性的 mode 或 status，并不是指系统內所有的资料。举例来说，水有 4 种状态 (State)——固态、液态、气态 以及等离子态，这就属于状态，但水的温度是可变的定量且无限的可能就不属于状态。</p>
<h2 id="XState-安装"><a href="#XState-安装" class="headerlink" title="XState 安装"></a>XState 安装</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install xstate</span><br></pre></td></tr></table></figure>
<p>React：<a href="https://www.npmjs.com/package/@xstate/react" target="_blank" rel="noopener">@xstate/react</a>：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @xstate/react</span><br></pre></td></tr></table></figure>
<p>Vue：<a href="https://www.npmjs.com/package/@xstate/vue" target="_blank" rel="noopener">@xstate/vue</a>：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @xstate/vue</span><br></pre></td></tr></table></figure>
<p>XState 其实没有限定任何前端框架，你可以在 React、Vue、Ember 甚至原生 JavaScript 中使用它，<code>@xstate/react</code> 与 <code>@xstate/vue</code>只是提供了些小帮手，让你更快地将 XState 集成到你熟悉的前端框架中。</p>
<h2 id="XState使用"><a href="#XState使用" class="headerlink" title="XState使用"></a>XState使用</h2><h3 id="上手案例1-红绿灯"><a href="#上手案例1-红绿灯" class="headerlink" title="上手案例1-红绿灯"></a>上手案例1-红绿灯</h3><p>XState 的 Machine 其实就是一个 State Machine (准确来说是 Statechart)，所以在建立一个 Machine 之前要先整理我们的程序有哪些状态、事件以及初始状态。</p>
<h4 id="定义状态"><a href="#定义状态" class="headerlink" title="定义状态"></a>定义状态</h4><p>传给 Machine 一个 object 內部必须有 states 这个属性，而 states object 的每个 key 就是这个 Machine 拥有的状态。所以这段代码代表 Machine 拥有 <code>red</code>、<code>green</code>、<code>yellow</code>三种状态。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Machine &#125; <span class="keyword">from</span> <span class="string">'xstate'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> lightMachine = Machine(&#123;</span><br><span class="line">  states: &#123;</span><br><span class="line">    red: &#123;&#125;,</span><br><span class="line">    green: &#123;&#125;,</span><br><span class="line">    yellow: &#123;&#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<h4 id="定义初始状态"><a href="#定义初始状态" class="headerlink" title="定义初始状态"></a>定义初始状态</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Machine &#125; <span class="keyword">from</span> <span class="string">'xstate'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> lightMachine = Machine(&#123;</span><br><span class="line">  initial: <span class="string">'red'</span>,</span><br><span class="line">  states: &#123;</span><br><span class="line">    red: &#123;&#125;,</span><br><span class="line">    green: &#123;&#125;,</span><br><span class="line">    yellow: &#123;&#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="定义事件"><a href="#定义事件" class="headerlink" title="定义事件"></a>定义事件</h4><p>我们规定三个状态下都会有 CLICK 事件，并且状态的转换是 <code>red -&gt; green -&gt; yellow -&gt; red ...</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Machine &#125; <span class="keyword">from</span> <span class="string">'xstate'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> lightMachine = Machine(&#123;</span><br><span class="line">  initial: <span class="string">'red'</span>,</span><br><span class="line">  states: &#123;</span><br><span class="line">    red: &#123;</span><br><span class="line">      on: &#123;</span><br><span class="line">        CLICK: <span class="string">'green'</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    green: &#123;</span><br><span class="line">      on: &#123;</span><br><span class="line">        CLICK: <span class="string">'yellow'</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    yellow: &#123;</span><br><span class="line">      on: &#123;</span><br><span class="line">        CLICK: <span class="string">'red'</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>我们在每个状态下加入 on 属性，on 的 key 代表事件名称，value 则代表转移的下一个状态。</p>
<p>我们可以将 lightMachine 用来使用了！通过 <code>.transition(state, event)</code> 这个方法来取得下一个状态：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Machine &#125; <span class="keyword">from</span> <span class="string">'xstate'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> lightMachine = Machine(&#123;</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> state0 = lightMachine.initialState;</span><br><span class="line"><span class="built_in">console</span>.log(state0);</span><br><span class="line"><span class="keyword">const</span> state1 = lightMachine.transition(state0, <span class="string">'CLICK'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(state1);</span><br><span class="line"><span class="keyword">const</span> state2 = lightMachine.transition(state1, <span class="string">'CLICK'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(state2);</span><br><span class="line"><span class="keyword">const</span> state3 = lightMachine.transition(state2, <span class="string">'CLICK'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(state3);</span><br></pre></td></tr></table></figure></p>
<p>这个回传的 state object 有2个常用的方法及属性分別是</p>
<ul>
<li>value</li>
<li>matches(parentStateValue)</li>
<li>nextEvents</li>
</ul>
<p>value 可以拿到当前的状态，matches 则可以用来判断现在是否在某个状态，比如说<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Machine &#125; <span class="keyword">from</span> <span class="string">'xstate'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> lightMachine = Machine(&#123;</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> state0 = lightMachine.initialState;</span><br><span class="line"><span class="built_in">console</span>.log(state0.value); <span class="comment">// 'red'</span></span><br><span class="line"><span class="keyword">const</span> state1 = lightMachine.transition(state0, <span class="string">'CLICK'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(state1.value); <span class="comment">// 'green'</span></span><br><span class="line"></span><br><span class="line">state0.matches(<span class="string">'red'</span>); <span class="comment">// true</span></span><br><span class="line">state0.matches(<span class="string">'yellow'</span>); <span class="comment">// false</span></span><br><span class="line">state0.matches(<span class="string">'green'</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure></p>
<p>nextEvents 则可以拿到该 state 有哪些 events 可以使用：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Machine &#125; <span class="keyword">from</span> <span class="string">'xstate'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> lightMachine = Machine(&#123;</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> state0 = lightMachine.initialState;</span><br><span class="line"><span class="built_in">console</span>.log(state0.nextEvents); <span class="comment">// 'CLICK'</span></span><br></pre></td></tr></table></figure></p>
<p>最后，把代码放到 XState Visualizer 得到状态图：</p>
<p><img src="/images/xstate/p-5.jpg" alt="p-5.jpg"></p>
<h4 id="Interpret"><a href="#Interpret" class="headerlink" title="Interpret"></a>Interpret</h4><p>至此，我们完成了一个简单的 Machine，但我们的 lightMachine 每次都要传入当前的 state 跟 event 才能做状态转换，这是为了让 transition 保持是一个 Pure Function，它不会改变 lightMachine 物件的状态，方便做单元测试。但通常我们不需要自己存储及管理状态，所以 XState 提供了 Interpret。XState 提供了一个叫 interpret 的 function 可以把一个 machine 实例转换成一个具有状态的 service。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Machine, interpret &#125; <span class="keyword">from</span> <span class="string">'xstate'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> lightMachine = Machine(&#123;</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> service = interpret(lightMachine);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 启动 service</span></span><br><span class="line">service.start();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Send events</span></span><br><span class="line">service.send(<span class="string">'CLICK'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 停止 service</span></span><br><span class="line">service.stop();</span><br></pre></td></tr></table></figure>
<p>interpret 得到的 service 具有自己的状态，当 start() 后，这个 service 就回到初始状态，同时可以对他传送(send)事件，同时也可以透过 service.state 拿到当前的状态，如下</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Machine, interpret &#125; <span class="keyword">from</span> <span class="string">'xstate'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> lightMachine = Machine(&#123;</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> service = interpret(lightMachine);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 启动 service</span></span><br><span class="line">service.start();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(service.state.value); <span class="comment">// 'red'</span></span><br><span class="line">service.send(<span class="string">'CLICK'</span>); <span class="comment">// Send events</span></span><br><span class="line"><span class="built_in">console</span>.log(service.state.value); <span class="comment">// 'green'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 停止 service</span></span><br><span class="line">service.stop();</span><br></pre></td></tr></table></figure>
<h4 id="React"><a href="#React" class="headerlink" title="React"></a>React</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// lightMachine.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; Machine &#125; <span class="keyword">from</span> <span class="string">'xstate'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> LIGHT_STATES = &#123;</span><br><span class="line">  RED: <span class="string">'RED'</span>,</span><br><span class="line">  GREEN: <span class="string">'GREEN'</span>,</span><br><span class="line">  YELLOW: <span class="string">'YELLOW'</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> LIGHT_EVENTS = &#123;</span><br><span class="line">  CLICK: <span class="string">'CLICK'</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> lightMachine = Machine(&#123;</span><br><span class="line">  initial: LIGHT_STATES.RED,</span><br><span class="line">  states: &#123;</span><br><span class="line">    [LIGHT_STATES.RED]: &#123;</span><br><span class="line">      on: &#123;</span><br><span class="line">        [LIGHT_EVENTS.CLICK]: LIGHT_STATES.GREEN,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    [LIGHT_STATES.GREEN]: &#123;</span><br><span class="line">      on: &#123;</span><br><span class="line">        [LIGHT_EVENTS.CLICK]: LIGHT_STATES.YELLOW,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    [LIGHT_STATES.YELLOW]: &#123;</span><br><span class="line">      on: &#123;</span><br><span class="line">        [LIGHT_EVENTS.CLICK]: LIGHT_STATES.RED,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// App.jsx</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useMachine &#125; <span class="keyword">from</span> <span class="string">'@xstate/react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; lightMachine &#125; <span class="keyword">from</span> <span class="string">'./lightMachine'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [state, send] = useMachine(lightMachine);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">"App"</span>&gt;</span><br><span class="line">      &#123;state.matches(LIGHT_STATES.RED) &amp;&amp; <span class="xml"><span class="tag">&lt;<span class="name">RedLight</span> /&gt;</span></span>&#125;</span><br><span class="line">      &#123;state.matches(LIGHT_STATES.GREEN) &amp;&amp; <span class="xml"><span class="tag">&lt;<span class="name">GreenLight</span> /&gt;</span></span>&#125;</span><br><span class="line">      &#123;state.matches(LIGHT_STATES.YELLOW) &amp;&amp; <span class="xml"><span class="tag">&lt;<span class="name">YellowLight</span> /&gt;</span></span>&#125;</span><br><span class="line">      &lt;button</span><br><span class="line">        onClick=&#123;() =&gt; &#123;</span><br><span class="line">          send(LIGHT_EVENTS.CLICK);</span><br><span class="line">        &#125;&#125;</span><br><span class="line">      &gt;</span><br><span class="line">        click me</span><br><span class="line">      &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>另外可见<a href="https://codesandbox.io/s/vue-xstate-practice-1-pipwx" target="_blank" rel="noopener">Vue版本</a>和<a href="https://codesandbox.io/s/angular-xstate-practice-1-nmnb9" target="_blank" rel="noopener">Angular版本</a></p>
<h3 id="上手案例2-按钮"><a href="#上手案例2-按钮" class="headerlink" title="上手案例2-按钮"></a>上手案例2-按钮</h3><h4 id="状态切换"><a href="#状态切换" class="headerlink" title="状态切换"></a>状态切换</h4><p>在 statecharts 中，状态是有限的（finite）。拿上述按钮来说，在最外层，它只有两种状态，并且只能在这两种状态间切换。进入 enabled 状态后，则有两个子状态，idle 与 loading，默认为 idle，可以通过点击切换至 loading 状态：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  id: <span class="string">'button'</span>,</span><br><span class="line">  initial: <span class="string">'enabled'</span>,</span><br><span class="line">  states: &#123;</span><br><span class="line">    enabled: &#123;</span><br><span class="line">      initial: <span class="string">'idle'</span>,</span><br><span class="line">      states: &#123;</span><br><span class="line">        idle: &#123;</span><br><span class="line">          on: &#123;</span><br><span class="line">            CLICK: &#123; <span class="comment">// CLICK 事件发生时，切换至 loading 状态</span></span><br><span class="line">              target: <span class="string">'loading'</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        loading: &#123;&#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    disabled: &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用如：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> Machine = XState.Machine</span><br><span class="line"><span class="keyword">let</span> interpret = XState.interpret</span><br><span class="line"><span class="keyword">let</span> buttonMachine = Machine(&#123;</span><br><span class="line">  id: <span class="string">'button'</span>,</span><br><span class="line">  initial: <span class="string">'enabled'</span>,</span><br><span class="line">  states: &#123;</span><br><span class="line">    enabled: &#123;</span><br><span class="line">      initial: <span class="string">'idle'</span>,</span><br><span class="line">      states: &#123;</span><br><span class="line">        idle: &#123;</span><br><span class="line">          on: &#123;</span><br><span class="line">            CLICK: &#123;</span><br><span class="line">              target: <span class="string">'loading'</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        loading: &#123;&#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    disabled: &#123;&#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">let</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">'btn'</span>)</span><br><span class="line"><span class="keyword">let</span> service = interpret(buttonMachine)</span><br><span class="line">  .onTransition(<span class="function"><span class="keyword">function</span> (<span class="params">state</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 状态切换时执行此函数</span></span><br><span class="line">    btn.innerHTML = <span class="string">'按钮（'</span> + <span class="built_in">JSON</span>.stringify(state.value) + <span class="string">'）'</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .start()</span><br><span class="line">btn.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  service.send(<span class="string">'CLICK'</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>点击示例按钮，你会发现按钮的状态从默认的 {enabled: ‘idle’} 切换至 {enabled: ‘loading’}，随后我们不管怎么点击，按钮都不再响应，这是因为 loading 状态不接受 CLICK 动作。</p>
<h4 id="副作用"><a href="#副作用" class="headerlink" title="副作用"></a>副作用</h4><p>进入 loading 状态后，就要启动 window.fetch 从 API 读取数据了。可是这异步操作的代码要写在哪儿？</p>
<p>我们知道，fetch 是一个 Promise，它启动时是 pending 状态，最后会进入 fulfilled 或 rejected 状态。没错，Promise 也是一个状态机：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  initial: <span class="string">'pending'</span>,</span><br><span class="line">  states: &#123;</span><br><span class="line">    pending: &#123;</span><br><span class="line">      RESOLVE: &#123;</span><br><span class="line">        target: <span class="string">'fulfilled'</span></span><br><span class="line">      &#125;,</span><br><span class="line">      REJECT: &#123;</span><br><span class="line">        target: <span class="string">'rejected'</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    fulfilled: &#123;&#125;,</span><br><span class="line">    rejected: &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>通过 XState 提供的 <a href="https://xstate.js.org/docs/guides/communication.html#invoking-promises" target="_blank" rel="noopener">invoke</a>，我们可以将它无缝接入 statecharts 中：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> buttonMachine = Machine(&#123;</span><br><span class="line">  id: <span class="string">'button'</span>,</span><br><span class="line">  initial: <span class="string">'enabled'</span>,</span><br><span class="line">  states: &#123;</span><br><span class="line">    enabled: &#123;</span><br><span class="line">      initial: <span class="string">'idle'</span>,</span><br><span class="line">      states: &#123;</span><br><span class="line">        idle: &#123;</span><br><span class="line">          on: &#123;</span><br><span class="line">            CLICK: &#123;</span><br><span class="line">              target: <span class="string">'loading'</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        loading: &#123;</span><br><span class="line">          invoke: &#123;</span><br><span class="line">            id: <span class="string">'fetchData'</span>,</span><br><span class="line">            src: <span class="function">(<span class="params">context, event</span>) =&gt;</span></span><br><span class="line">              <span class="built_in">window</span></span><br><span class="line">                .fetch(<span class="string">'./javascript.json'</span>)</span><br><span class="line">                .then(<span class="function">(<span class="params">resp</span>) =&gt;</span> resp.json())</span><br><span class="line">                .then(<span class="function">(<span class="params">json</span>) =&gt;</span> json.data.children.slice(<span class="number">0</span>, <span class="number">5</span>)),</span><br><span class="line">            <span class="comment">// 演示作用，所以从结果中只取 5 个数据</span></span><br><span class="line">            onDone: &#123;</span><br><span class="line">              <span class="comment">// fulfilled 情况下，切换入 idle 状态</span></span><br><span class="line">              target: <span class="string">'idle'</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            onError: &#123;</span><br><span class="line">              <span class="comment">// rejected 情况下，切换入 idle 状态</span></span><br><span class="line">              target: <span class="string">'idle'</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    disabled: &#123;&#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="Context"><a href="#Context" class="headerlink" title="Context"></a>Context</h4><p>显然，你要问了，加载回来的数据呢？存放在哪？怎么存？</p>
<p>我们在前面曾说过，statecharts 里，状态（state）是有限的（finite），这与 React 或是 Vue 不一样，它们仅区分 state 与 props，state 本身并不区分有限或无限。而 XState 下，除开有限的状态外，我们还可能拥有无限的数据，譬如前面我们从 reddit 加载回来的数据，它们将归入 <a href="https://xstate.js.org/docs/guides/context.html#initial-context" target="_blank" rel="noopener">context</a> 中：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> buttonMachine = Machine(&#123;</span><br><span class="line">  id: <span class="string">'button'</span>,</span><br><span class="line">  initial: <span class="string">'enabled'</span>,</span><br><span class="line">  context: &#123;</span><br><span class="line">    list: [], <span class="comment">// 数据存在 context 下</span></span><br><span class="line">  &#125;,</span><br><span class="line">  states: &#123;</span><br><span class="line">    enabled: &#123;</span><br><span class="line">      initial: <span class="string">'idle'</span>,</span><br><span class="line">      states: &#123;</span><br><span class="line">        idle: &#123;</span><br><span class="line">          on: &#123;</span><br><span class="line">            CLICK: &#123;</span><br><span class="line">              target: <span class="string">'loading'</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        loading: &#123;</span><br><span class="line">          invoke: &#123;</span><br><span class="line">            id: <span class="string">'fetchData'</span>,</span><br><span class="line">            src: <span class="function">(<span class="params">context, event</span>) =&gt;</span></span><br><span class="line">              <span class="built_in">window</span></span><br><span class="line">                .fetch(<span class="string">'./javascript.json'</span>)</span><br><span class="line">                .then(<span class="function">(<span class="params">resp</span>) =&gt;</span> resp.json())</span><br><span class="line">                .then(<span class="function">(<span class="params">json</span>) =&gt;</span> json.data.children.slice(<span class="number">0</span>, <span class="number">5</span>)),</span><br><span class="line">            onDone: &#123;</span><br><span class="line">              target: <span class="string">'idle'</span>,</span><br><span class="line">              actions: assign(&#123;</span><br><span class="line">                <span class="comment">// 获取到数据后调用 XState.assign 将数据存入 context.list</span></span><br><span class="line">                list: <span class="function">(<span class="params">context, event</span>) =&gt;</span> event.data,</span><br><span class="line">              &#125;),</span><br><span class="line">            &#125;,</span><br><span class="line">            onError: &#123;</span><br><span class="line">              target: <span class="string">'idle'</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    disabled: &#123;&#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>实际上，Statecharts 有一份推荐状态的 <a href="https://www.w3.org/TR/scxml/" target="_blank" rel="noopener">w3c 规范 SCXML</a>，invoke、assign 正是该规范中定义的。</p>
<h4 id="并行状态"><a href="#并行状态" class="headerlink" title="并行状态"></a>并行状态</h4><p>现在我们要给上述按钮加个读秒的功能，以便了解 API 响应的速度。显然，这个状态跟 fetchData 应该是同时启动的，因此我们可以定义一个并行（parallel）状态：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> buttonMachine = Machine(&#123;</span><br><span class="line">  id: <span class="string">'button'</span>,</span><br><span class="line">  initial: <span class="string">'enabled'</span>,</span><br><span class="line">  context: &#123;</span><br><span class="line">    list: [],</span><br><span class="line">    timer: <span class="number">0</span>, <span class="comment">// 在 context 中保存计时</span></span><br><span class="line">  &#125;,</span><br><span class="line">  states: &#123;</span><br><span class="line">    enabled: &#123;</span><br><span class="line">      initial: <span class="string">'idle'</span>,</span><br><span class="line">      states: &#123;</span><br><span class="line">        idle: &#123;</span><br><span class="line">          on: &#123;</span><br><span class="line">            CLICK: &#123;</span><br><span class="line">              target: <span class="string">'loading'</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        loading: &#123;</span><br><span class="line">          entry: assign(&#123;</span><br><span class="line">            <span class="comment">// 进入 loading 状态时重置 timer</span></span><br><span class="line">            timer: <span class="number">0</span>,</span><br><span class="line">          &#125;),</span><br><span class="line">          type: <span class="string">'parallel'</span>, <span class="comment">// 注意这个 parallel</span></span><br><span class="line">          <span class="comment">// 表明 loading 下所有 states 是并行的</span></span><br><span class="line">          states: &#123;</span><br><span class="line">            fetching: &#123;</span><br><span class="line">              <span class="comment">// 一方面我们启动数据读取</span></span><br><span class="line">              invoke: &#123;</span><br><span class="line">                id: <span class="string">'fetchData'</span>,</span><br><span class="line">                src: <span class="function">(<span class="params">context, event</span>) =&gt;</span></span><br><span class="line">                  <span class="built_in">window</span></span><br><span class="line">                    .fetch(<span class="string">'./javascript.json'</span>)</span><br><span class="line">                    .then(<span class="function">(<span class="params">resp</span>) =&gt;</span> resp.json())</span><br><span class="line">                    .then(<span class="function">(<span class="params">json</span>) =&gt;</span> json.data.children.slice(<span class="number">0</span>, <span class="number">5</span>)),</span><br><span class="line">                onDone: &#123;</span><br><span class="line">                  target: <span class="string">'#button.enabled.idle'</span>,</span><br><span class="line">                  actions: assign(&#123;</span><br><span class="line">                    list: <span class="function">(<span class="params">context, event</span>) =&gt;</span> event.data,</span><br><span class="line">                  &#125;),</span><br><span class="line">                &#125;,</span><br><span class="line">                onError: &#123;</span><br><span class="line">                  target: <span class="string">'#button.enabled.idle'</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">              &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">            counting: &#123;</span><br><span class="line">              <span class="comment">// 另一方面我们启动读秒</span></span><br><span class="line">              after: &#123;</span><br><span class="line">                <span class="comment">// 延时 1ms 后的状态切换</span></span><br><span class="line">                <span class="number">1</span>: &#123;</span><br><span class="line">                  target: <span class="string">'counting'</span>,</span><br><span class="line">                  actions: assign(&#123;</span><br><span class="line">                    timer: <span class="function">(<span class="params">context, event</span>) =&gt;</span> context.timer + <span class="number">1</span>, <span class="comment">// 续 1ms</span></span><br><span class="line">                  &#125;),</span><br><span class="line">                &#125;,</span><br><span class="line">              &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    disabled: &#123;&#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="Actor-模式"><a href="#Actor-模式" class="headerlink" title="Actor 模式"></a>Actor 模式</h4><p>我们的 statecharts 终究是会越来越大的。context 里的数据也会越来越多，揉合着各种临时变量，最终变得难以维护。</p>
<p>在 React、Vue 等现代前端框架下，我们通过组件来隔离 states，同理，statecharts 也可以通过 Actor 模式来隔离 context 及状态。</p>
<p>简单说，XState 下，我们可以借由 Actor 模式组件化状态机，这样化整为零、更方便我们解决问题 - 是了，这个思路与 React 等框架的组件化是一致的。</p>
<p>我们在前面一个例子的基础上继续补充功能。这一次，我想在用户点击链接时弹出一个提示框，选择确认后才打开链接。等链接打开后，我们要从列表中移除链接。</p>
<p>我们来定义一个新的状态机组件：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; sendParent &#125; <span class="keyword">from</span> <span class="string">'xstate'</span></span><br><span class="line"><span class="keyword">var</span> anchorMachine = Machine(&#123;</span><br><span class="line">  initial: <span class="string">'viewing'</span>, <span class="comment">// 初始状态为 viewing</span></span><br><span class="line">  context: &#123;</span><br><span class="line">    title: <span class="string">''</span>, <span class="comment">// 链接文本</span></span><br><span class="line">    url: <span class="string">''</span>, <span class="comment">// 链接</span></span><br><span class="line">  &#125;,</span><br><span class="line">  states: &#123;</span><br><span class="line">    viewing: &#123;</span><br><span class="line">      initial: <span class="string">'idle'</span>,</span><br><span class="line">      states: &#123;</span><br><span class="line">        idle: &#123;</span><br><span class="line">          on: &#123;</span><br><span class="line">            CLICK: &#123;</span><br><span class="line">              <span class="comment">// 点击时触发 CLICK 并进入 confirming 状态</span></span><br><span class="line">              target: <span class="string">'confirming'</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        confirming: &#123;</span><br><span class="line">          <span class="comment">// 进入后调用 window.confirm 要求确认</span></span><br><span class="line">          invoke: &#123;</span><br><span class="line">            id: <span class="string">'confirmOpen'</span>,</span><br><span class="line">            src: <span class="function">(<span class="params">context, event</span>) =&gt;</span></span><br><span class="line">              <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">window</span>.confirm(<span class="string">'确定打开链接 '</span> + context.title)) &#123;</span><br><span class="line">                  resolve()</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                  reject()</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;),</span><br><span class="line">            onDone: <span class="string">'opening'</span>, <span class="comment">// 确认则进入 opening 状态</span></span><br><span class="line">            onError: <span class="string">'idle'</span>, <span class="comment">// 取消则回到 idle 状态</span></span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        opening: &#123;</span><br><span class="line">          <span class="comment">// 进入后打开链接</span></span><br><span class="line">          invoke: &#123;</span><br><span class="line">            id: <span class="string">'openUrl'</span>,</span><br><span class="line">            src: <span class="function">(<span class="params">context, event</span>) =&gt;</span></span><br><span class="line">              <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="built_in">window</span>.open(context.url)</span><br><span class="line">                resolve()</span><br><span class="line">              &#125;),</span><br><span class="line">            onDone: &#123;</span><br><span class="line">              target: <span class="string">'idle'</span>,</span><br><span class="line">              actions: sendParent(<span class="string">'URL_OPENED'</span>),</span><br><span class="line">              <span class="comment">// 调用 sendParent 通知父状态机</span></span><br><span class="line">            &#125;,</span><br><span class="line">            onError: <span class="string">'idle'</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>然后在 buttonMachine 中调用 spawn 孵化 anchorMachine：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; spawn &#125; <span class="keyword">from</span> <span class="string">'xstate'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> buttonMachine = Machine(&#123;</span><br><span class="line">  id: <span class="string">'button'</span>,</span><br><span class="line">  initial: <span class="string">'enabled'</span>,</span><br><span class="line">  context: &#123;</span><br><span class="line">    list: [],</span><br><span class="line">    timer: <span class="number">0</span></span><br><span class="line">  &#125;,</span><br><span class="line">  states: &#123;</span><br><span class="line">    enabled: &#123;</span><br><span class="line">      initial: <span class="string">'idle'</span>,</span><br><span class="line">      states: &#123;</span><br><span class="line">        idle: &#123;</span><br><span class="line">          entry: assign(&#123; <span class="comment">// 进入 idle 时触发</span></span><br><span class="line">            list: <span class="function">(<span class="params">context, event</span>) =&gt;</span></span><br><span class="line">              context.list.map(<span class="function"><span class="params">listItem</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> &#123;</span><br><span class="line">                  ...listItem,</span><br><span class="line">                  actorRef: spawn(</span><br><span class="line">                    anchorMachine.withContext(&#123; ...listItem.data &#125;)</span><br><span class="line">                  ) <span class="comment">// 将孵化的 actor 保存到 context.actorRef 里</span></span><br><span class="line">                  <span class="comment">// 这里我们还调用了 withContext</span></span><br><span class="line">                  <span class="comment">// 初始化 anchorMachine 的 context</span></span><br><span class="line">                &#125;;</span><br><span class="line">              &#125;)</span><br><span class="line">          &#125;),</span><br><span class="line">          on: &#123;</span><br><span class="line">            CLICK: &#123;</span><br><span class="line">              target: <span class="string">'loading'</span></span><br><span class="line">            &#125;,</span><br><span class="line">            URL_OPENED: &#123; <span class="comment">// 接收到子状态机发送的 URL_OPENED 事件</span></span><br><span class="line">              actions: [</span><br><span class="line">                assign(&#123;</span><br><span class="line">                  list: <span class="function">(<span class="params">context, event</span>) =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">return</span> ([...context.list.filter(<span class="function"><span class="keyword">function</span>(<span class="params">l</span>) </span>&#123;</span><br><span class="line">                      <span class="comment">// 从 list 中移除 id 为 event.id 的链接</span></span><br><span class="line">                      <span class="keyword">return</span> l.data.id !== event.id</span><br><span class="line">                    &#125;)])</span><br><span class="line">                  &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">              ]</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    disabled: &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>接下来，每个链接在渲染时可以直接从 actorRef 中获取它当前的状态及 context：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> service = actorRef</span><br><span class="line"><span class="keyword">var</span> a = <span class="built_in">document</span>.createElement(<span class="string">'a'</span>)</span><br><span class="line">a.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">  e.preventDefault()</span><br><span class="line">  service.send(<span class="string">'CLICK'</span>)</span><br><span class="line">&#125;)</span><br><span class="line">service.onTransition(<span class="function"><span class="keyword">function</span> (<span class="params">state</span>) </span>&#123;</span><br><span class="line">  a.setAttribute(<span class="string">'href'</span>, service.state.context.url)</span><br><span class="line">  a.innerHTML = service.state.context.title</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="相关链接"><a href="#相关链接" class="headerlink" title="相关链接"></a>相关链接</h4><ul>
<li><a href="https://xstate.js.org/docs/" target="_blank" rel="noopener">https://xstate.js.org/docs/</a></li>
<li><a href="https://statecharts.github.io/" target="_blank" rel="noopener">https://statecharts.github.io/</a></li>
<li><a href="https://en.wikipedia.org/wiki/State_diagram" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/State_diagram</a></li>
<li><a href="https://blog.jerry-hong.com/posts/xstate-introduction/" target="_blank" rel="noopener">https://blog.jerry-hong.com/posts/xstate-introduction/</a></li>
<li><a href="https://en.wikipedia.org/wiki/State_diagram" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/State_diagram</a></li>
<li><a href="https://www.inf.ed.ac.uk/teaching/courses/seoc/2005_2006/resources/statecharts.pdf" target="_blank" rel="noopener">https://www.inf.ed.ac.uk/teaching/courses/seoc/2005_2006/resources/statecharts.pdf</a></li>
<li><a href="https://blog.zfanw.com/xstate-state-management/" target="_blank" rel="noopener">https://blog.zfanw.com/xstate-state-management/</a></li>
</ul>
</div></article></div><div class="post-paginator"><div class="post-links"><div class="post-prev"><a href="/2020/10/29/tools/【工具】UML/" class="prev">Previous Post<span>【工具】UML随手记</span></a></div><div class="post-next"><a href="/2020/09/06/react/【笔记】React的ts类型检查与注意点/" class="next">Next Post<span>【笔记】React的ts类型检查与注意点</span></a></div></div></div></div><div class="sidebar"><div class="social-links"><ul><li class="social-link"><a href="http://github.com/MichealWayne" target="_blank" class="link-github"><i class="icon icon-github"></i></a></li><li class="social-link"><a href="mailto:michealwayne@163.com" target="_self" class="link-mail"><i class="icon icon-mail"></i></a></li></ul></div><div class="recent-posts widget"><h3 class="widget-title"> Recent Posts</h3><div class="widget-content"><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2024/04/14/python/【笔记】《编写高质量Python代码的90个有效方法》-31至51/">【笔记】Effective Python《编写高质量 Python 代码的 90 个有效方法》——第 31 ～ 51 条读书笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/03/17/python/【笔记】《编写高质量Python代码的90个有效方法》-1至30/">【笔记】Effective Python《编写高质量 Python 代码的 90 个有效方法》——第 1 ～ 30 条读书笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/02/25/tools/【工具】prettier常见配置/">【工具】Prettier常见配置</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/02/04/notes/【笔记】js内置数据深拷贝API-structuredClone/">【笔记】js 内置数据深拷贝 API-structuredClone</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/01/20/notes/MySQL开始支持JavaScript了/">MySQL也开始支持JavaScript了</a></li></ul></div></div><div class="recent-comment widget"><h3 class="widget-title"> Author</h3><div class="widget-content"><div class="m-author"><div class="u-avatar"><img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAgAAZABkAAD/7AARRHVja3kAAQAEAAAAQgAA/+4ADkFkb2JlAGTAAAAAAf/bAIQABQMDAwQDBQQEBQcFBAUHCAYFBQYICggICAgICgwKCwsLCwoMDAwMDAwMDA8PEBAPDxYVFRUWGBgYGBgYGBgYGAEFBgYKCQoTDAwTFBEOERQYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgY/8AAEQgB7gH+AwERAAIRAQMRAf/EAIwAAQAABwEAAAAAAAAAAAAAAAABAgMEBQcIBgEBAAAAAAAAAAAAAAAAAAAAABAAAQMDAQQGBQcIBwYHAQAAAAECAxEEBQYhMUESUWGBMhMHcZGhIhSxQlJicoIIwdHxkqKyIxXwwtIzQ1Mk4XODo7MWYzREVJRVFxgRAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/AOywAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABCv+wCIFldZzDWj+S6vreF30ZZmMX2qgFrcaz0rB38lbr/ALuRJP3OYC2//Q9H8yN/mDar/wCHJT90Cu3W+lHd3JQL6XU/IBcRam09J3Mjar/xmIvygXsVzbzJWGRkifUci/IBPVezgu0CIAAAAAAAAAAAAAAAAAAhzIiVVfSB5rUXmJg8Sjo43fGXaJ/dQqitRfrP3NAjoXNZfM2tzk71WNifJ4drAxKI1GJ7y1XatVXiB6UAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlVVTjwrXgBhstrfTWN5m3F4x0yVTwYf4j6pwVG1Rv3qAeWyXnHXmZjbGvRLcu3eljP7QHnch5javu1enxSW8bt8UDEby+h1Ff7QMLeZLIXtPjLmW5pu8aR0n7yqBb0Stabenj6wFEAUALt37fSAonQBFrnNdVqqi9SgZKz1VqO0p4GQnaifNdIr2+p1UAzmP82NTQJS5bDds4uczkX1so32Aelxfm1g7hKX0Utm5G8yuosrN/LvaiO/ZA9FjtT4DII34S+hkc7czmRr/wBV1HewDI8ydnSBEAAAAAAAAAAhVQLW/wAtj7CPxL25it2dMj0b6q7VA8pl/NvD2/MzHRPvJOEip4cXrX3v2QPEZvW2osvVtxOsNvxghqxiemi8zu1QMNDC+WVsUTeZ73I1jU38y8AN74HFsxmHtbBv+AxGuVOLt6r2qBfgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUp7qC3hdNcSNiibtdI9Ua1E61UDxud82MXbK6HGRuu5u74rvciRemned2IB4bNaw1HluZtzcvbA9P/LxVZHy9CtSiu++qgYOa4ghSssjWcf4ionyqBZTakwUXeuWu+x7/AMiKBav1nhWd1JXdbWIn71AKTtdY75sEq9if2gJf++rD/wBtN62gTN11jF70M6djfzgVotZ4V+9Xs+0xV/dVQLyHUOEm7l1H95VZ+8BeRyxyN5ono9nS1UVPlAm28aIvWoABRNvWAogBaLwT1IBkLHUeesURLS+niY3cxJHcn6qqrfYBnrPzW1TCrUmWC5Tir2crv+XyoBm7PzjtlWl3jpI/rRSNf+y5GKBlbXzS0lK2skstv/vYnL/0+YDJQ610pN3MlAn+8d4f76IBX/7n03/9nZ//ACI/7QEkmrdMM35O1+7Mx3yKoFpL5g6Qi71+x32Gvf8AutUDHXPmzpmLZG24md9WNGp63OQDD33nHcqipZWDG9D55Of9llP3gPP5HzC1be7Fu/h413Mt2+GifeT3/aBgZZZZZFkle6SR3ee9Vcq9qgSgOxAPW+V2C+Ozvxsjf9PYoj6ruWR2xier3gNtgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlc6m3d2AeT1P5l4vGc9vYct9epsdyu/gxr9ZyVqvUnaqAam1R5greTuflL5JXIq8lrH7zGou5qMTZ6wPKXmun7WWduiNT58q/1WgYe61Dmbhf4ly5qL8xi8nrpQDHukRy1c5V9LkAl8aP6SfrIA8WL6TfWgEzXMXcte1AHt9QEfSoEFSu8ABPHLJG7mjcrHdLVovsAyFrqjNQLRLlZG/RmTnT1rVQMxZa7Yvu3lvRfpxKv7qgZuxzWMvafDzNc5fmKvK/1KBe06fYn5wIAAFEpTgAogBNgAAA2dCeoAAAca8QFE6AAACLWPe5rWoqucqI1qbVVV4Abt0dgG4XBw2rkT4h/wDEuF+u7aqfd3AZoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALPKZfH4uzdd387YIGb3O4r0IiVqoGkvMLz0bO6WzsJFZaNVyKkTla6RvBXv+j9VANT5TW19eczVkVIuEMWxvoVd6oBh3ZOZe41E3V276dPSBRdd3KpTnVE6EonyAU3Pe7vOVfSoEoCidACidAACdssrdzl9YFSO/uG7nc3Yn5gK8eTf89n6v8AtArR5C2f86i9CgVkc1UqioqdW35AJurgAqAqvTT0AZXHarytp7qv8eH/AC5Kr7d4HpMfq3FXLUSV3w0v0ZO7+sgGYRUVKtVFT6VdnrQAAAAAAAAAAAAAAD2nlhplb3IfzS5b/pLVaQpwfNw/UTaoG1KIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHnNc6+w2ksQ69vnI+d6KlnZo5EfPIid1KI6jU+c5UogHLWufNPVOrL50l/L4Nui1itIu5Gi7qV49YHk1c5e8teO3bt6doCq9KgKgQAAAAAAAAAAAEzJHsWrFVvo2AXUOSemyROZOlN/qAu4bmGVPcXb9Fd4FWiV27ukABD8gF1YZe/sn1tpnNam9m9vqWqAegsddJsbewf8SFf6qgZ6yy2PvURbadr1+hWjvUu32AXSotfzIv5QAAAAAAAAAC9wuIustk4bC1Sr5VRXPTajGcXL1IBu/FYy0xlhDZWzeWKFvKnSq8VX0gV57mGCNZJpGxxt2ue9aNRPSoHlpfNnRzs3b4bH3S5TI3MrYmQ2KeI1tV2uWTZHRqIqr725APXAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPK+YvmNitH4nx51Sa/mRUs7NF96RU+cvQxvFePADmDUOpMzqDKzZTKTrNdSqqcUaxvzWMTZRqdAGByNuqL4zU2OVEcnWnECxAAAAAAAAAAAAAAAAAHGqbF6U2AXUGRkZ7r05m+0C/imjkbzMWqATgQ6esABFFVFqirzJxrt9YGRs9SZi1p4c6vYneZLRyL2qiqBmLXXXC6ttv0onf1V2gZGHV+Dk70qxqvzZGO+VqKBeR5vDv7t3F95yJ8qoBWbeWb+7MxfsvaoE/j2/wBNv6yfnAgtzap3pWJ95PzgUJMtio+9dxfrtX5ALWbVWBjWnxHOv0Y2Od7aAZ3TvnXpnTlhItli7i+yUq/x5ZnsgjRODWKiSup90Cwzf4jdcXrXR4+O1xsa7nRMWWX9aTmb+wB4XM6o1FmZOfK5C4vNtUbNI5zE9DK8qdiAbh/DlolY7abVdy33pua2x1U3RNX+JIiL9Jyctep3BUA3OAAAAAAAAAAAAAAAAAAAAAAAAAAAAB57XOuMZpPByZG9dzyrVlpbIqI6aXg1P6y8AOWNSajyuocxNlcnL4tzOuzfyxsTusYi7kQDHdfECDmo5qtdtauxUAxFzA+KVW/N3ov5AKYAAAAAAAAAAAAAAAAATfXiBMx72O5mrRQL+3yDXbJvdXp4AXSLVK8OkCIAB6AIUQCO0AAAVUCC0XeAAjVaU4dADZ/TqAAZ/QWjb3VWpbfFwo5sCr4t5O2i+FAneX0r83rA6yx+PtLCyhsrWNIra3Y2OGNu5rWpREAuAAAAAAAAAAAAAAAAAAAAAAAAAAAAWOazNhh8ZcZLISpDaWzFkleqV2JwTpcq7EA5V8wNcZDVuoJMjc8zLZlI7O2VapDFWqfed84Dz1V6fXtAAAKVzbpNErV7ybWqBiXNc1ytVKKgEAAAAAAAAAAAAAAAAAABGoFWC6miX3NrfortAvre9il2d13Q4C4XZ+dAAAAAAAAAAAAAmgikuLiOCFjnzSuRkUbUq57l2IjU6eIHUflN5eRaS08jJ2tdl7ukt9K3bReEbV+iwD2gAAAAAAAAAAAAAAAAAAAAAAAAAAAIVUDnbz58xnZnLLgMfLXF2D18d7Fqk1wnWm9sYGsAAAAAAtL625k8Vqe+neb0gY6q7OFN6AAAAAAAAAAAAAAAAAAABECAFeC9mj2d5nQoF9DeQSbK8ruhwFfZSvAAAAAAAAAATdt7FQDe3kT5WPsY2anzUPLdTNRcZbPTbEx3+I5q7nuTu9CdYG46IAAAAAAAAAAAAAAAAAAAAAAAAAAAAB4Hzp16mmdLuhtX0y2S5oLREWixt+fIvoTYnX6FA5kqoAAAAAACAY6/tUjXxG7l3oBaAAAAAAAAAAAAAAAAAAAAAARqBUhu5o0911W9CgXMeU/zG/qgXDby2dufy/aAqI5q7nIvoAmr29igFROkABCvb00VN3WoG3PJbyidk5YtR52FUx0bkksbV6Kizva6qSOT/LRdyceOwDflE6E2bQLbI5jFY2JZsheQWkSfPuJWRN7VeqIBYYLWmms7c3Fvh75l++1Rqzy26OfC3m3J4qN8NV6uatAM0AAAAAAAAAAAAAAAAAAAAAAAAAJJZWxRukkcjI2NVz3O2IiNSqqvUByb5layl1Tqy5yLa/BNcsNjHupAxV5Vou5z1VXAebAAAAAAAAg5qOarXJVF3oBirq1fC9OLF7rukCiAAAAAAAAAAAAAAAAAAAAAAAAAIork3KqehQJ23E7dz3esCdL26Tc/2J+YCb4+66fYgE1vlruG4ZM3ke5jkc1r2tc2rdqVRyKi9oHq5fPTzWlY1iZt8cbURrWxQW8SIibqckTaAYi/8xtfX9Uus9kJGrvZ8VK1n6rXI32AWmCwmc1NnbfF2KPuchdvRrFc5XUT5znuXcxqbVUDsHQOicZpDTkGIsWoqs/iXNxT3ppnd57vSB6AAAAAAAAAAAAAAAAAAAAAAAAAAa38/tXrh9ILjYHUvMsroNi0c2FtPEVPtbGdoHNy7d/pAAAAAAAAAAJZI2SMVjkq1eAGKngfC/lduXur0gUgAAAAAAAAAAAAAAAAAAAAAAAAAAARAgA4UAqW1tcXNxFbW8bpbiZ7Y44mJV7nu3NROIHVfkv5S2+jcSt3fMbJn7xrfiXpRWws4RM9HzncQNjAAAAAAAAAAAAAAAAAAAAAAAAAABy3506o/nuvLzw3K61x1bGDin8JffVPS9VA8UAAAAAAAAAAE2AUp4GzMc1+/wCaoGLlifE9WPSipuAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAnghmmlZDCxZZpFRkcbEVXucu5ETi4DpbyP8k2abhjz2djSTPStrDAu1LNrt6dci8V4cANt8rejq7AIgAAAAAAAAAAAAAAAAAAAAAAAADB651CmA0lkstVEfbQuWCtKLK73I02/XVAOQ3Pc5Vc5VVzlVzlXaqqu9faBAAAAAAAAAAAAQoBTubdkrFa7Yqd1QMXLE+N/K9KKntAkAAAAAAAAAAAAAAAAAAAAAAAAAAC4x2PvsjexWVjA+4u53IyGCJFV7l6k6OlQOmPJ3yOtdKIzL5pGXWoHonhtROaO0Rd7WL8+Tpf6gNq0T8gAAAAAAAAAAAAAAAAAAAAAAAAAAANR/iXzaW+nsdiGLR97cLPIif5cCblTrc9F7ANBAAAAAAAAAAAAAAVApz28czFa5F2JVF3Ki9aqoFhcY67gibPJE9LZ6q1k6tVGOcm9EVURFX5OsC2AAAAAAAAAAAAAAAAAAAAAAAAM/orQWpNW5FLPEwK5jaePeP2QQou5Xu/qptXqA6b8t/KrT+i7FEgb8VlnonxWQen8TbvSNP8NidCbVA9wzlexK8d4E4AAAAAAAAAAAAAAAAAAAAAAAAAAAObvxEZb4zX62lasx1rDCqV2c70WZy+p7U7ANbgAAAAAAAAAAABDbtru4AZzSuh9S6muVhxNo6RjVpLcv9yGP7TtydlV6gN0aO8gNOYvkuc05crftSvI5FZbsd1MrzO+8qge4zGmMDlsJJhr+0ikxr0RqQNbytaqblby0Vqp0toBzh5oeRuc0s+bI4xHZDAp76Sp700DU4Stam1Prt7aAa3Wv6E2V9YAAAAAAAAAAAAAAAAAAAAJ4YZp5mQQMfLPI7kjjY1XOcvQiJVagbg8u/wAOGTv/AA7/AFY51hZr77cfGv8AqHpw513Rt9vTQDfeGwmJw1hHYYu1jtLSLuRRNolV3qvFXL0rtAvP0gVoFTkp0AVQAAAAAAAAAAAAAAAAAAAAAAAAAAAcieYl+t/rvNXSrzNfezsY7pZG/wANn7LUAwIAAAAAAAAAAAmhimmlZDExZJZFRI2RornuVeCNTaoG4PLzyBlk8PI6r5o296PFsdR7k6JXNVafZbResDctjYWNjaR2llAy3tok5YoYmoxrU6ERNwFdarv4AP0gQciORUciKi7FRdyp1oBqjzI/Dxhc06TI6dVmMya+++2VP9NM70J/dr1p7vUBoLUuk9Racvvg8zZSWkqr7ivSrJE6WPSrXJ1pX0AYrbspu4gAAAAAAAAAAAAAAAKltbz3M7Le2jfNO/uxRNVz3ehqVr2VA2boz8OWsMu5k+ZVMLYrtVkqc905OhI0X3fvqi9QG8tFeWOj9JQp/KrVrrulJL6dfEuHL9r5idTaIB6cAAAq2+9QKwAAAAAAAAAAAAAAAAAAAAAAAAAAU55mwwySv7sbXPcvU1KqBxbcTOmnkmk78j1kX0uWqr6wJAAAAAAAAAADJ6Z0tnNRZNuPxUCzTLRXu+ZG3i57tzUTim9eAHRPl95VYHScDZeVt3l3IjZb2RK8ip82JPmp17wPYoiIBEAAAAERE3AWuUxGLytm+zyVtHd2smx0M7Ue307dy9aAao1Z+GPT1851xp68fjpnf+mnrNAvodXxE9bgNY6i8ifMnDOcv8v/AJjCm3xscqz9nh0bL/ywPFXdleWkywXcElvOnejmjcxyfdcgFKi0/LwAgAAAAAABx37Oz5dgFS3t7i4lSKCN0sq92ONqvVexNoHsdP8Akl5l5lUWLFPs4l/xr9Ut0T0tcqyL2NA2Tpn8LeOi5ZdRZN9y5NrrayakTK9CyPq5futQDamnNF6V03F4WGx0NovGVreaV32pHK57u1wGYTZ8nZ0AP0AAAACeFV50AuAAAAAAAAAAAAAAAAAAAAAAAAAAAxeq5vB0tlpq0WOyuX16OWJy/kA46r+YAAAAAAAAAAz+h9C5nVmV+DsW8kDKLc3Tk/hxN41X6XQgHS2kdHYXTGKZj8bEja0dcTOp4kz13uevyJuQDMgAAAAAAAAFVAfpAt7/ABmNyEKw39rDdQrvjnjbI31ORUA8plPJHyvyKq+TCRQvXdJaufBT7sbmt9gHmr78MGg5qutry/tXL3U8SORidixq72gYi4/ClZu22+oHsToks0f8kzQLKT8Kd+ncz8TvtWrk+SVQH/8AKWQ8RW/9wRclfcX4V3MqdPL4oF3b/hQhTbPqFzk6GWaM/emUDL2P4XNExKi3d/kLhyd5rXRRovZ4au9oHo8X5F+VtgqObiG3Eid59zLJLX7rnKz2AesxuGxGMiSLG2cFnGm5lvEyJPUxEAu6bKcE3J0egBwp07+sAAAAAAACaNV8RALkAAAAAAAAAAAAAAAAAAAAAAAAAAMHr9VTQmfVN6Y28/6DwOQgAAAAAAAAGc0RovLarzTMfZN5Ymqj7q5clWQx8VVfkTeB0/pjS+J05iIsbjYvDhjRFe93fkfxe9U3qoGTAAAAAAAAAAAAAAr/AEoAqtKcAACqgPz1AAKJSnDoAVXpAAAAAAAAAAAEY/7xvpoBdAAAAAAAAAAAAAAAAAAAAAAAAAABhtdR+JonOxpvdjbxE7YXgcfgAAAAAAAX2AwOUzmWgxeOi8W7uHI1rdtGpxe5eDE4gdR6I0bjdLYCLG2ac0mx93c0o6aVd7l/MmwDO0Tdw30AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABGP+8T1gXQAAAAAAAAAAAAAAAAAAAAAAAAAAWOdtVusJf2yJVZraaJE6edjm/lA40AAAAAAAa1VcjU2uVUajeNV4AdI+TnlymmsIl9ex0zWQaizo6lYY17sadm1wHvQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJ4kTxEAuAAAAAAAAAAAAAAAAAAAAAAAAAAAUQDjHM2HwOYvbHja3EkCp9h6tAtAAAAAA2h5DaB/m2WdqG/jR2PsHUt2OTZLcU39aRptXhzbOCgb+/ptAAAAAAAAAAAFC+v7GwtZLu9njt7WJFWSaVyMY1E4qq/wBOoDXuW/Ed5b2Ezoon3eQVuxz7SBOROusz4gKmD/ET5bZOdIZZ58dI7urexcrF+9G6RqfeVANhW1zbXMLJ7aVk0MnckjdzNcnU5NigTgAAAAAAAF3dldn5QPE6n87fL3ATOt57/wCLu2d+3sm+MqelyKkaL98DCWf4mvLqaZscsORtmr/iTQRqnqjlkd7ANgaf1Np/P2XxuGvor22RaOfE6qtXoe3Y5i/VciKBkQAAAAAAAJ4O+BcAAAAAAAAAAAAAAAAAAAAAAAAAAAA5T84cauP8yMzGie7NMl0zrS4a2Vf2nKB5IAAAAXmDw97mMva4yzajri7kbFHXr2qq9SN2qB1jpvA2WCwdpirJKW9rGjEdSjnOpV73dbl3gZEAAAAAAAAAApXd3bWdrLd3L0jt4GOllkXutY1KuVeqgHJXmj5m5XWeZe97liw8D1Wxsq+6iL896cXuA8fRKUps3UAUSlKbE3JwA2H5N+bGQ0llorG9kdLp66kayeNy1S2V60SSNF3cvFE2UA6naqOYjmqjkVEVFRaoqLuoAAAAAAABoj8QPm5fR3smksJO6BsNEytzEqo9XqlfCaqbU5U7ypt5vQoGjNgD5OgDK6X1XnNN5eLKYe4dDcRKnPVVVkrE3senFF6wOvNF6rx+qNNWeZsnIrLiNvjxpVFimRqeLGvMibWO2e3cBmQAAAAAAVbdu1VArAAAAAAAAAAAAAAAAAAAAAAAAAAAA0D+JnDeDqLG5Vqe5eWzrd6p9OB9dvpbInqA1IAAAANz/hz0c1UutUXLK77SwrSmxf4z07fd9YG512/IAAAAAAAAAAANe/iEys1j5Y3rIlVrryWG2VU+i96vcnoVrFTtA5XTYAAAP0Ade+T2WmyflnhLuVyukS2WByu3r8PI6Db6UaB60AAAAAJJ5WwwPmcvuMar17EqBxBkshc5DI3N/cOV091NLcSrWq8z1qvtAtwAEar+QDev4VMpMrM5jFcqwN+Guo0Xc1z0ex6p6URqAb0AAAAAABXgRUYirx3gVAAAAAAAAAAAAAAAAAAAAAAAAAAAAa6/EDgv5joCS7jbWbGSx3SU3+Gq+G9PU/m7AOawAACtYWVxfX1vZW7VdcXMscETV4vkVET2qB1vpzA2mDwNnibanh2kSRq6lEe5Eq9/3nbQMiAAAAAAAAAAAPEeeeAmzHlrko7dquuLXkvY2JtVyQO95E+4qgcmV3LsVFpt3oqJvpQAAAbvyovCq0TcB2P5ZYCfCaCw+NmTkuIrZHzMXe2SVVmenY56gejAAAAACV7GPY5jkq1yKjk6UXeBxRqTC3GEz99iLhFSWxnkh2pRXcq+670K3aBjgAADoD8LGCmixWWzcjVSO7kjtbdabFSCrnqnUqvT1AbqAAAAACCIqrQC8RERKJuQAAAAAAAAAAAAAAAAAAAAAAAAAAAAC2yePt8hj7iwuErb3MT4JWpv5ZGq1fYoHHWbxVxiczd4y5ok9nM+CSnFWOVK/epUC0AAbG/D/p1cjrN2RkbzQ4qLxkVd3jSe5Gi9feXsA6IqAAAAAAAAAAAAEHNa5qtciOa7Y5qpVFRdlAObPN7yPy+FyFzl8BbuucHK5ZZIYEV0lovFOXaro/rJu+dQDVKKlN6dez8taARa1zlRGorlXuom2vooBufyV8kclPkLfUepIFt7G3c2azsZ0o+Z6bWukThGi8FA6C/p+UAAAAAAADVXnh5OTalamdwjU/ncLOWa3rRLqJm1KKuxJG+3iBzhfWN7Y3ctpeQyW91C7llhlY6N7F+sjkRUAo13daUTdSoHsPLnyr1FrHIN8GKS2w7FRbnJSMXw0bxbHWiPf9VO1UA6swODxuDw9tisdGsVnaxpHGxVqqoiqqqq9K1AvgAAAAAnhbV9ejeBcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEREQDnz8R2lVstQ2+fhbS3yLPBuHImxJ4kpt+0xE9SgapAAdE+QGD+A0N8a9tJsnO+aq7/AAo/4UaL2oru0DYoAAAAAAAAAAAAACbN2zgB5/L+W+g8tOs9/hbSad3fmSJGPd9pzOVV7QKuF0FovDSpNjMRaW06bp2xNWVPQ91Xe0DN+vb+gAAAAAAAAA4U4b+0DG5rS2m82xG5fHW19y9xZ4mvcz7LlSrewDE2flN5bWkyTQ4Cz50WqeJH4iep/MgHpo4oo42xxsaxjERrGtRERqJuoibgJgAAAAAAV4m0b6QKgAAAAAAAAAAAAAAAAAAAAAAAAAAAAADzfmPpJmp9I3uLonxCs8W0cvzZ2IvJ2OqrV9IHJk0UkUj4pEVksblY9jkorXIu1q9aAQYx73ta1Kq5eVqJvVVWiAdf6exTcVgbDGtRE+Ft4oVp0sZRV7VAvgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAE0beZ1OjeBc0SlAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABRAOdfxB6HXE6hbnrVlLDKO/jURaMuUSrk++nvJ2geO8vMa3I66w1oqVa+7ifInDkiXnd+yigdYJsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAK8LeVFd0gVAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABiNW6ZsdR6fusRebI7llGS0q6N6bWvTrav5gNFeT+l7/ABnm27H5CNGXeLiuZHom5eZvhI5PquR+wDoEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABNGzmdTgm8C5ogAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAYibTuOdqJufa3kyCWr7F7kVEbJE+SN6c2zvNVnu+kC8TrAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAi1FctEAuGN5W048QJgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKIBQmiptTd0AUwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVWtKVUCvDFypVe8BUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKIBbyRq1ap3V49AEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAXqArQx095d4FUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFRFAoSRKi7NwFMAAAAAAAAAAAAAAAAAAAAAAAAAAAACPGlKqBUigolXeoCsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABRkgXezZ1AU+G6igQAAAAAAAAAAAAAAAAAAAAAAAAABqK5aJvAuGR8qV3u6QJ6AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEj4kctdwFB7XN2L6wIAAAAAAAAAAAAAAAAAAAAAAF6gJ2RK7bub0gV2sa1KNSgEaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAqIqbQKLoeKeoCmrXJ3koBAAAAAAAAAAAAAAAAAAATNjc7cgFVsDU37QKgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAqIu8Ck6Bq7loBTdFInCoEqrTeAAAAAAAAAAAAEUSu4CZsDl40AqNgam/aBUAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoBBWtXegEiwsXdsAl+H+sBDwHgS+FL0APDk+iA8OT6IEfBk6AI+A8CPw/1gJ/BjTegE6IibgACgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/2Q=="></div><div class="u-author_tit"><p>My name is Micheal Wayne and this is my blog.<br>I am a front-end software engineer.<br>Contact: <a href="mailto:michealwayne@163.com"> <span>michealwayne@163.com</span></a></p></div></div></div></div><div class="tag-lists widget"><h3 class="widget-title"> Tags</h3><div class="widget-content"><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/APM/">APM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BOM/">BOM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Bun/">Bun</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DOM/">DOM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML/">HTML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IDE/">IDE</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OKR/">OKR</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UML/">UML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UX/">UX</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WebApi/">WebApi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WebSocket/">WebSocket</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Zepto/">Zepto</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ai/">ai</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es/">es</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es6/">es6</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/eslint/">eslint</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gpt/">gpt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html5/">html5</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http/">http</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jQuery/">jQuery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lerna/">lerna</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lottie/">lottie</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/">nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/">nodejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/prettier/">prettier</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/prompt/">prompt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pwa/">pwa</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react/">react</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sketch/">sketch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/skywalking/">skywalking</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/taro/">taro</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tslint/">tslint</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/typescript/">typescript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/">vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webApi/">webApi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webpack/">webpack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/代码规范/">代码规范</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前端/">前端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/动效/">动效</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/图形/">图形</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/安全/">安全</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/小程序/">小程序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/工具/">工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/工程/">工程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/微前端/">微前端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/思维逻辑/">思维逻辑</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/性能/">性能</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/插件/">插件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/日常工作/">日常工作</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/架构/">架构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/概念/">概念</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/正则/">正则</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/浏览器/">浏览器</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/用户体验/">用户体验</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/笔记/">笔记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/算法/">算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/编码/">编码</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网络协议/">网络协议</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/规范/">规范</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/设计模式/">设计模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/调试/">调试</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/质量/">质量</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/跨端/">跨端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/软件/">软件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/软件工程/">软件工程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/项目管理/">项目管理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/高并发/">高并发</a></li></ul></div></div><div class="archive-lists widget"><h3 class="widget-title"> Archive</h3><div class="widget-content"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/04/">April 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/03/">March 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/02/">February 2024</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/01/">January 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/12/">December 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/11/">November 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/10/">October 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/09/">September 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/08/">August 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/07/">July 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/06/">June 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">April 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">March 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">February 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">January 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">December 2022</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">November 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">October 2022</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a><span class="archive-list-count">5</span></li></ul></div></div></div></div></div><footer><div class="copyright"><div class="container"><div class="col-6"><div class="site-info">© 2016 - 2024 <a href="http://blog.michealwayne.cn">Micheal Wayne</a></div></div><div class="col-6"><div class="site-contact"><div class="social-links"><ul><li class="social-link"><a href="http://github.com/MichealWayne" target="_blank" class="link-github"><i class="icon icon-github"></i></a></li><li class="social-link"><a href="mailto:michealwayne@163.com" target="_self" class="link-mail"><i class="icon icon-mail"></i></a></li></ul></div></div></div></div></div></footer><a class="scroll-up"><span class="icon icon-up"></span></a><script src="https://code.jquery.com/jquery-3.1.0.min.js"></script><script src="/js/posfixed.js"></script><script src="/js/utils.js"></script><script src="/js/search.js"></script></body></html>