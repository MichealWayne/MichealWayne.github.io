<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> ã€ç¬”è®°ã€‘ReactJSéšæ‰‹è®°ï¼ˆæŒç»­ï¼‰ | Wayneçš„åšå®¢</title><meta name="description" content="ã€ç¬”è®°ã€‘ReactJSéšæ‰‹è®°ï¼ˆæŒç»­ï¼‰ - Micheal Wayne"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/scss/casual.css"><link rel="stylesheet" href="/css/icon.css"><link rel="search" type="application/opensearchdescription+xml" href="http://blog.michealwayne.cn/atom.xml" title="Wayneçš„åšå®¢"></head><script>(function (w) {w.frontjsConfig={token:"81a82620fb0dca7680f2f06be134fa4f",behaviour:8,FPSThreshold:10};w.frontjsTmpData = {r:[],e:[],l:[]};w.frontjsTmpCollector = function (ev) {(ev.message ? window.frontjsTmpData.e : window.frontjsTmpData.r).push([new Date().getTime(), ev])};w.FrontJS = {addEventListener: function (t, f) {w.frontjsTmpData.l.push([t, f]);return f;},removeEventListener: function (t, f) {for (var i = 0; i < w.frontjsTmpData.l.length; i++) {t === w.frontjsTmpData.l[i][0] && f === w.frontjsTmpData.l[i][1] && w.frontjsTmpData.l.splice(i, 1);}return f;}};w.document.addEventListener("error", w.frontjsTmpCollector, true);w.addEventListener("error", w.frontjsTmpCollector, true);w.addEventListener("load", function () {var n = w.document.createElement("script");n.src = "https://frontjs-static.pgyer.com/dist/current/frontjs.web.min.js"; w.document.body.appendChild(n);}, true);})(window);</script><body><div class="header"><header class="site-header"><div class="site-nav"><span class="button-toggle"></span><div class="container"><div class="nav-item"><a href="/" target="_self" data-text="home">Home</a></div><div class="nav-item"><a href="/archives" target="_self" data-text="archive">Archive</a></div><div class="nav-item"><a href="/about" target="_self" data-text="about">About</a></div></div><form id="search-form" class="nav-item"><input type="text" id="local-search-input" name="q" results="0" placeholder="search" autocomplete="off" autocorrect="off" class="search form-control"><span onclick="resetSearch()" class="fa fa-times"> </span></form><div id="local-search-result"></div><p class="no-result">No results found</p></div></header></div><div class="main"><div class="container"><div class="content"><div class="post"><article class="post-block"><h1 class="post-title">ã€ç¬”è®°ã€‘ReactJSéšæ‰‹è®°ï¼ˆæŒç»­ï¼‰</h1><span class="post-date">Jul 6, 2018</span><span class="post-tag"><a href="/tags/ç¬”è®°/">ç¬”è®°</a><a href="/tags/js/">js</a><a href="/tags/react/">react</a></span><img src="/images/icons/react.png" class="bgimage"><div class="post-content"><h1 id="ReactJS-éšæ‰‹è®°ï¼ˆæŒç»­ï¼‰"><a href="#ReactJS-éšæ‰‹è®°ï¼ˆæŒç»­ï¼‰" class="headerlink" title="ReactJS éšæ‰‹è®°ï¼ˆæŒç»­ï¼‰"></a>ReactJS éšæ‰‹è®°ï¼ˆæŒç»­ï¼‰</h1><ul>
<li>start date: 2018-05-27 22:00:45</li>
</ul>
<blockquote>
<p>React æ˜¯ä¸€ä¸ªè½»é‡åº“ï¼Œå®ƒåªå…³æ³¨ MVC çš„è¯•å›¾éƒ¨åˆ†ï¼Œå®ƒéµå¾ªä»ä¸Šåˆ°ä¸‹çš„å•å‘æ•°æ®æµã€‚</p>
</blockquote>
<h2 id="1-setState-è¿ä½œæœºåˆ¶åŠä¼˜åŒ–"><a href="#1-setState-è¿ä½œæœºåˆ¶åŠä¼˜åŒ–" class="headerlink" title="1 setState()è¿ä½œæœºåˆ¶åŠä¼˜åŒ–"></a>1 <code>setState()</code>è¿ä½œæœºåˆ¶åŠä¼˜åŒ–</h2><p>ReactJS ä¸­æ•°æ®åˆ° UI çš„æ˜ å°„å°±æ˜¯é <code>state</code>ã€‚React é€šè¿‡ç®¡ç†çŠ¶æ€å®ç°å¯¹ç»„ä»¶çš„ç®¡ç†ï¼Œé€šè¿‡ this.state()æ–¹æ³•æ›´æ–° stateã€‚å½“ this.setState()è¢«è°ƒç”¨çš„æ—¶å€™ï¼ŒReact ä¼šé‡æ–°è°ƒç”¨ render æ–¹æ³•æ¥é‡æ–°æ¸²æŸ“ UIã€‚</p>
<h4 id="1-1-setState-ç”¨æ³•"><a href="#1-1-setState-ç”¨æ³•" class="headerlink" title="1.1 setState ç”¨æ³•"></a>1.1 setState ç”¨æ³•</h4><p>è¯­æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setState(updater, [callback])</span><br></pre></td></tr></table></figure>
<p>å®ƒèƒ½æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•° updater å¯ä»¥ä¸ºå¯¹è±¡æˆ–è€…ä¸ºå‡½æ•° ((prevState, props) =&gt; stateChange)ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºå›è°ƒå‡½æ•°</p>
<h4 id="1-2-setState-å¼‚æ­¥æ›´æ–°"><a href="#1-2-setState-å¼‚æ­¥æ›´æ–°" class="headerlink" title="1.2 setState å¼‚æ­¥æ›´æ–°"></a>1.2 setState å¼‚æ­¥æ›´æ–°</h4><p>setState é€šè¿‡ä¸€ä¸ªé˜Ÿåˆ—æœºåˆ¶å®ç° state çš„æ›´æ–°ã€‚å½“æ‰§è¡Œ setState æ—¶ï¼Œä¼šæŠŠéœ€è¦æ›´æ–°çš„ state åˆå¹¶åæ”¾å…¥çŠ¶æ€é˜Ÿåˆ—ï¼Œè€Œä¸ä¼šç«‹åˆ»æ›´æ–° this.stateï¼Œåˆ©ç”¨è¿™ä¸ªé˜Ÿåˆ—æœºåˆ¶å¯ä»¥é«˜æ•ˆçš„æ‰¹é‡çš„æ›´æ–° stateã€‚</p>
<p><img src="/images/react/p-setstate1.png" alt="p-setstate1.png"></p>
<p>å¯¹ setState çš„è®¤çŸ¥ï¼š</p>
<ul>
<li>1.setState ä¸ä¼šç«‹åˆ»æ”¹å˜ React ç»„ä»¶ä¸­ state çš„å€¼.</li>
<li>2.setState é€šè¿‡è§¦å‘ä¸€æ¬¡ç»„ä»¶çš„æ›´æ–°æ¥å¼•å‘é‡ç»˜.</li>
<li>3.å¤šæ¬¡ setState å‡½æ•°è°ƒç”¨äº§ç”Ÿçš„æ•ˆæœä¼šåˆå¹¶ã€‚</li>
</ul>
<p>é‡ç»˜æŒ‡çš„å°±æ˜¯å¼•èµ· React çš„æ›´æ–°ç”Ÿå‘½å‘¨æœŸå‡½æ•° 4 ä¸ªå‡½æ•°ï¼š</p>
<ul>
<li>shouldComponentUpdateï¼ˆè¢«è°ƒç”¨æ—¶ this.state æ²¡æœ‰æ›´æ–°ï¼›å¦‚æœè¿”å›äº† falseï¼Œç”Ÿå‘½å‘¨æœŸè¢«ä¸­æ–­ï¼Œè™½ç„¶ä¸è°ƒç”¨ä¹‹åçš„å‡½æ•°äº†ï¼Œä½†æ˜¯ state ä»ç„¶ä¼šè¢«æ›´æ–°ï¼‰</li>
<li>componentWillUpdateï¼ˆè¢«è°ƒç”¨æ—¶ this.state æ²¡æœ‰æ›´æ–°ï¼‰</li>
<li>renderï¼ˆè¢«è°ƒç”¨æ—¶ this.state å¾—åˆ°æ›´æ–°ï¼‰ï¼Œæ­¤è¿‡ç¨‹æ‰§è¡Œæœ€è€—æ€§èƒ½</li>
<li>componentDidUpdate</li>
</ul>
<p>ç›®å‰ React ä¼šå°† setState çš„æ•ˆæœæ”¾åœ¨é˜Ÿåˆ—ä¸­ï¼Œç§¯æ”’ç€ä¸€æ¬¡å¼•å‘æ›´æ–°è¿‡ç¨‹ï¼Œä¸ºçš„å°±æ˜¯æŠŠ Virtual DOM å’Œ DOM æ ‘æ“ä½œé™åˆ°æœ€å°ï¼Œç”¨äºæé«˜æ€§èƒ½ã€‚</p>
<blockquote>
<p>åœ¨ React ä¸­ï¼Œå¦‚æœæ˜¯ç”± React å¼•å‘çš„äº‹ä»¶å¤„ç†ï¼ˆæ¯”å¦‚é€šè¿‡ onClick å¼•å‘çš„äº‹ä»¶å¤„ç†ï¼‰ï¼Œè°ƒç”¨ setState ä¸ä¼šåŒæ­¥æ›´æ–° this.stateï¼Œé™¤æ­¤ä¹‹å¤–ï¼ˆaddEventListener ç›´æ¥æ·»åŠ çš„äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œè¿˜æœ‰é€šè¿‡ setTimeout/setIntervalï¼‰çš„ setState è°ƒç”¨ä¼šåŒæ­¥æ‰§è¡Œ this.stateã€‚</p>
</blockquote>
<p>çœ‹ä¸€é“é¢˜ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Example</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">super</span>();</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      val: <span class="number">0</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123; <span class="attr">val</span>: <span class="keyword">this</span>.state.val + <span class="number">1</span> &#125;);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.state.val); <span class="comment">// ç¬¬ 1 æ¬¡ log</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.setState(&#123; <span class="attr">val</span>: <span class="keyword">this</span>.state.val + <span class="number">1</span> &#125;);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.state.val); <span class="comment">// ç¬¬ 2 æ¬¡ log</span></span><br><span class="line"></span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>.setState(&#123; <span class="attr">val</span>: <span class="keyword">this</span>.state.val + <span class="number">1</span> &#125;);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.state.val); <span class="comment">// ç¬¬ 3 æ¬¡ log</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">this</span>.setState(&#123; <span class="attr">val</span>: <span class="keyword">this</span>.state.val + <span class="number">1</span> &#125;);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.state.val); <span class="comment">// ç¬¬ 4 æ¬¡ log</span></span><br><span class="line">    &#125;, <span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç»“æœæ˜¯ï¼š<br><code>0ã€0ã€2ã€3</code>ã€‚åŸå› ï¼šæ¥ä¸‹æ¥å°±å¯ä»¥ç†è§£äº†ï¼Œå› ä¸ºåœ¨ componentDidMount ä¸­è°ƒç”¨ setState æ—¶ï¼ŒbatchingStrategy çš„ isBatchingUpdates å·²ç»è¢«è®¾ç½®ä¸º true äº†ï¼Œæ‰€ä»¥ä¸¤æ¬¡ setState çš„ç»“æœå¹¶æ²¡æœ‰ç«‹å³ç”Ÿæ•ˆï¼Œè€Œæ˜¯è¢«æ”¾è¿›äº† dirtyComponents ä¸­ã€‚è¿™ä¹Ÿè§£é‡Šäº†ä¸¤æ¬¡æ‰“å° this.state.val éƒ½æ˜¯ 0 çš„åŸå› ï¼Œå› ä¸ºæ–°çš„ state è¿˜æ²¡è¢«åº”ç”¨åˆ°ç»„ä»¶ä¸­ã€‚</p>
<p>åœ¨çœ‹ setTimeOut ä¸­çš„ä¸¤æ¬¡ setStateï¼Œå› ä¸ºæ²¡æœ‰å‰ç½®çš„ batchedUpdate è°ƒç”¨ï¼Œæ‰€ä»¥ batchingStrategy çš„ isBatchingUpdates æ ‡å¿—ä½æ˜¯ falseï¼Œä¹Ÿå°±å¯¼è‡´äº†æ–°çš„ state é©¬ä¸Šç”Ÿæ•ˆï¼Œæ²¡æœ‰èµ°åˆ° dirtyComponents åˆ†æ”¯ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒsetTimeOut ä¸­çš„ç¬¬ä¸€æ¬¡æ‰§è¡Œï¼ŒsetState æ—¶ï¼Œthis.state.val ä¸º 1ï¼Œè€Œ setState å®Œæˆåæ‰“å°æ—¶ this.state.val å˜æˆäº† 2ã€‚ç¬¬äºŒæ¬¡çš„ setState åŒç†ã€‚</p>
<h4 id="ä¼˜åŒ–æŠ€å·§"><a href="#ä¼˜åŒ–æŠ€å·§" class="headerlink" title="ä¼˜åŒ–æŠ€å·§"></a>ä¼˜åŒ–æŠ€å·§</h4><ul>
<li>å‡å°‘è°ƒç”¨ setState çš„æ¬¡æ•°ï¼Œæ¯”å¦‚å¯ä»¥åˆå¹¶è°ƒç”¨ï¼›</li>
<li>åˆ©ç”¨<a href="https://zh-hans.reactjs.org/docs/optimizing-performance.html#shouldcomponentupdate-in-action" target="_blank" rel="noopener">shouldComponentUpdate æ–¹æ³•</a></li>
<li>æ•°ç»„å£°æ˜ä½¿ç”¨ const</li>
</ul>
<h2 id="2-diff-ç®—æ³•"><a href="#2-diff-ç®—æ³•" class="headerlink" title="2.diff ç®—æ³•"></a>2.diff ç®—æ³•</h2><p>diff ç®—æ³•ç”¨äºè®¡ç®—å‡ºä¸¤ä¸ª virtual dom çš„å·®å¼‚ï¼Œ<strong>æ˜¯ react ä¸­å¼€é”€æœ€å¤§çš„åœ°æ–¹</strong>ã€‚</p>
<p>ä¼ ç»Ÿ diff ç®—æ³•é€šè¿‡å¾ªç¯é€’å½’å¯¹æ¯”å·®å¼‚ï¼Œç®—æ³•å¤æ‚åº¦ä¸º<code>O(n3)</code>ã€‚<br>react diff ç®—æ³•åˆ¶å®šäº†ä¸‰æ¡ç­–ç•¥ï¼Œå°†ç®—æ³•å¤æ‚åº¦ä» <code>O(n3)</code>é™ä½åˆ°<code>O(n)</code>ã€‚</p>
<ul>
<li>WebUI ä¸­ DOM èŠ‚ç‚¹è·¨èŠ‚ç‚¹çš„æ“ä½œç‰¹åˆ«å°‘ï¼Œå¯ä»¥å¿½ç•¥ä¸è®¡ã€‚</li>
<li>æ‹¥æœ‰ç›¸åŒç±»çš„ç»„ä»¶ä¼šæ‹¥æœ‰ç›¸ä¼¼çš„ DOM ç»“æ„ã€‚æ‹¥æœ‰ä¸åŒç±»çš„ç»„ä»¶ä¼šç”Ÿæˆä¸åŒçš„ DOM ç»“æ„ã€‚</li>
<li>åŒä¸€å±‚çº§çš„å­èŠ‚ç‚¹ï¼Œå¯ä»¥æ ¹æ®å”¯ä¸€çš„ ID(key)æ¥åŒºåˆ†ã€‚</li>
</ul>
<p>é’ˆå¯¹è¿™ä¸‰ä¸ªç­–ç•¥ï¼Œreact diff å®æ–½çš„å…·ä½“ç­–ç•¥æ˜¯:</p>
<ul>
<li>diff å¯¹æ ‘è¿›è¡Œåˆ†å±‚æ¯”è¾ƒï¼Œåªå¯¹æ¯”ä¸¤æ£µæ ‘åŒçº§åˆ«çš„èŠ‚ç‚¹ã€‚è·¨å±‚çº§ç§»åŠ¨èŠ‚ç‚¹ï¼Œå°†ä¼šå¯¼è‡´èŠ‚ç‚¹åˆ é™¤ï¼Œé‡æ–°æ’å…¥ï¼Œæ— æ³•å¤ç”¨ã€‚</li>
<li>diff å¯¹ç»„ä»¶è¿›è¡Œç±»æ¯”è¾ƒï¼Œç±»ç›¸åŒçš„é€’å½’ diff å­èŠ‚ç‚¹ï¼Œä¸åŒçš„ç›´æ¥é”€æ¯é‡å»ºã€‚diff å¯¹åŒä¸€å±‚çº§çš„å­èŠ‚ç‚¹è¿›è¡Œå¤„ç†æ—¶ï¼Œä¼šæ ¹æ® key è¿›è¡Œç®€è¦çš„å¤ç”¨ã€‚ä¸¤æ£µæ ‘ä¸­å­˜åœ¨ç›¸åŒ key çš„èŠ‚ç‚¹æ—¶ï¼Œåªä¼šç§»åŠ¨èŠ‚ç‚¹ã€‚</li>
</ul>
<h3 id="ä¼˜åŒ–"><a href="#ä¼˜åŒ–" class="headerlink" title="ä¼˜åŒ–"></a>ä¼˜åŒ–</h3><ul>
<li>å‡å°‘ diff ç®—æ³•è§¦å‘æ¬¡æ•°ï¼Œå³å‡å°‘ update æµç¨‹çš„æ¬¡æ•°ã€‚æ­£å¸¸è¿›å…¥ update æµç¨‹æœ‰ä¸‰ç§æ–¹å¼ï¼š<ul>
<li>setStateï¼šå¸¸è§çš„ä¸šåŠ¡åœºæ™¯å³å¤„ç†æ¥å£å›è°ƒæ—¶ï¼Œæ— è®ºæ•°æ®å¤„ç†å¤šä¹ˆå¤æ‚ï¼Œä¿è¯æœ€ååªè°ƒç”¨ä¸€æ¬¡ setStateã€‚</li>
<li>çˆ¶ç»„ä»¶ renderï¼šçˆ¶ç»„ä»¶çš„ render å¿…ç„¶ä¼šè§¦å‘å­ç»„ä»¶è¿›å…¥ update é˜¶æ®µï¼Œæ­¤æ—¶æœ€å¸¸ç”¨çš„ä¼˜åŒ–æ–¹æ¡ˆå³ä¸º shouldComponentUpdate æ–¹æ³•ã€‚æœ€å¸¸è§çš„æ–¹å¼ä¸ºè¿›è¡Œ this.props å’Œ this.state çš„æµ…æ¯”è¾ƒæ¥åˆ¤æ–­ç»„ä»¶æ˜¯å¦éœ€è¦æ›´æ–°ã€‚æˆ–è€…ç›´æ¥ä½¿ç”¨ PureComponentã€‚</li>
<li>forceUpdateï¼šåªèƒ½å¼ƒç”¨</li>
</ul>
</li>
<li>æ­£ç¡®ä½¿ç”¨ diff ç®—æ³•ï¼š<ul>
<li>ä¸ä½¿ç”¨è·¨å±‚çº§ç§»åŠ¨èŠ‚ç‚¹çš„æ“ä½œã€‚</li>
<li>å¯¹äºæ¡ä»¶æ¸²æŸ“å¤šä¸ªèŠ‚ç‚¹æ—¶ï¼Œå°½é‡é‡‡ç”¨éšè—ç­‰æ–¹å¼åˆ‡æ¢èŠ‚ç‚¹ï¼Œè€Œä¸æ˜¯æ›¿æ¢èŠ‚ç‚¹ã€‚</li>
<li>å°½é‡é¿å…å°†åé¢çš„å­èŠ‚ç‚¹ç§»åŠ¨åˆ°å‰é¢çš„æ“ä½œï¼Œå½“èŠ‚ç‚¹æ•°é‡è¾ƒå¤šæ—¶ï¼Œä¼šäº§ç”Ÿä¸€å®šçš„æ€§èƒ½é—®é¢˜ã€‚</li>
</ul>
</li>
</ul>
<h2 id="3-PureComponent"><a href="#3-PureComponent" class="headerlink" title="3.PureComponent"></a>3.PureComponent</h2><p>React.PureComponent ä¸ React.Component å¾ˆç›¸ä¼¼ã€‚ä¸¤è€…çš„åŒºåˆ«åœ¨äº React.Component å¹¶æœªå®ç° shouldComponentUpdate()ï¼Œè€Œ React.PureComponent ä¸­ä»¥æµ…å±‚å¯¹æ¯” prop å’Œ state çš„æ–¹å¼æ¥å®ç°äº†è¯¥å‡½æ•°ã€‚</p>
<p>è‹¥æ˜¯æ•°ç»„å’Œå¯¹è±¡ç­‰å¼•ç”¨ç±»å‹ï¼Œåˆ™è¦å¼•ç”¨ä¸åŒï¼Œæ‰ä¼šæ¸²æŸ“ã€‚ä½†æ˜¯å¦‚æœ prop å’Œ state æ¯æ¬¡éƒ½ä¼šå˜ï¼Œé‚£ä¹ˆ PureComponent çš„æ•ˆç‡è¿˜ä¸å¦‚ Componentï¼Œå› ä¸ºä½ çŸ¥é“çš„ï¼Œè¿›è¡Œæµ…æ¯”è¾ƒä¹Ÿæ˜¯éœ€è¦æ—¶é—´</p>
<p>å¦‚æœèµ‹äºˆ React ç»„ä»¶ç›¸åŒçš„ props å’Œ stateï¼Œrender() å‡½æ•°ä¼šæ¸²æŸ“ç›¸åŒçš„å†…å®¹ï¼Œé‚£ä¹ˆåœ¨æŸäº›æƒ…å†µä¸‹ä½¿ç”¨ React.PureComponent å¯æé«˜æ€§èƒ½ã€‚</p>
<p>PureComponent ä¸ä»…ä¼šå½±å“æœ¬èº«ï¼Œè€Œä¸”ä¼šå½±å“å­ç»„ä»¶ï¼Œæ‰€ä»¥ PureComponent æœ€ä½³æƒ…å†µæ˜¯å±•ç¤ºç»„ä»¶</p>
<blockquote>
<p>ä¸è¦åœ¨ PureComponent ä¸­ä½¿ç”¨ shouldComponentUpdateï¼Œå› ä¸ºæ ¹æœ¬æ²¡æœ‰å¿…è¦ï¼Œä¹Ÿä¼šè§¦å‘è­¦å‘Š<code>Warning: ListOfWords has a method called shouldComponentUpdate(). shouldComponentUpdate should not be used when extending React.PureComponent. Please extend React.Component if shouldComponentUpdate is used.</code></p>
</blockquote>
<p>ç»§æ‰¿ PureComponent æ—¶ï¼Œè¿›è¡Œçš„æ˜¯æµ…æ¯”è¾ƒï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæ˜¯å¼•ç”¨ç±»å‹çš„æ•°æ®ï¼Œåªä¼šæ¯”è¾ƒæ˜¯ä¸æ˜¯åŒä¸€ä¸ªåœ°å€ï¼Œè€Œä¸ä¼šæ¯”è¾ƒå…·ä½“è¿™ä¸ªåœ°å€å­˜çš„æ•°æ®æ˜¯å¦å®Œå…¨ä¸€è‡´</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ— è®ºä½ æ€ä¹ˆç‚¹å‡»æŒ‰é’®ï¼ŒListOfWordsæ¸²æŸ“çš„ç»“æœå§‹ç»ˆæ²¡å˜åŒ–ï¼ŒåŸå› å°±æ˜¯WordAdderçš„wordçš„å¼•ç”¨åœ°å€å§‹ç»ˆæ˜¯åŒä¸€ä¸ªã€‚</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ListOfWords</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">PureComponent</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;this.props.words.join(',')&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WordAdder</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      words: [<span class="string">'marklar'</span>],</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">this</span>.handleClick = <span class="keyword">this</span>.handleClick.bind(<span class="keyword">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  handleClick() &#123;</span><br><span class="line">    <span class="comment">// This section is bad style and causes a bug</span></span><br><span class="line">    <span class="keyword">const</span> words = <span class="keyword">this</span>.state.words;</span><br><span class="line">    words.push(<span class="string">'marklar'</span>);</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123; <span class="attr">words</span>: words &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;button onClick=&#123;<span class="keyword">this</span>.handleClick&#125;&gt;click&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">        &lt;ListOfWords words=&#123;this.state.words&#125; /</span>&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-1-React-memo"><a href="#3-1-React-memo" class="headerlink" title="3.1 React.memo"></a>3.1 React.memo</h3><blockquote>
<p>React.memo ä¸ºé«˜é˜¶ç»„ä»¶ã€‚å®ƒä¸ React.PureComponent éå¸¸ç›¸ä¼¼ï¼Œä½†åªé€‚ç”¨äºå‡½æ•°ç»„ä»¶ï¼Œè€Œä¸é€‚ç”¨ class ç»„ä»¶ã€‚å®ƒå’Œ PureComponent åœ¨æ•°æ®å¯¹æ¯”ä¸Šå”¯ä¸€çš„åŒºåˆ«å°±åœ¨äº Ã—Ã— åªè¿›è¡Œäº† props çš„æµ…æ¯”è¾ƒ Ã—Ã—ã€‚</p>
</blockquote>
<p>å¦‚æœä½ çš„å‡½æ•°ç»„ä»¶åœ¨ç»™å®šç›¸åŒ props çš„æƒ…å†µä¸‹æ¸²æŸ“ç›¸åŒçš„ç»“æœï¼Œé‚£ä¹ˆä½ å¯ä»¥é€šè¿‡å°†å…¶åŒ…è£…åœ¨ React.memo ä¸­è°ƒç”¨ï¼Œä»¥æ­¤é€šè¿‡è®°å¿†ç»„ä»¶æ¸²æŸ“ç»“æœçš„æ–¹å¼æ¥æé«˜ç»„ä»¶çš„æ€§èƒ½è¡¨ç°ã€‚è¿™æ„å‘³ç€åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒReact å°†è·³è¿‡æ¸²æŸ“ç»„ä»¶çš„æ“ä½œå¹¶ç›´æ¥å¤ç”¨æœ€è¿‘ä¸€æ¬¡æ¸²æŸ“çš„ç»“æœã€‚</p>
<p>React.memo ä»…æ£€æŸ¥ props å˜æ›´ã€‚å¦‚æœå‡½æ•°ç»„ä»¶è¢« React.memo åŒ…è£¹ï¼Œä¸”å…¶å®ç°ä¸­æ‹¥æœ‰ useState æˆ– useContext çš„ Hookï¼Œå½“ context å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒä»ä¼šé‡æ–°æ¸²æŸ“ã€‚</p>
<p>é»˜è®¤æƒ…å†µä¸‹å…¶åªä¼šå¯¹å¤æ‚å¯¹è±¡åšæµ…å±‚å¯¹æ¯”ï¼Œå¦‚æœä½ æƒ³è¦æ§åˆ¶å¯¹æ¯”è¿‡ç¨‹ï¼Œé‚£ä¹ˆè¯·å°†è‡ªå®šä¹‰çš„æ¯”è¾ƒå‡½æ•°é€šè¿‡ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥æ¥å®ç°ã€‚</p>
<p>å¦‚ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyComponent</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="comment">/* ä½¿ç”¨ props æ¸²æŸ“ */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">areEqual</span>(<span class="params">prevProps, nextProps</span>) </span>&#123;</span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  å¦‚æœæŠŠ nextProps ä¼ å…¥ render æ–¹æ³•çš„è¿”å›ç»“æœä¸</span></span><br><span class="line"><span class="comment">  å°† prevProps ä¼ å…¥ render æ–¹æ³•çš„è¿”å›ç»“æœä¸€è‡´åˆ™è¿”å› trueï¼Œ</span></span><br><span class="line"><span class="comment">  å¦åˆ™è¿”å› false</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> React.memo(MyComponent, areEqual);</span><br></pre></td></tr></table></figure>
<h2 id="4-ç”Ÿå‘½å‘¨æœŸ"><a href="#4-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="4.ç”Ÿå‘½å‘¨æœŸ"></a>4.ç”Ÿå‘½å‘¨æœŸ</h2><p><img src="/images/react/p-lifecircle.png" alt="p-lifecircle.png"></p>
<h2 id="5-super"><a href="#5-super" class="headerlink" title="5.super()"></a>5.<code>super()</code></h2><h3 id="5-1-super-çš„ä½œç”¨"><a href="#5-1-super-çš„ä½œç”¨" class="headerlink" title="5.1 super()çš„ä½œç”¨"></a>5.1 <code>super()</code>çš„ä½œç”¨</h3><p>ES6 è¯­æ³•ä¸­ï¼Œsuper æŒ‡ä»£çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œåœ¨ä½ è°ƒç”¨ super() ä¹‹å‰ï¼Œä½ æ— æ³•åœ¨æ„é€ å‡½æ•°ä¸­ä½¿ç”¨ thisï¼ŒJS ä¸å…è®¸è¿™ä¹ˆåšã€‚</p>
<p>å¦‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name) &#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PolitePerson</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name) &#123;</span><br><span class="line">    <span class="keyword">this</span>.greetColleagues(); <span class="comment">//è¿™æ˜¯ä¸å…è®¸çš„</span></span><br><span class="line">    <span class="keyword">super</span>(name);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  greetColleagues() &#123;</span><br><span class="line">    alert(<span class="string">'Good morning folks!'</span>);</span><br><span class="line">    alert(<span class="string">'My name is '</span> + <span class="keyword">this</span>.name + <span class="string">', nice to meet you!'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœå…è®¸çš„è¯ï¼Œåœ¨ super() ä¹‹å‰æ‰§è¡Œäº†ä¸€ä¸ª greetColleagues å‡½æ•°ï¼ŒgreetColleagues å‡½æ•°é‡Œç”¨åˆ°äº† this.nameï¼Œè¿™æ—¶è¿˜æ²¡æ‰§è¡Œ  super(name)ï¼ŒgreetColleagues å‡½æ•°é‡Œå°±è·å–ä¸åˆ° super ä¼ å…¥çš„ name äº†ï¼Œæ­¤æ—¶çš„ this.name æ˜¯ undefinedã€‚</p>
<h3 id="5-2-super-é‡Œä¸ºä»€ä¹ˆè¦ä¼ -propsï¼Ÿ"><a href="#5-2-super-é‡Œä¸ºä»€ä¹ˆè¦ä¼ -propsï¼Ÿ" class="headerlink" title="5.2 super() é‡Œä¸ºä»€ä¹ˆè¦ä¼  propsï¼Ÿ"></a>5.2 super() é‡Œä¸ºä»€ä¹ˆè¦ä¼  propsï¼Ÿ</h3><p>æ‰§è¡Œ super(props) å¯ä»¥ä½¿åŸºç±» React.Component åˆå§‹åŒ– this.propsã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// React å†…éƒ¨</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">this</span>.props = props;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æœ‰æ—¶å€™æˆ‘ä»¬ä¸ä¼  propsï¼Œåªæ‰§è¡Œ super()ï¼Œæˆ–è€…æ²¡æœ‰è®¾ç½® constructor çš„æƒ…å†µä¸‹ï¼Œä¾ç„¶å¯ä»¥åœ¨ç»„ä»¶å†…ä½¿ç”¨ this.propsï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>å…¶å® React åœ¨ç»„ä»¶å®ä¾‹åŒ–çš„æ—¶å€™ï¼Œé©¬ä¸Šåˆç»™å®ä¾‹è®¾ç½®äº†ä¸€é propsï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// React å†…éƒ¨</span></span><br><span class="line"><span class="keyword">const</span> instance = <span class="keyword">new</span> YourComponent(props);</span><br><span class="line">instance.props = props;</span><br></pre></td></tr></table></figure>
<p>é‚£æ˜¯å¦æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åªå†™ super() è€Œä¸ç”¨ super(props) å‘¢ï¼Ÿ</p>
<p>ä¸æ˜¯çš„ã€‚è™½ç„¶ React ä¼šåœ¨ç»„ä»¶å®ä¾‹åŒ–çš„æ—¶å€™è®¾ç½®ä¸€é propsï¼Œä½†åœ¨ super è°ƒç”¨ä¸€ç›´åˆ°æ„é€ å‡½æ•°ç»“æŸä¹‹å‰ï¼Œthis.props ä¾ç„¶æ˜¯æœªå®šä¹‰çš„ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Button</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(); <span class="comment">// ğŸ˜¬ æˆ‘ä»¬å¿˜äº†ä¼ å…¥ props</span></span><br><span class="line">    <span class="built_in">console</span>.log(props); <span class="comment">// âœ… &#123;&#125;</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.props); <span class="comment">// ğŸ˜¬ undefined</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœè¿™æ—¶åœ¨æ„é€ å‡½æ•°ä¸­è°ƒç”¨äº†å‡½æ•°ï¼Œå‡½æ•°ä¸­æœ‰ this.props.xxx è¿™ç§å†™æ³•ï¼Œç›´æ¥å°±æŠ¥é”™äº†ã€‚</p>
<p>è€Œç”¨ super(props)ï¼Œåˆ™ä¸ä¼šæŠ¥é”™ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Button</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props); <span class="comment">// âœ… æˆ‘ä»¬ä¼ äº† props</span></span><br><span class="line">    <span class="built_in">console</span>.log(props); <span class="comment">// âœ… &#123;&#125;</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.props); <span class="comment">// âœ… &#123;&#125;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="6-å—æ§ç»„ä»¶å’Œéå—æ§ç»„ä»¶"><a href="#6-å—æ§ç»„ä»¶å’Œéå—æ§ç»„ä»¶" class="headerlink" title="6 å—æ§ç»„ä»¶å’Œéå—æ§ç»„ä»¶"></a>6 å—æ§ç»„ä»¶å’Œéå—æ§ç»„ä»¶</h2><h3 id="6-1-å—æ§ç»„ä»¶"><a href="#6-1-å—æ§ç»„ä»¶" class="headerlink" title="6.1 å—æ§ç»„ä»¶"></a>6.1 å—æ§ç»„ä»¶</h3><p>å—æ§ç»„ä»¶æ˜¯åœ¨ React ä¸­å¤„ç†è¾“å…¥è¡¨å•çš„ä¸€ç§æŠ€æœ¯ã€‚è¡¨å•å…ƒç´ é€šå¸¸ç»´æŠ¤å®ƒä»¬è‡ªå·±çš„çŠ¶æ€ï¼Œè€Œ react åˆ™åœ¨ç»„ä»¶çš„çŠ¶æ€å±æ€§ä¸­ç»´æŠ¤çŠ¶æ€ã€‚æˆ‘ä»¬å¯ä»¥å°†ä¸¤è€…ç»“åˆèµ·æ¥æ§åˆ¶è¾“å…¥è¡¨å•ï¼Œè¿™ç§°ä¸ºå—æ§ç»„ä»¶ã€‚å› æ­¤ï¼Œ<strong>åœ¨å—æ§ç»„ä»¶è¡¨å•ä¸­ï¼Œæ•°æ®ç”± React ç»„ä»¶å¤„ç†ã€‚</strong></p>
<p>å¦‚å½“ç”¨æˆ·åœ¨ todo é¡¹ä¸­è¾“å…¥åç§°æ—¶ï¼Œè°ƒç”¨ä¸€ä¸ª js å‡½æ•° handleChange æ•è·æ¯ä¸€ä¸ªè¾“å…¥çš„æ•°æ®å¹¶å°†å…¶æ”¾å…¥çŠ¶æ€</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// import ...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">ToDoForm</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      value: <span class="string">''</span>,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.handleChange = <span class="keyword">this</span>.handleChange.bind(<span class="keyword">this</span>);</span><br><span class="line">    <span class="keyword">this</span>.handleSubmit = <span class="keyword">this</span>.handleSubmit.bind(<span class="keyword">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleChange(event) &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">      value: event.target.value,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleSubmit() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.state.value);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;input type=<span class="string">"text"</span> onChange=&#123;<span class="keyword">this</span>.handleChange&#125; /&gt;</span><br><span class="line">        &lt;button onClick=&#123;<span class="keyword">this</span>.handleSubmit&#125;&gt;submit&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="6-2-éå—æ§ç»„ä»¶"><a href="#6-2-éå—æ§ç»„ä»¶" class="headerlink" title="6.2 éå—æ§ç»„ä»¶"></a>6.2 éå—æ§ç»„ä»¶</h3><p>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½å»ºè®®ä½¿ç”¨å—æ§ç»„ä»¶ï¼Œæœ‰ä¸€ç§ç§°ä¸ºéå—æ§ç»„ä»¶çš„æ–¹æ³•å¯ä»¥é€šè¿‡ä½¿ç”¨<code>Ref</code>æ¥å¤„ç†è¡¨å•æ•°æ®ã€‚åœ¨éå—æ§ç»„ä»¶ä¸­ï¼Œ<code>Ref</code>ç”¨äºç›´æ¥ä» DOM è®¿é—®è¡¨å•å€¼ï¼Œè€Œä¸æ˜¯äº‹ä»¶å¤„ç†ç¨‹åºã€‚</p>
<p>å¦‚ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>React.createRef()</code>å®šä¹‰<code>Ref</code>å¹¶ä¼ é€’è¯¥è¾“å…¥è¡¨å•å¹¶ç›´æ¥ä»<code>handleSubmit</code>æ–¹æ³•ä¸­çš„ DOM è®¿é—®è¡¨å•å€¼ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// import ...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">ToDoForm</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="keyword">this</span>.input = React.createRef();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.handleSubmit = <span class="keyword">this</span>.handleSubmit.bind(<span class="keyword">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleSubmit() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.input.current.value); <span class="comment">// ä¸€ä¸ªå¯¹èŠ‚ç‚¹çš„å¼•ç”¨å¯ä»¥é€šè¿‡refçš„currentå±æ€§å¾—åˆ°ï¼›</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;input type=<span class="string">"text"</span> ref=&#123;<span class="keyword">this</span>.input&#125; /&gt;</span><br><span class="line">        &lt;button onClick=&#123;<span class="keyword">this</span>.handleSubmit&#125;&gt;submit&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="7-å±•ç¤º-UI-ç»„ä»¶å’Œå®¹å™¨ç»„ä»¶"><a href="#7-å±•ç¤º-UI-ç»„ä»¶å’Œå®¹å™¨ç»„ä»¶" class="headerlink" title="7. å±•ç¤º(UI)ç»„ä»¶å’Œå®¹å™¨ç»„ä»¶"></a>7. å±•ç¤º(UI)ç»„ä»¶å’Œå®¹å™¨ç»„ä»¶</h2><blockquote>
<p>ä¸ºäº†è§£å†³ React åªæœ‰ V å±‚çš„è¿™ä¸ªé—®é¢˜ï¼Œæ›´å¥½åœ°åŒºåˆ†æˆ‘ä»¬çš„ä»£ç é€»è¾‘ï¼Œå±•ç¤ºç»„ä»¶ä¸å®¹å™¨ç»„ä»¶è¿™ä¸€å¯¹æ¦‚å¿µå°±è¢«å¼•å…¥äº†ã€‚</p>
</blockquote>
<table>
<thead>
<tr>
<th>è¯´æ˜/ç»„ä»¶</th>
<th>å±•ç¤ºç»„ä»¶</th>
<th>å®¹å™¨ç»„ä»¶</th>
</tr>
</thead>
<tbody>
<tr>
<td>ä½œç”¨</td>
<td>æè¿°å¦‚ä½•å±•ç°ï¼ˆéª¨æ¶ã€æ ·å¼ï¼‰</td>
<td>æè¿°å¦‚ä½•è¿è¡Œï¼ˆæ•°æ®è·å–ã€çŠ¶æ€æ›´æ–°ï¼‰</td>
</tr>
<tr>
<td>ç›´æ¥ä½¿ç”¨ store</td>
<td>å¦</td>
<td>æ˜¯</td>
</tr>
<tr>
<td>æ•°æ®æ¥æº</td>
<td>props</td>
<td>ç›‘å¬ store state</td>
</tr>
<tr>
<td>æ•°æ®ä¿®æ”¹</td>
<td>ä» props è°ƒç”¨å›è°ƒå‡½æ•°</td>
<td>å‘ store æ´¾å‘ actions</td>
</tr>
</tbody>
</table>
<h3 id="7-1-å±•ç¤ºç»„ä»¶ï¼ˆpersentational-componentsï¼‰"><a href="#7-1-å±•ç¤ºç»„ä»¶ï¼ˆpersentational-componentsï¼‰" class="headerlink" title="7.1 å±•ç¤ºç»„ä»¶ï¼ˆpersentational componentsï¼‰"></a>7.1 å±•ç¤ºç»„ä»¶ï¼ˆpersentational componentsï¼‰</h3><ul>
<li>è´Ÿè´£å±•ç¤º UIï¼Œä¹Ÿå°±æ˜¯ç»„ä»¶å¦‚ä½•æ¸²æŸ“ï¼Œå…·æœ‰å¾ˆå¼ºçš„å†…èšæ€§ã€‚</li>
<li>åªå…³å¿ƒå¾—åˆ°æ•°æ®å(props)å¦‚ä½•æ¸²æŸ“</li>
<li>*å¤§å¤šæ•°æƒ…å†µå¯ä»¥é€šè¿‡å‡½æ•°å®šä¹‰ç»„ä»¶å£°æ˜</li>
</ul>
<h3 id="7-2-å®¹å™¨ç»„ä»¶ï¼ˆcontainer-componentsï¼‰"><a href="#7-2-å®¹å™¨ç»„ä»¶ï¼ˆcontainer-componentsï¼‰" class="headerlink" title="7.2 å®¹å™¨ç»„ä»¶ï¼ˆcontainer componentsï¼‰"></a>7.2 å®¹å™¨ç»„ä»¶ï¼ˆcontainer componentsï¼‰</h3><ul>
<li>è´Ÿè´£åº”ç”¨é€»è¾‘å¤„ç†ï¼Œå¦‚<ul>
<li>æ‹¥æœ‰è‡ªèº«çš„ stateï¼Œå‘é€ç½‘ç»œè¯·æ±‚ï¼Œå¤„ç†è¿”å›æ•°æ®ï¼Œå°†å¤„ç†è¿‡çš„æ•°æ®ä¼ é€’ç»™å±•ç¤ºç»„ä»¶ï¼Œæˆ–ä¸ redux ç­‰å…¶ä»–æ•°æ®å¤„ç†æ¨¡å—åä½œ</li>
<li>ä¹Ÿæä¾›ä¿®æ”¹æ•°æ®æºçš„æ–¹æ³•ï¼Œé€šè¿‡å±•ç¤ºç»„ä»¶çš„ props ä¼ é€’ç»™å±•ç¤ºç»„ä»¶</li>
<li>å½“å±•ç¤ºç»„ä»¶çš„çŠ¶æ€å˜æ›´å¼•èµ·æºæ•°æ®å˜åŒ–æ—¶ï¼Œå±•ç¤ºç»„ä»¶é€šè¿‡è°ƒç”¨å®¹å™¨ç»„ä»¶æä¾›çš„æ–¹æ³•åŒæ­¥è¿™äº›å˜åŒ–</li>
</ul>
</li>
</ul>
<h3 id="7-3-ä¼˜ç‚¹å’Œæ³¨æ„äº‹é¡¹"><a href="#7-3-ä¼˜ç‚¹å’Œæ³¨æ„äº‹é¡¹" class="headerlink" title="7.3 ä¼˜ç‚¹å’Œæ³¨æ„äº‹é¡¹"></a>7.3 ä¼˜ç‚¹å’Œæ³¨æ„äº‹é¡¹</h3><p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>è§£è€¦äº†ç•Œé¢å’Œæ•°æ®çš„é€»è¾‘</li>
<li>æ›´å¥½çš„å¯å¤ç”¨æ€§ï¼Œæ¯”å¦‚åŒä¸€ä¸ªå›å¤åˆ—è¡¨å±•ç¤ºç»„ä»¶å¯ä»¥å¥—ç”¨ä¸åŒæ•°æ®æºçš„å®¹å™¨ç»„ä»¶<br>åˆ©äºå›¢é˜Ÿåä½œï¼Œä¸€ä¸ªäººè´Ÿè´£ç•Œé¢ç»“æ„ï¼Œä¸€ä¸ªäººè´Ÿè´£æ•°æ®äº¤äº’</li>
</ul>
<p>æ³¨æ„</p>
<ul>
<li>å±•ç¤ºç»„ä»¶å’Œå®¹å™¨ç»„ä»¶æ˜¯æ ¹æ®ç»„ä»¶çš„æ„å›¾åˆ’åˆ†ç»„ä»¶ï¼Œå±•ç¤ºç»„ä»¶é€šå¸¸é€šè¿‡æ— çŠ¶æ€ç»„ä»¶å®ç°ï¼Œå®¹å™¨ç»„ä»¶é€šè¿‡æœ‰çŠ¶æ€ç»„ä»¶å®ç°</li>
<li>æ— çŠ¶æ€å’Œæœ‰çŠ¶æ€ç»„ä»¶æ—¶æ ¹æ®ç»„ä»¶å†…éƒ¨æ˜¯å¦ä½¿ç”¨ state åˆ’åˆ†ç»„ä»¶</li>
</ul>
<h2 id="8-Fragments"><a href="#8-Fragments" class="headerlink" title="8.Fragments"></a>8.Fragments</h2><p>åœ¨ React ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æœ‰ä¸€ä¸ªçˆ¶å…ƒç´ ï¼ŒåŒæ—¶ä»ç»„ä»¶è¿”å› React å…ƒç´ ï¼Œæœ‰æ—¶åœ¨ DOM ä¸­æ·»åŠ é¢å¤–çš„èŠ‚ç‚¹ä¼šå¾ˆçƒ¦äººã€‚è¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨ Fragmentsï¼Œæˆ‘ä»¬ä¸éœ€è¦å† DOM ä¸­æ·»åŠ é¢å¤–çš„èŠ‚ç‚¹ï¼Œåªéœ€è¦ç”¨<code>React.Fragment</code>æˆ–ç›´æ¥ç®€å†™ä¸º<code>&lt;&gt;</code>æ¥åŒ…è£¹å†…å®¹å°±è¡Œã€‚</p>
<p>å¦‚ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// origin</span></span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;Component A /&gt;</span><br><span class="line">    &lt;Component B /&gt;</span><br><span class="line">    &lt;Component C /&gt;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">);</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ use fragments</span></span><br><span class="line"><span class="regexp">return (</span></span><br><span class="line"><span class="regexp">  &lt;React.Fragment&gt;</span></span><br><span class="line"><span class="regexp">    &lt;Component A /</span>&gt;</span><br><span class="line">    &lt;Component B /&gt;</span><br><span class="line">    &lt;Component C /&gt;</span><br><span class="line">  &lt;<span class="regexp">/React.Fragment&gt;</span></span><br><span class="line"><span class="regexp">);</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ or</span></span><br><span class="line"><span class="regexp">return (</span></span><br><span class="line"><span class="regexp">  &lt;&gt;</span></span><br><span class="line"><span class="regexp">    &lt;Component A /</span>&gt;</span><br><span class="line">    &lt;Component B /&gt;</span><br><span class="line">    &lt;Component C /&gt;</span><br><span class="line">  &lt;<span class="regexp">/&gt;</span></span><br><span class="line"><span class="regexp">);</span></span><br></pre></td></tr></table></figure>
<h3 id="å¦‚ä½•æ·»åŠ -key-å±æ€§"><a href="#å¦‚ä½•æ·»åŠ -key-å±æ€§" class="headerlink" title="å¦‚ä½•æ·»åŠ  key å±æ€§"></a>å¦‚ä½•æ·»åŠ  key å±æ€§</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line">list.map(<span class="function"><span class="params">item</span> =&gt;</span> (</span><br><span class="line">  &lt;React.Fragment key=&#123;item&#125;&gt;</span><br><span class="line">    &lt;Component A /&gt;</span><br><span class="line">    &lt;Component B /&gt;</span><br><span class="line">    &lt;Component C /&gt;</span><br><span class="line">  &lt;<span class="regexp">/React.Fragment&gt;</span></span><br><span class="line"><span class="regexp">));</span></span><br></pre></td></tr></table></figure>
<h2 id="9-ä¼ é€é—¨Portals"><a href="#9-ä¼ é€é—¨Portals" class="headerlink" title="9.ä¼ é€é—¨Portals"></a>9.ä¼ é€é—¨<a href="https://zh-hans.reactjs.org/docs/portals.html" target="_blank" rel="noopener">Portals</a></h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰å­ç»„ä»¶éƒ½åœ¨ UI ä¸Šå‘ˆç°ï¼Œå…·ä½“å–å†³äºç»„ä»¶å±‚æ¬¡ç»“æ„ã€‚Portal æä¾›äº†ä¸€ç§å°†å­èŠ‚ç‚¹æ¸²æŸ“åˆ°å­˜åœ¨äºçˆ¶ç»„ä»¶ä»¥å¤–çš„ DOM èŠ‚ç‚¹çš„ä¼˜ç§€çš„æ–¹æ¡ˆã€‚</p>
<p>å¦‚ï¼Œæœ‰ä¸ªçˆ¶ç»„ä»¶ parent åœ¨ DOM å±‚æ¬¡ç»“æ„ä¸­æœ‰å­ç»„ä»¶ childrenï¼Œæˆ‘ä»¬å¯ä»¥å°†å­ç»„ä»¶ children ç§»å‡º parent ç»„ä»¶å¹¶å°†å…¶é™„åŠ  id ä¸ºå…¶ä»–çš„ DOM èŠ‚ç‚¹ä¸‹ï¼Œå¦‚ id ä¸º someid çš„èŠ‚ç‚¹ã€‚<br>é¦–å…ˆï¼Œè·å– id ä¸º someidï¼Œæˆ‘ä»¬åœ¨ constructor ä¸­åˆ›å»ºä¸€ä¸ªå…ƒç´  divï¼Œå°† child é™„åŠ åˆ° componentDidMount ä¸­çš„ someRootã€‚<br>ç„¶åæˆ‘ä»¬åœ¨<code>React.createPortal(this.props.children, domnode)</code>æ–¹æ³•çš„å¸®åŠ©ä¸‹å°†å­èŠ‚ç‚¹ä¼ é€’ç»™è¯¥ç‰¹å®š DOM èŠ‚ç‚¹ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> someRoot = <span class="built_in">document</span>.querySelector(<span class="string">'#someid'</span>);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Modal</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="keyword">this</span>.el = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    someRoot.appendChild(<span class="keyword">this</span>.el);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentWillUnmount() &#123;</span><br><span class="line">    someRoot.removeChild(<span class="keyword">this</span>.el);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> ReactDOM.createPortal(<span class="keyword">this</span>.props.children, <span class="keyword">this</span>.el);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="10-React16-çš„å…¼å®¹"><a href="#10-React16-çš„å…¼å®¹" class="headerlink" title="10.React16 çš„å…¼å®¹"></a>10.React16 çš„å…¼å®¹</h2><p>React 16 ä¾èµ–é›†åˆç±»å‹ Map å’Œ Set ã€‚å¦‚æœä½ è¦æ”¯æŒæ— æ³•åŸç”Ÿæä¾›è¿™äº›èƒ½åŠ›ï¼ˆä¾‹å¦‚ IE &lt; 11ï¼‰æˆ–å®ç°ä¸è§„èŒƒï¼ˆä¾‹å¦‚ IE 11ï¼‰çš„æ—§æµè§ˆå™¨ä¸è®¾å¤‡ï¼Œè€ƒè™‘åœ¨ä½ çš„åº”ç”¨åº“ä¸­åŒ…å«ä¸€ä¸ªå…¨å±€çš„ polyfill ï¼Œä¾‹å¦‚ core-js æˆ– babel-polyfill ã€‚<br>å¦‚ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'core-js/es/map'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'core-js/es/set'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span>;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, world!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>, <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>));</span><br></pre></td></tr></table></figure>
<h2 id="11-æ‹†åˆ†ç»„ä»¶çš„åŸåˆ™"><a href="#11-æ‹†åˆ†ç»„ä»¶çš„åŸåˆ™" class="headerlink" title="11.æ‹†åˆ†ç»„ä»¶çš„åŸåˆ™"></a>11.æ‹†åˆ†ç»„ä»¶çš„åŸåˆ™</h2><p>æ»¡è¶³é«˜å†…èšï¼ˆHigh Cohesionï¼‰å’Œä½è€¦åˆï¼ˆLow Couplingï¼‰çš„åŸåˆ™ã€‚</p>
<ul>
<li>é«˜å†…èšï¼šæŠŠé€»è¾‘ç´§å¯†ç›¸å…³çš„å†…å®¹æ”¾åœ¨ä¸€ä¸ªç»„ä»¶ä¸­ã€‚å¦‚ jsx å°† js å’Œ html ç”šè‡³ css èšåˆåœ¨ä¸€èµ·ï¼Œå¤©ç”Ÿå…·æœ‰é«˜å†…èšçš„ç‰¹ç‚¹ï¼›</li>
<li>ä½è€¦åˆï¼šä¸åŒç»„ä»¶ä¹‹é—´çš„ä¾èµ–å…³ç³»è¦å°½é‡å¼±åŒ–ï¼Œæ¯ä¸ªç»„ä»¶è¦å°½é‡ç‹¬ç«‹ä»¥ä¿æŒæ•´ä¸ªç³»ç»Ÿçš„ä½è€¦åˆåº¦ã€‚</li>
</ul>
<h2 id="12-ç”Ÿå‘½å‘¨æœŸ"><a href="#12-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="12.ç”Ÿå‘½å‘¨æœŸ"></a>12.ç”Ÿå‘½å‘¨æœŸ</h2><h3 id="12-1-getInitialState-å’Œ-getDefaultProps"><a href="#12-1-getInitialState-å’Œ-getDefaultProps" class="headerlink" title="12.1 * getInitialState å’Œ getDefaultProps"></a>12.1 * getInitialState å’Œ getDefaultProps</h3><p>getInitialState()å‡½æ•°çš„è¿”å›å€¼ä¼šç”¨æ¥åˆå§‹åŒ–ç»„ä»¶çš„ this.stateï¼ŒgetDefaultProps()å‡½æ•°çš„è¿”å›å€¼å¯ä»¥ä½œä¸º props çš„åˆå§‹å€¼ã€‚è¿™ä¸¤ä¸ªå‡½æ•°åªåœ¨ React.createClass æ–¹æ³•åˆ›é€ çš„ç»„ä»¶ç±»æ‰ä¼šç”¨åˆ°ï¼ˆES6 å®šä¹‰çš„ React ç»„ä»¶ä¸­æ ¹æœ¬ç”¨ä¸åˆ°ï¼‰ã€‚</p>
<p>å¦‚ä»¥ä¸‹ä¸¤ä¸ªå®šä¹‰ç»“æœç›¸åŒ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// getInitialStateå’ŒgetDefaultProps</span></span><br><span class="line"><span class="keyword">const</span> Sample = React.createClass(&#123;</span><br><span class="line">  getInitialState: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      foo: <span class="string">'bar'</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  getDefaultProps: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      sampleProp: <span class="number">0</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// es6</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sample</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      foo: <span class="string">'bar'</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">Sample.defaultProps = &#123;</span><br><span class="line">  sampleProp: <span class="number">0</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>*å½“ç„¶ï¼ŒåŒ…æ‹¬å®˜æ–¹ä¹Ÿä¸æ¨èä½¿ç”¨ React.createClassï¼Œæ‰€ä»¥åŸºæœ¬ä¸ä¼šç”¨è¿™ä¸¤ä¸ªå‡½æ•°</p>
<h3 id="12-2-componentWillMount-å’Œ-componentDidMount"><a href="#12-2-componentWillMount-å’Œ-componentDidMount" class="headerlink" title="12.2 componentWillMount å’Œ componentDidMount"></a>12.2 componentWillMount å’Œ componentDidMount</h3><blockquote>
<p>componentWillMount å¯èƒ½å°†åœ¨ 17 ç‰ˆæœ¬ç§»é™¤ã€‚åŸå› æœ‰ä¸¤ç‚¹ï¼š1.æœåŠ¡ç«¯æ¸²æŸ“: åœ¨æœåŠ¡ç«¯æ¸²æŸ“çš„æƒ…æ™¯ä¸‹, componentWillMount æ‰§è¡Œå®Œç«‹é©¬æ‰§è¡Œ render ä¼šå¯¼è‡´ componentWillMount é‡Œé¢æ‰§è¡Œçš„æ–¹æ³•(è·å–æ•°æ®, è®¢é˜…äº‹ä»¶) å¹¶ä¸ä¸€å®šæ‰§è¡Œå®Œï¼›2.Concurrent Render: åœ¨ fiber æ¶æ„ä¸‹, render å‰çš„é’©å­ä¼šè¢«å¤šæ¬¡è°ƒç”¨, åœ¨ componentWillMount é‡Œæ‰§è¡Œè®¢é˜…äº‹ä»¶å°±ä¼šäº§ç”Ÿå†…å­˜æ³„æ¼ã€‚è¿™æ ·çš„è¯æˆ‘ä»¬éœ€è¦è¿ç§»æ€è·¯, å°†ä»¥å‰å†™åœ¨ componentWillMount çš„è·å–æ•°æ®ã€æ—¶é—´è®¢é˜…çš„æ–¹æ³•å†™è¿› componentDidMount ä¸­;</p>
</blockquote>
<p>ä¼—æ‰€å‘¨çŸ¥ï¼ŒcomponentWillMount ä¼šåœ¨è°ƒç”¨ render å‡½æ•°ä¹‹å‰è¢«è°ƒç”¨ï¼ŒcomponentDidMount ä¼šåœ¨è°ƒç”¨ render ä¹‹åè°ƒç”¨ã€‚</p>
<p>é€šå¸¸æˆ‘ä»¬ä¸ç”¨å®šä¹‰ componentWillMount å‡½æ•°ï¼Œè¿™ä¸ªæ—¶å€™æ²¡æœ‰ä»»ä½•æ¸²æŸ“å‡ºæ¥çš„ç»“æ„ï¼Œå³ä½¿è°ƒç”¨ this.setState ä¿®æ”¹çŠ¶æ€ä¹Ÿä¸ä¼šå¼•å‘é‡æ–°ç»˜åˆ¶ã€‚æ‰€æœ‰å¯ä»¥åœ¨ componentWillMount ä¸­åšçš„äº‹æƒ…éƒ½å¯ä»¥æå‰åˆ° constructor ä¸­é—´å»åšã€‚</p>
<p>render å‡½æ•°è¢«è°ƒç”¨å®Œä¹‹åï¼ŒcomponentDidMount å‡½æ•°å¹¶ä¸ä¼šè¢«ç«‹å³è°ƒç”¨ï¼ŒcomponentDidMount è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œrender å‡½æ•°è¿”å›çš„ä¸œè¥¿å·²ç»å¼•å‘äº†æ¸²æŸ“ï¼Œç»„ä»¶å·²ç»è¢«â€œè£…è½½â€åˆ°äº† DOM æ ‘ä¸Šã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œrender å‡½æ•°æœ¬èº«å¹¶ä¸å¾€ DOM æ ‘ä¸Šæ¸²æŸ“æˆ–è€…è£…è½½å†…å®¹ï¼Œå®ƒåªæ˜¯è¿”å›ä¸€ä¸ª JSX è¡¨ç¤ºçš„å¯¹è±¡ï¼Œç„¶åç”± React åº“æ¥æ ¹æ®è¿”å›å¯¹è±¡å†³å®šå¦‚ä½•æ¸²æŸ“ã€‚è€Œ React è‚¯å®šè¦æŠŠæ‰€æœ‰ç»„ä»¶è¿”å›çš„ç»“æœç»¼åˆèµ·æ¥ï¼Œæ‰èƒ½çŸ¥é“è¯¥å¦‚ä½•äº§ç”Ÿå¯¹åº”çš„ DOM ä¿®æ”¹ã€‚æ‰€ä»¥å¤šä¸ªç»„ä»¶æ¸²æŸ“çš„æƒ…å†µä¸‹ï¼ŒReact åªæœ‰è°ƒç”¨å¤šä¸ªç»„ä»¶çš„ render å‡½æ•°ä¹‹åæ‰ä¼šä¾æ¬¡è°ƒç”¨å„ä¸ªç»„ä»¶çš„ componentDidMount å‡½æ•°ä½œä¸ºè£…è½½è¿‡ç¨‹çš„æ”¶å°¾ã€‚è¿™ç‚¹ä¸ componentWillMount ä¸ä¸€æ ·ã€‚</p>
<p>componentWillMount å’Œ componentDidMount è¿™å¯¹å…„å¼ŸèŠ‚ç‚¹è¿˜æœ‰ä¸ªåŒºåˆ«ï¼šcomponentWillMount å¯ä»¥åœ¨æœåŠ¡ç«¯è¢«è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¢«è°ƒç”¨ï¼›è€Œ componentDidMount åªèƒ½åœ¨æµè§ˆå™¨ä¸­è¢«è°ƒç”¨ï¼ŒæœåŠ¡ç«¯ä¸ä¼šè¢«è°ƒç”¨ã€‚å› ä¸ºæœåŠ¡ç«¯æ¸²æŸ“å¹¶ä¸ä¼šäº§ç”Ÿ DOM æ ‘ï¼Œé€šè¿‡ React ç»„ä»¶äº§ç”Ÿçš„åªæ˜¯ä¸€ä¸ªçº¯ç²¹çš„å­—ç¬¦ä¸²è€Œå·²ã€‚ä¹Ÿå› å¦‚æ­¤ï¼ŒcomponentDidMount ç»™äº†å¼€å‘è€…ä¸€ä¸ªå¾ˆå¥½çš„ä½ç½®å»åšåªæœ‰æµè§ˆå™¨ç«¯æ‰èƒ½åšçš„é€»è¾‘ï¼Œæ¯”å¦‚è°ƒç”¨ ajaxã€‚</p>
<h3 id="12-3-componentWillReceiveProps-nextProps"><a href="#12-3-componentWillReceiveProps-nextProps" class="headerlink" title="12.3 componentWillReceiveProps(nextProps)"></a>12.3 componentWillReceiveProps(nextProps)</h3><p>æœ¬ä»¥ä¸ºè¿™ä¸ªå‡½æ•°åªæœ‰å½“ç»„ä»¶çš„ props å‘ç”Ÿæ”¹å˜æ—¶æ‰ä¼šè¢«è°ƒç”¨ï¼Œå…¶å®æ˜¯ä¸æ­£ç¡®çš„ã€‚åªè¦çˆ¶ç»„ä»¶çš„ render å‡½æ•°è¢«è°ƒç”¨ï¼Œåœ¨ render å‡½æ•°é‡Œé¢è¢«æ¸²æŸ“çš„å­ç»„ä»¶å°±ä¼šç»å†æ›´æ–°è¿‡ç¨‹ï¼Œä¸ç®¡çˆ¶ç»„ä»¶ä¼ ç»™å­ç»„ä»¶çš„ props æœ‰æ²¡æœ‰æ”¹å˜éƒ½ä¼šè§¦å‘è¯¥å‡½æ•°ã€‚</p>
<h3 id="12-4-shouldComponentUpdate"><a href="#12-4-shouldComponentUpdate" class="headerlink" title="12.4 shouldComponentUpdate"></a>12.4 shouldComponentUpdate</h3><p>render å’Œ shouldComponentUpdate æ˜¯ React ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­å”¯äºŒä¸¤ä¸ªè¦æ±‚æœ‰è¿”å›ç»“æœçš„å‡½æ•°ã€‚render å‡½æ•°çš„è¿”å›ç»“æœå°†ç”¨äºæ„é€  DOM å¯¹è±¡ï¼Œè€Œ shouldComponentUpdate å‡½æ•°è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œå‘Šè¯‰ React åº“è¿™ä¸ªç»„ä»¶åœ¨è¿™æ¬¡æ›´æ–°è¿‡ç¨‹ä¸­æ˜¯å¦è¦ç»§ç»­ï¼Œè¿™ä¸ªä½œç”¨å¯è§ä¸Šæ–‡ã€‚</p>
<h2 id="13-Hooks-16-7"><a href="#13-Hooks-16-7" class="headerlink" title="13 Hooks(16.7)"></a>13 Hooks(16.7)</h2><p>åœ¨ React 16.7 ä¹‹å‰, React æœ‰ä¸¤ç§å½¢å¼çš„ç»„ä»¶, æœ‰çŠ¶æ€ç»„ä»¶(ç±»)å’Œæ— çŠ¶æ€ç»„ä»¶(å‡½æ•°)ã€‚Hooks çš„æ„ä¹‰å°±æ˜¯èµ‹èƒ½å…ˆå‰çš„æ— çŠ¶æ€ç»„ä»¶, è®©ä¹‹å˜ä¸ºæœ‰çŠ¶æ€ã€‚è¿™æ ·ä¸€æ¥æ›´åŠ å¥‘åˆäº† React æ‰€æ¨å´‡çš„å‡½æ•°å¼ç¼–ç¨‹ï¼ŒReact å›¢é˜Ÿå¸Œæœ›ç»„ä»¶ä¸è¦å˜æˆå¤æ‚çš„å®¹å™¨ï¼Œæœ€å¥½åªæ˜¯æ•°æ®æµçš„ç®¡é“ï¼Œå¼€å‘è€…æ ¹æ®éœ€è¦ç»„åˆç®¡é“å³å¯ã€‚</p>
<h3 id="ç±»ç»„ä»¶çš„ç¼ºç‚¹"><a href="#ç±»ç»„ä»¶çš„ç¼ºç‚¹" class="headerlink" title="ç±»ç»„ä»¶çš„ç¼ºç‚¹"></a>ç±»ç»„ä»¶çš„ç¼ºç‚¹</h3><ul>
<li>æ˜æ˜¾çš„å°±æ˜¯ä»£ç ä¼šå¾ˆé‡ï¼Œç¼–ç¨‹æ¨¡å¼å¤æ‚</li>
<li>å¤§å‹ç»„ä»¶å¾ˆéš¾æ‹†åˆ†å’Œé‡æ„ï¼Œä¹Ÿå¾ˆéš¾æµ‹è¯•</li>
<li>ä¸šåŠ¡é€»è¾‘åˆ†æ•£åœ¨ç»„ä»¶çš„å„ä¸ªæ–¹æ³•ä¹‹ä¸­ï¼Œå¯¼è‡´é‡å¤é€»è¾‘æˆ–å…³è”é€»è¾‘</li>
</ul>
<h3 id="Hook-çš„å«ä¹‰"><a href="#Hook-çš„å«ä¹‰" class="headerlink" title="Hook çš„å«ä¹‰"></a>Hook çš„å«ä¹‰</h3><p>é’©å­ï¼ŒReact Hooks çš„æ„æ€æ˜¯ï¼Œç»„ä»¶å°½é‡å†™æˆçº¯å‡½æ•°ï¼Œå¦‚æœéœ€è¦å¤–éƒ¨åŠŸèƒ½å’Œå‰¯ä½œç”¨ï¼Œå°±ç”¨é’©å­æŠŠå¤–éƒ¨ä»£ç â€œé’©â€è¿›æ¥ã€‚</p>
<h4 id="é’©å­ä½¿ç”¨"><a href="#é’©å­ä½¿ç”¨" class="headerlink" title="é’©å­ä½¿ç”¨"></a>é’©å­ä½¿ç”¨</h4><p>React çº¦å®šé’©å­ä¸€å¾‹ä½¿ç”¨ use å‰ç¼€å‘½åï¼Œå³ä½ è¦ä½¿ç”¨ xxx åŠŸèƒ½ï¼Œé’©å­å°±å‘½åä¸º usexxxã€‚Hooks æ¶‰åŠåˆ°æœ€æ ¸å¿ƒçš„ 2 ä¸ª api, <code>useState</code>å’Œ<code>useEffect</code>ã€‚</p>
<h3 id="useStateï¼šçŠ¶æ€é’©å­ã€‚"><a href="#useStateï¼šçŠ¶æ€é’©å­ã€‚" class="headerlink" title="useStateï¼šçŠ¶æ€é’©å­ã€‚"></a>useStateï¼šçŠ¶æ€é’©å­ã€‚</h3><p>è¿”å›çŠ¶æ€å’Œä¸€ä¸ªæ›´æ–°çŠ¶æ€çš„å‡½æ•°ã€‚<br>å¦‚ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = useState(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;p&gt;You clicked &#123;count&#125; times&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">      &lt;button onClick=&#123;() =&gt; setCount(count + 1)&#125;&gt;Click me&lt;/</span>button&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<p>åŸç†ï¼šé—­åŒ…+å•å‘å¾ªç¯é“¾è¡¨ã€‚</p>
<h3 id="useEffect-fn-relyon-ï¼šå‰¯ä½œç”¨é’©å­ã€‚"><a href="#useEffect-fn-relyon-ï¼šå‰¯ä½œç”¨é’©å­ã€‚" class="headerlink" title="useEffect(fn, relyon)ï¼šå‰¯ä½œç”¨é’©å­ã€‚"></a>useEffect(fn, relyon)ï¼šå‰¯ä½œç”¨é’©å­ã€‚</h3><p>åœ¨æ¯æ¬¡ render åéƒ½ä¼šæ‰§è¡Œè¿™ä¸ªé’©å­ã€‚å¯ä»¥å°†å®ƒå½“æˆæ˜¯ componentDidMountã€componentDidUpdateã€componentWillUnmount çš„åˆé›†ã€‚å› æ­¤ä½¿ç”¨ useEffect æ¯”ä¹‹å‰ä¼˜è¶Šçš„åœ°æ–¹åœ¨äº: - å¯ä»¥é¿å…åœ¨ componentDidMountã€componentDidUpdate ä¹¦å†™é‡å¤çš„ä»£ç ; - å¯ä»¥å°†å…³è”é€»è¾‘å†™è¿›ä¸€ä¸ª useEffect(åœ¨ä»¥å‰å¾—å†™è¿›ä¸åŒç”Ÿå‘½å‘¨æœŸé‡Œ);</p>
<p>å¦‚ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [val, setVal] = useState(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(val);</span><br><span class="line">  &#125;, [val]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;&gt;</span>&#123;val&#125;<span class="tag">&lt;/&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="useLayoutEffect-fn-relyon"><a href="#useLayoutEffect-fn-relyon" class="headerlink" title="useLayoutEffect(fn, relyon)"></a>useLayoutEffect(fn, relyon)</h4><p>å…¶å‡½æ•°ç­¾åä¸ useEffect ç›¸åŒï¼Œä½†å®ƒä¼šåœ¨æ‰€æœ‰çš„ DOM å˜æ›´ä¹‹ååŒæ­¥è°ƒç”¨ effectã€‚å¯ä»¥ä½¿ç”¨å®ƒæ¥è¯»å– DOM å¸ƒå±€å¹¶åŒæ­¥è§¦å‘é‡æ¸²æŸ“ã€‚åœ¨æµè§ˆå™¨æ‰§è¡Œç»˜åˆ¶ä¹‹å‰ï¼ŒuseLayoutEffect å†…éƒ¨çš„æ›´æ–°è®¡åˆ’å°†è¢«åŒæ­¥åˆ·æ–°ã€‚</p>
<p>ç®€å•æ¥è¯´ useLayoutEffect ä¼šæ›´å¿«æ‰§è¡Œï¼Œå› æ­¤ä»…åœ¨æŸäº›ç‰¹æ®Šæƒ…å†µä¸‹ï¼ˆæ¯”å¦‚ DOM æ“ä½œï¼‰ç”¨ useLayoutEffectï¼Œ å…¶ä»–åƒå¼‚æ­¥è¯·æ±‚çš„ç”¨ useEffectã€‚</p>
<p>å¦‚ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  useLayoutEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">document</span>.title = <span class="string">`You clicked <span class="subst">$&#123;count&#125;</span> times`</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">document</span>.title += <span class="string">'!!!'</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;, []);</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;&gt;</span>hello<span class="tag">&lt;/&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="useRef"><a href="#useRef" class="headerlink" title="useRef"></a>useRef</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> refContainer = useRef(initialValue);</span><br></pre></td></tr></table></figure>
<p>useRef è¿”å›ä¸€ä¸ªå¯å˜çš„ ref å¯¹è±¡ï¼Œå…¶ .current å±æ€§è¢«åˆå§‹åŒ–ä¸ºä¼ å…¥çš„å‚æ•°ï¼ˆinitialValueï¼‰ã€‚<strong>è¿”å›çš„ ref å¯¹è±¡åœ¨ç»„ä»¶çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…ä¿æŒä¸å˜</strong>ã€‚</p>
<p>æœ¬è´¨ä¸Šï¼ŒuseRef å°±åƒæ˜¯å¯ä»¥åœ¨å…¶ .current å±æ€§ä¸­ä¿å­˜ä¸€ä¸ªå¯å˜å€¼çš„â€œç›’å­â€ã€‚</p>
<h4 id="ä¿å­˜-DOM"><a href="#ä¿å­˜-DOM" class="headerlink" title="ä¿å­˜ DOM"></a>ä¿å­˜ DOM</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> divRef = useRef(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    handleDiv(divRef.current); <span class="comment">// div</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ref</span>=<span class="string">&#123;divRef&#125;</span>&gt;</span> ... <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ä¿å­˜äº‹ä»¶ç¨‹åº"><a href="#ä¿å­˜äº‹ä»¶ç¨‹åº" class="headerlink" title="ä¿å­˜äº‹ä»¶ç¨‹åº"></a>ä¿å­˜äº‹ä»¶ç¨‹åº</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> eventRef = useRef(<span class="literal">null</span>);</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">handleClick</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    eventRef.current = setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> handleEvent(<span class="number">1</span>), <span class="number">2000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">handleClear</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    clearTimeout(eventRef.current);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &lt;button onClick=&#123;handleClick&#125;&gt;start&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">      &lt;button onClick=&#123;handleClear&#125;&gt;clear&lt;/</span>button&gt;</span><br><span class="line">    &lt;<span class="regexp">/&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<h4 id="å­˜å‚¨ä»¥å‰çš„å€¼"><a href="#å­˜å‚¨ä»¥å‰çš„å€¼" class="headerlink" title="å­˜å‚¨ä»¥å‰çš„å€¼"></a>å­˜å‚¨ä»¥å‰çš„å€¼</h4><p>useState()/useEffect()ç»å¸¸é‡åˆ°å› é—­åŒ…å¯¼è‡´çš„å–å€¼é—®é¢˜ï¼Œè¿™æ—¶å€™å°±éœ€è¦é€šè¿‡ useRef()æ¥è§£å†³ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> t = useRef(<span class="literal">null</span>);</span><br><span class="line">  <span class="keyword">const</span> [name, setName] = useState(<span class="string">'ajanuw'</span>);</span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    t.current = name;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">const</span> prevName = t.current;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;input value=&#123;name&#125; onChange=&#123;e =&gt; setName(e.target.value)&#125; /&gt;</span><br><span class="line">      &lt;h2&gt;&#123;name&#125;&lt;<span class="regexp">/h2&gt;</span></span><br><span class="line"><span class="regexp">      &lt;p&gt;&#123;prevName&#125;&lt;/</span>p&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<h4 id="useImperativeHandle-ref-createHandle-deps"><a href="#useImperativeHandle-ref-createHandle-deps" class="headerlink" title="useImperativeHandle(ref, createHandle, [deps])"></a>useImperativeHandle(ref, createHandle, [deps])</h4><p>useImperativeHandle å¯ä»¥è®©ä½ åœ¨ä½¿ç”¨ ref æ—¶è‡ªå®šä¹‰æš´éœ²ç»™çˆ¶ç»„ä»¶çš„å®ä¾‹å€¼ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåº”å½“é¿å…ä½¿ç”¨ ref è¿™æ ·çš„å‘½ä»¤å¼ä»£ç ã€‚useImperativeHandle åº”å½“ä¸ forwardRef ä¸€èµ·ä½¿ç”¨ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FancyInput</span>(<span class="params">props, ref</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> inputRef = useRef();</span><br><span class="line">  useImperativeHandle(ref, () =&gt; (&#123;</span><br><span class="line">    focus: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      inputRef.current.focus();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;));</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">&#123;inputRef&#125;</span> <span class="attr">...</span> /&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line">FancyInput = forwardRef(FancyInput);</span><br></pre></td></tr></table></figure>
<h3 id="useCallback"><a href="#useCallback" class="headerlink" title="useCallback()"></a>useCallback()</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> memoizedCallback = useCallback(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  doSomething(a, b);</span><br><span class="line">&#125;, [a, b]);</span><br></pre></td></tr></table></figure>
<p>è¿”å›ä¸€ä¸ª memoized å›è°ƒ<strong>å‡½æ•°</strong>ã€‚</p>
<p>æŠŠå†…è”å›è°ƒå‡½æ•°åŠä¾èµ–é¡¹æ•°ç»„ä½œä¸ºå‚æ•°ä¼ å…¥ useCallbackï¼Œå®ƒå°†è¿”å›è¯¥å›è°ƒå‡½æ•°çš„ memoized ç‰ˆæœ¬ï¼Œè¯¥å›è°ƒå‡½æ•°ä»…åœ¨æŸä¸ªä¾èµ–é¡¹æ”¹å˜æ—¶æ‰ä¼šæ›´æ–°ã€‚å½“ä½ æŠŠå›è°ƒå‡½æ•°ä¼ é€’ç»™ç»è¿‡ä¼˜åŒ–çš„å¹¶ä½¿ç”¨å¼•ç”¨ç›¸ç­‰æ€§å»é¿å…éå¿…è¦æ¸²æŸ“ï¼ˆä¾‹å¦‚ shouldComponentUpdateï¼‰çš„å­ç»„ä»¶æ—¶ï¼Œå®ƒå°†éå¸¸æœ‰ç”¨ã€‚</p>
<p><code>useCallback(fn, deps)</code> ç›¸å½“äº <code>useMemo(() =&gt; fn, deps)</code>ã€‚</p>
<h4 id="useMemo"><a href="#useMemo" class="headerlink" title="useMemo()"></a>useMemo()</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> memoizedValue = useMemo(<span class="function"><span class="params">()</span> =&gt;</span> computeExpensiveValue(a, b), [a, b]);</span><br></pre></td></tr></table></figure>
<p>è¿”å›ä¸€ä¸ª memoized <strong>å€¼</strong>ã€‚</p>
<p>æŠŠâ€œåˆ›å»ºâ€å‡½æ•°å’Œä¾èµ–é¡¹æ•°ç»„ä½œä¸ºå‚æ•°ä¼ å…¥ useMemoï¼Œå®ƒä»…ä¼šåœ¨æŸä¸ªä¾èµ–é¡¹æ”¹å˜æ—¶æ‰é‡æ–°è®¡ç®— memoized å€¼ã€‚è¿™ç§ä¼˜åŒ–æœ‰åŠ©äºé¿å…åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½è¿›è¡Œé«˜å¼€é”€çš„è®¡ç®—ã€‚</p>
<p>è®°ä½ï¼Œä¼ å…¥ useMemo çš„å‡½æ•°ä¼šåœ¨æ¸²æŸ“æœŸé—´æ‰§è¡Œã€‚è¯·ä¸è¦åœ¨è¿™ä¸ªå‡½æ•°å†…éƒ¨æ‰§è¡Œä¸æ¸²æŸ“æ— å…³çš„æ“ä½œï¼Œè¯¸å¦‚å‰¯ä½œç”¨è¿™ç±»çš„æ“ä½œå±äº useEffect çš„é€‚ç”¨èŒƒç•´ï¼Œè€Œä¸æ˜¯ useMemoã€‚</p>
<p>å¦‚æœæ²¡æœ‰æä¾›ä¾èµ–é¡¹æ•°ç»„ï¼ŒuseMemo åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½ä¼šè®¡ç®—æ–°çš„å€¼ã€‚</p>
<p>ä½ å¯ä»¥æŠŠ useMemo ä½œä¸ºæ€§èƒ½ä¼˜åŒ–çš„æ‰‹æ®µï¼Œä½†ä¸è¦æŠŠå®ƒå½“æˆè¯­ä¹‰ä¸Šçš„ä¿è¯ã€‚å°†æ¥ï¼ŒReact å¯èƒ½ä¼šé€‰æ‹©â€œé—å¿˜â€ä»¥å‰çš„ä¸€äº› memoized å€¼ï¼Œå¹¶åœ¨ä¸‹æ¬¡æ¸²æŸ“æ—¶é‡æ–°è®¡ç®—å®ƒä»¬ï¼Œæ¯”å¦‚ä¸ºç¦»å±ç»„ä»¶é‡Šæ”¾å†…å­˜ã€‚å…ˆç¼–å†™åœ¨æ²¡æœ‰ useMemo çš„æƒ…å†µä¸‹ä¹Ÿå¯ä»¥æ‰§è¡Œçš„ä»£ç  â€”â€” ä¹‹åå†åœ¨ä½ çš„ä»£ç ä¸­æ·»åŠ  useMemoï¼Œä»¥è¾¾åˆ°ä¼˜åŒ–æ€§èƒ½çš„ç›®çš„ã€‚</p>
<p>é™¤æ­¤ä¹‹å¤–è¿˜æœ‰ä¸¤ä¸ªä¸å¸¸ç”¨çš„é’©å­ï¼š</p>
<ul>
<li><strong>useContextï¼šå…±äº«çŠ¶æ€é’©å­</strong>ã€‚åœ¨ç»„ä»¶ä¹‹é—´å…±äº«çŠ¶æ€æ—¶ä½¿ç”¨ã€‚</li>
<li><strong>useReducerï¼šaction é’©å­</strong>ã€‚Redux ç­‰æ•°æ® actionã€‚</li>
</ul>
<h3 id="hooks-çš„ä¼˜ç¼ºç‚¹"><a href="#hooks-çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="hooks çš„ä¼˜ç¼ºç‚¹"></a>hooks çš„ä¼˜ç¼ºç‚¹</h3><p>çŸ¥ä¹â€”â€”<a href="https://zhuanlan.zhihu.com/p/88593858" target="_blank" rel="noopener">ã€Šè°ˆè°ˆ react hooks çš„ä¼˜ç¼ºç‚¹ã€‹</a></p>
<h4 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h4><ul>
<li>1.<strong>æ›´å®¹æ˜“å¤ç”¨ä»£ç </strong>ï¼šå¯ä»¥é€šè¿‡è‡ªå®šä¹‰ hooks æ¥å¤ç”¨çŠ¶æ€ï¼Œä»è€Œè§£å†³äº†ç±»ç»„ä»¶æœ‰æ—¶å€™éš¾ä»¥å¤ç”¨é€»è¾‘çš„é—®é¢˜</li>
<li>2.<strong>æ¸…çˆ½çš„ä»£ç é£æ ¼</strong>ï¼šå‡½æ•°å¼ç¼–ç¨‹é£æ ¼ï¼Œå‡½æ•°å¼ç»„ä»¶ã€çŠ¶æ€ä¿å­˜åœ¨è¿è¡Œç¯å¢ƒã€æ¯ä¸ªåŠŸèƒ½éƒ½åŒ…è£¹åœ¨å‡½æ•°ä¸­ï¼Œæ•´ä½“é£æ ¼æ›´æ¸…çˆ½ä¼˜é›…ã€‚</li>
<li>3.<strong>ä»£ç é‡æ›´å°‘</strong>ï¼šä¸åƒ class ç»„ä»¶éœ€è¦é€šè¿‡ thisï¼Œprops æ›´ç®€æ´ã€‚</li>
</ul>
<h4 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h4><ul>
<li>1.<strong>çŠ¶æ€ä¸åŒæ­¥</strong>ï¼šå‡½æ•°ç‹¬ç«‹è¿è¡Œå¯¼è‡´çš„ç‹¬ç«‹ä½œç”¨åŸŸï¼Œå‡½æ•°çš„å˜é‡ä¹Ÿæ˜¯ä¿å­˜åœ¨è¿è¡Œæ—¶çš„ä½œç”¨åŸŸé‡Œé¢ï¼Œå½“æˆ‘ä»¬æœ‰å¼‚æ­¥æ“ä½œçš„æ—¶å€™ï¼Œç»å¸¸ä¼šç¢°åˆ°å¼‚æ­¥å›è°ƒçš„å˜é‡å¼•ç”¨æ˜¯ä¹‹å‰çš„ï¼›å¦‚ï¼š</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">const</span> Counter = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = useState(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">const</span> onAlertButtonClick = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      alert(<span class="string">'count: '</span> + count);</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &lt;p&gt;&#123;count&#125;&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">      &lt;p&gt;</span></span><br><span class="line"><span class="regexp">        &lt;button onClick=&#123;onAlertButtonClick&#125;&gt;click&lt;/</span>button&gt;</span><br><span class="line">      &lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li>2.<strong>å“åº”å¼çš„ useEffect</strong>ï¼šæ”¹å˜å†™æ³•ä¹ æƒ¯ï¼Œéœ€è¦æŒæ¡ useEffect çš„è§¦å‘æ—¶æœºï¼Œå¯¹æ¯” componentDidmount å’Œ componentDidUpdateï¼ŒuseEffect å¸¦æ¥çš„å¿ƒæ™ºè´Ÿæ‹…æ›´å¤§ï¼›</li>
</ul>
<h4 id="é¿å…å¸¸è§é—®é¢˜"><a href="#é¿å…å¸¸è§é—®é¢˜" class="headerlink" title="é¿å…å¸¸è§é—®é¢˜"></a>é¿å…å¸¸è§é—®é¢˜</h4><ul>
<li>1.ä¸è¦å† useEffect é‡Œå†™å¤ªå¤šä¾èµ–é¡¹ï¼Œåˆ’åˆ†è¿™äº›ä¾èµ–é¡¹æˆå¤šä¸ªå•ä¸€åŠŸèƒ½çš„ useEffectï¼Œâ€œå•ä¸€èŒè´£æ¨¡å¼â€ï¼›</li>
<li>2.æ³¨æ„é—­åŒ…å’Œä½œç”¨åŸŸå¯èƒ½å­˜åœ¨çš„é£é™©ã€‚å¦‚é‡åˆ°çŠ¶æ€ä¸åŒæ­¥çš„é—®é¢˜ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ useRef æˆ–æ‰‹åŠ¨ä¼ é€’å‚æ•°åˆ°å‡½æ•°ã€‚å¦‚</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// showCountçš„countå€¼æ¥è‡ªçˆ¶çº§ä½œç”¨åŸŸ</span></span><br><span class="line"><span class="keyword">const</span> [count, setCount] = useState(xxx);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showCount</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(count);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// showCountçš„countæ¥è‡ªå‚æ•°</span></span><br><span class="line"><span class="keyword">const</span> [count, setCount] = useState(xxx);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showCount</span>(<span class="params">c</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(c);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>3.ä½¿ç”¨<a href="https://www.npmjs.com/package/eslint-plugin-react-hooks" target="_blank" rel="noopener">eslint-plugin-react-hooks</a>å¹¶é‡è§†å…¶è­¦å‘Šï¼›</li>
<li>4.å¤æ‚ä¸šåŠ¡ç”¨ Component ä»£æ›¿ hooksã€‚</li>
</ul>
<h2 id="14-å•å…ƒæµ‹è¯•"><a href="#14-å•å…ƒæµ‹è¯•" class="headerlink" title="14 å•å…ƒæµ‹è¯•"></a>14 å•å…ƒæµ‹è¯•</h2><p>å•æµ‹å¼•å¯¼ï¼š<a href="https://testing-library.com/docs/dom-testing-library/intro" target="_blank" rel="noopener">testing-library&gt;&gt;</a></p>
<h3 id="æµ‹è¯•åŸåˆ™"><a href="#æµ‹è¯•åŸåˆ™" class="headerlink" title="æµ‹è¯•åŸåˆ™"></a>æµ‹è¯•åŸåˆ™</h3><table>
<thead>
<tr>
<th>æ¶æ„å±‚çº§</th>
<th>æµ‹è¯•å†…å®¹</th>
<th>æµ‹è¯•ç­–ç•¥</th>
<th>è§£é‡Š</th>
</tr>
</thead>
<tbody>
<tr>
<td>action(creator)å±‚</td>
<td>æ˜¯å¦æ­£ç¡®åˆ›å»º action å¯¹è±¡</td>
<td>ä¸€èˆ¬ä¸éœ€è¦æµ‹è¯•ï¼Œè§†ä¿¡å¿ƒè€Œå®š</td>
<td>è¿™ä¸ªå±‚çº§æ¶æ„ä¸Šéå¸¸ç®€å•ï¼Œè®¾æ–½æ­å¥½åä¸€èˆ¬ä¸ä¼šå‡ºé”™</td>
</tr>
<tr>
<td>reducer å±‚</td>
<td>æ˜¯å¦æ­£ç¡®å®Œæˆè®¡ç®—</td>
<td>æœ‰é€»è¾‘çš„ reducerï¼Œè¦æ±‚ 100%è¦†ç›–ç‡</td>
<td>è¿™ä¸ªå±‚çº§è¾“å…¥è¾“å‡ºæ˜ç¡®ï¼ŒåˆåŒ…å«ä¸šåŠ¡è®¡ç®—ï¼Œéå¸¸é€‚åˆå•å…ƒæµ‹è¯•</td>
</tr>
<tr>
<td>selector å±‚</td>
<td>æ˜¯å¦æ­£ç¡®å®Œæˆè®¡ç®—</td>
<td>æœ‰é€»è¾‘çš„ selectorï¼Œè¦æ±‚ 100%è¦†ç›–ç‡</td>
<td>è¿™ä¸ªå±‚çº§è¾“å…¥è¾“å‡ºæ˜ç¡®ï¼ŒåˆåŒ…å«ä¸šåŠ¡è®¡ç®—ï¼Œéå¸¸é€‚åˆå•å…ƒæµ‹è¯•</td>
</tr>
<tr>
<td>saga å±‚</td>
<td>æ˜¯å¦è·å–äº†æ­£ç¡®çš„å‚æ•°</td>
<td>è¿™ 5 ä¸ªä¸šåŠ¡ç‚¹å»ºè®® 100%è¦†ç›–</td>
<td>è¿™ä¸ªå±‚çº§ä¸»è¦åŒ…å«å‰è¿° 5 å¤§æ–¹é¢çš„ä¸šåŠ¡é€»è¾‘ï¼Œè¿›è¡Œæµ‹è¯•å¾ˆæœ‰é‡æ„ä»·å€¼</td>
</tr>
<tr>
<td>â€“</td>
<td>æ˜¯å¦æ­£ç¡®åœ°è°ƒç”¨äº† API</td>
<td></td>
</tr>
<tr>
<td>â€“</td>
<td>æ˜¯å¦ä½¿ç”¨äº†æ­£ç¡®çš„è¿”å›å€¼å­˜å–å› redux ä¸­</td>
<td></td>
</tr>
<tr>
<td>â€“</td>
<td>ä¸šåŠ¡åˆ†æ”¯é€»è¾‘</td>
<td></td>
</tr>
<tr>
<td>â€“</td>
<td>å¼‚å¸¸é€»è¾‘</td>
<td></td>
</tr>
<tr>
<td>component å±‚</td>
<td>ç»„ä»¶åˆ†æ”¯æ¸²æŸ“é€»è¾‘</td>
<td>è¦æ±‚ 100%è¦†ç›–ç‡</td>
<td>è¿™ä¸ªå±‚çº§æœ€ä¸ºå¤æ‚ï¼Œä»¥â€œä»£ä»·æœ€ä½ï¼Œæ”¶ç›Šæœ€é«˜â€çš„æŒ‡å¯¼åŸåˆ™è¿›è¡Œ</td>
</tr>
<tr>
<td>â€“</td>
<td>äº¤äº’äº‹ä»¶æ˜¯å¦ä»¥æ­£ç¡®çš„å‚æ•°è¢«è°ƒç”¨</td>
<td>è¦æ±‚ 100%è¦†ç›–ç‡</td>
</tr>
<tr>
<td>â€“</td>
<td>redux connect è¿‡çš„ç»„ä»¶</td>
<td>ä¸ç”¨æµ‹</td>
</tr>
<tr>
<td>UI å±‚</td>
<td>ç»„ä»¶æ˜¯å¦æ¸²æŸ“äº†æ­£ç¡®çš„æ ·å¼</td>
<td>å¯ä»¥ä¸æµ‹æˆ–å¿«ç…§</td>
<td>è¿™ä¸ªå±‚çº§æµ‹è¯•æˆæœ¬è¾ƒé«˜ã€éš¾åº¦è¾ƒå¤§</td>
</tr>
<tr>
<td>utils å±‚</td>
<td>å„ç§å¸®åŠ©å‡½æ•°</td>
<td>æ²¡æœ‰å‰¯ä½œç”¨çš„å¿…é¡» 100%è¦†ç›–ç‡</td>
</tr>
</tbody>
</table>
<h3 id="action-æµ‹è¯•"><a href="#action-æµ‹è¯•" class="headerlink" title="action æµ‹è¯•"></a>action æµ‹è¯•</h3><p>è¿™ä¸€å±‚è·ç›Šäºæ¶æ„çš„ç®€å•æ€§ï¼Œç”šè‡³éƒ½å¯ä»¥ä¸ç”¨æµ‹è¯•ã€‚å½“ç„¶ï¼Œå¦‚æœæœ‰äº›ç»å¸¸å‡ºé”™çš„ actionï¼Œå¯ä»¥é’ˆå¯¹æ€§åœ°å¯¹è¿™äº› action creator è¡¥å……æµ‹è¯•ã€‚å…¶æµ‹è¯•æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// demo action</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> saveUserComments = <span class="function"><span class="params">comments</span> =&gt;</span> (&#123;</span><br><span class="line">  type: <span class="string">'saveUserComments'</span>,</span><br><span class="line">  payload: &#123;</span><br><span class="line">    comments,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// demo use action</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> actions <span class="keyword">from</span> <span class="string">'./actions'</span>;</span><br><span class="line"></span><br><span class="line">test(<span class="string">'should dispatch saveUserComments action with fetched user comments'</span>, () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> comments = [];</span><br><span class="line">  <span class="keyword">const</span> expected = &#123;</span><br><span class="line">    type: <span class="string">'saveUserComments'</span>,</span><br><span class="line">    payload: &#123;</span><br><span class="line">      comments: [],</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">const</span> result = actions.saveUserComments(comments);</span><br><span class="line">  expect(result).toEqual(expected);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="reducer-æµ‹è¯•"><a href="#reducer-æµ‹è¯•" class="headerlink" title="reducer æµ‹è¯•"></a>reducer æµ‹è¯•</h3><p>reducer å¤§æ¦‚æœ‰ä¸¤ç§ï¼š</p>
<ul>
<li>ä¸€ç§æ¯”è¾ƒç®€å•ï¼Œä»…ä¸€ä¸€ä¿å­˜å¯¹åº”çš„æ•°æ®åˆ‡ç‰‡ï¼›</li>
<li>ä¸€ç§å¤æ‚ä¸€äº›ï¼Œé‡Œé¢å…·æœ‰ä¸€äº›è®¡ç®—é€»è¾‘ã€‚<br>å¯¹äºç¬¬ä¸€ç§ reducerï¼Œå†™èµ·æ¥éå¸¸ç®€å•ï¼Œç®€å•åˆ°ç”šè‡³å¯ä»¥ä¸éœ€è¦ç”¨æµ‹è¯•å»è¦†ç›–ï¼Œå…¶æ­£ç¡®æ€§åŸºæœ¬ç”±ç®€å•çš„æ¶æ„å’Œé€»è¾‘å»ä¿è¯ã€‚ä¸‹é¢æ˜¯å¯¹ä¸€ä¸ªç®€å• reducer åšæµ‹è¯•çš„ä¾‹å­ï¼š</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// demo reducer</span></span><br><span class="line"><span class="keyword">import</span> Immutable <span class="keyword">from</span> <span class="string">'seamless-immutable'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> initialState = Immutable.from(&#123;</span><br><span class="line">  isLoadingProducts: <span class="literal">false</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> createReducer(<span class="function"><span class="params">on</span> =&gt;</span> &#123;</span><br><span class="line">  on(actions.isLoadingProducts, (state, action) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> state.merge(&#123;</span><br><span class="line">      isLoadingProducts: action.payload.isLoadingProducts,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;, initialState);</span><br><span class="line"></span><br><span class="line"><span class="comment">// demo use reducer</span></span><br><span class="line"><span class="keyword">import</span> reducers <span class="keyword">from</span> <span class="string">'./reducers'</span>;</span><br><span class="line"><span class="keyword">import</span> actions <span class="keyword">from</span> <span class="string">'./actions'</span>;</span><br><span class="line"></span><br><span class="line">test(<span class="string">'should save loading start indicator when action isLoadingProducts is dispatched given isLoadingProducts is true'</span>, () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> state = &#123; <span class="attr">isLoadingProducts</span>: <span class="literal">false</span> &#125;;</span><br><span class="line">  <span class="keyword">const</span> expected = &#123; <span class="attr">isLoadingProducts</span>: <span class="literal">true</span> &#125;;</span><br><span class="line">  <span class="keyword">const</span> result = reducers(state, actions.isLoadingProducts(<span class="literal">true</span>));</span><br><span class="line"></span><br><span class="line">  expect(result).toEqual(expected);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>reducer ä½œä¸ºçº¯å‡½æ•°ï¼Œéå¸¸é€‚åˆåšå•å…ƒæµ‹è¯•ï¼ŒåŠ ä¹‹ä¸€èˆ¬åœ¨ reducer ä¸­åšé‡é€»è¾‘å¤„ç†ï¼Œæ­¤å¤„åšå•å…ƒæµ‹è¯•ä¿æŠ¤çš„ä»·å€¼å¾ˆå¤§ã€‚è¯·ç•™æ„ï¼Œä¸Šé¢æ‰€è¯´çš„å•å…ƒæµ‹è¯•ï¼Œæ˜¯ä¸æ˜¯ç¬¦åˆæˆ‘ä»¬æè¿°çš„å•å…ƒæµ‹è¯•åŸºæœ¬åŸåˆ™ï¼š</p>
<ul>
<li>åªå…³æ³¨è¾“å…¥è¾“å‡ºï¼Œä¸å…³æ³¨å†…éƒ¨å®ç°ï¼šåœ¨è¾“å…¥ä¸å˜æ—¶ï¼Œä»…å¯èƒ½å› ä¸ºâ€œåˆå¹¶å»é‡â€çš„ä¸šåŠ¡æ“ä½œä¸ç¬¦é¢„æœŸæ—¶æ‰ä¼šæŒ‚æµ‹è¯•</li>
<li>è¡¨è¾¾åŠ›æå¼ºï¼šæµ‹è¯•æè¿°å·²ç»å†™å¾—æ¸…æ¥šâ€œå½“ä½¿ç”¨æ–°è·å–åˆ°çš„ç•™è¨€æ•°æ®åˆ†å‘ action saveUserComments æ—¶ï¼Œåº”è¯¥ä¸å·²æœ‰ç•™è¨€åˆå¹¶å¹¶å»é™¤é‡å¤çš„éƒ¨åˆ†â€ï¼›æ­¤å¤–ï¼Œæµ‹è¯•æ•°æ®åªå‡†å¤‡äº†è¶³å¤Ÿä½“ç°â€œåˆå¹¶â€è¿™ä¸ªæ“ä½œçš„ä¸¤æ¡ id çš„æ•°æ®ï¼Œè€Œæ²¡æœ‰æ”¾å¾ˆå¤šçš„æ•°æ®ï¼Œå½¢æˆæ‚éŸ³ï¼›</li>
<li>ä¸åŒ…å«é€»è¾‘ï¼šæµ‹è¯•ä»£ç ä¸åŒ…å«å‡†å¤‡æ•°æ®ã€è°ƒç”¨ã€æ–­è¨€å¤–çš„ä»»ä½•é€»è¾‘</li>
<li>è¿è¡Œé€Ÿåº¦å¿«ï¼šæ²¡æœ‰ä»»ä½•ä¾èµ–</li>
</ul>
<h3 id="selector-æµ‹è¯•"><a href="#selector-æµ‹è¯•" class="headerlink" title="selector æµ‹è¯•"></a>selector æµ‹è¯•</h3><p>selector åŒæ ·æ˜¯é‡é€»è¾‘çš„åœ°æ–¹ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯ reducer åˆ°ç»„ä»¶çš„å»¶ä¼¸ã€‚å®ƒä¹Ÿæ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œæµ‹èµ·æ¥ä¸ reducer ä¸€æ ·æ–¹ä¾¿ã€ä»·å€¼ä¸è²ï¼Œä¹Ÿæ˜¯åº”è¯¥é‡ç‚¹ç…§é¡¾çš„éƒ¨åˆ†ã€‚å†µä¸”ï¼Œç¨å¾®å¤§å‹ä¸€ç‚¹çš„é¡¹ç›®ï¼Œåº”è¯¥è¯´å¿…ç„¶ä¼šç”¨åˆ° selectorã€‚åŸå› æˆ‘è®²åœ¨è¿™é‡Œã€‚ä¸‹é¢çœ‹ä¸€ä¸ª selector çš„æµ‹è¯•ç”¨ä¾‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// demo selector</span></span><br><span class="line"><span class="keyword">import</span> &#123; createSelector &#125; <span class="keyword">from</span> <span class="string">'reselect'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// for performant access/filtering in React component</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> labelArrayToObjectSelector = createSelector(</span><br><span class="line">  [<span class="function">(<span class="params">store, ownProps</span>) =&gt;</span> store.products[ownProps.id].labels],</span><br><span class="line">  labels =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> labels.reduce(</span><br><span class="line">      (result, &#123; code, active &#125;) =&gt; (&#123;</span><br><span class="line">        ...result,</span><br><span class="line">        [code]: active,</span><br><span class="line">      &#125;),</span><br><span class="line">      &#123;&#125;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// demo use selector</span></span><br><span class="line"><span class="keyword">import</span> &#123; labelArrayToObjectSelector &#125; <span class="keyword">from</span> <span class="string">'./selector'</span>;</span><br><span class="line"></span><br><span class="line">test(<span class="string">'should transform label array to object'</span>, () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> store = &#123;</span><br><span class="line">    products: &#123;</span><br><span class="line">      <span class="number">10085</span>: &#123;</span><br><span class="line">        labels: [</span><br><span class="line">          &#123; <span class="attr">code</span>: <span class="string">'canvas'</span>, <span class="attr">name</span>: <span class="string">'å¸†å¸ƒé‹'</span>, <span class="attr">active</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">code</span>: <span class="string">'casual'</span>, <span class="attr">name</span>: <span class="string">'ä¼‘é—²é‹'</span>, <span class="attr">active</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">code</span>: <span class="string">'oxford'</span>, <span class="attr">name</span>: <span class="string">'ç‰›æ´¥é‹'</span>, <span class="attr">active</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">code</span>: <span class="string">'bullock'</span>, <span class="attr">name</span>: <span class="string">'å¸ƒæ´›å…‹'</span>, <span class="attr">active</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">code</span>: <span class="string">'ankle'</span>, <span class="attr">name</span>: <span class="string">'é«˜å¸®é‹'</span>, <span class="attr">active</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">const</span> expectedActiveness = &#123;</span><br><span class="line">    canvas: <span class="literal">false</span>,</span><br><span class="line">    casual: <span class="literal">false</span>,</span><br><span class="line">    oxford: <span class="literal">false</span>,</span><br><span class="line">    bullock: <span class="literal">true</span>,</span><br><span class="line">    ankle: <span class="literal">false</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">const</span> productLabels = labelArrayToObjectSelector(store, &#123; <span class="attr">id</span>: <span class="number">10085</span> &#125;);</span><br><span class="line">  expect(productLabels).toEqual(expectedActiveness);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="saga-æµ‹è¯•"><a href="#saga-æµ‹è¯•" class="headerlink" title="saga æµ‹è¯•"></a>saga æµ‹è¯•</h3><p>saga æ˜¯è´Ÿè´£è°ƒç”¨ APIã€å¤„ç†å‰¯ä½œç”¨çš„ä¸€å±‚ã€‚åœ¨å®é™…çš„é¡¹ç›®ä¸Šå‰¯ä½œç”¨è¿˜æœ‰å…¶ä»–çš„ä¸­é—´å±‚è¿›è¡Œå¤„ç†ï¼Œæ¯”å¦‚ redux-thunkã€redux-promise ç­‰ï¼Œæœ¬è´¨æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡ saga åœ¨æµ‹è¯•æ€§ä¸Šè¦å¥½ä¸€äº›ã€‚è¿™ä¸€å±‚å‰¯ä½œç”¨æ€ä¹ˆæµ‹è¯•å‘¢ï¼Ÿé¦–å…ˆä¸ºäº†ä¿è¯å•å…ƒæµ‹è¯•çš„é€Ÿåº¦å’Œç¨³å®šæ€§ï¼Œåƒ API è°ƒç”¨è¿™ç§ä¸ç¡®å®šæ€§çš„ä¾èµ–æˆ‘ä»¬ä¸€å®šæ˜¯è¦ mock æ‰çš„ã€‚ç»è¿‡ä»”ç»†æ€»ç»“ï¼Œæˆ‘è®¤ä¸ºè¿™ä¸€å±‚ä¸»è¦çš„æµ‹è¯•å†…å®¹æœ‰äº”ç‚¹ï¼š</p>
<ul>
<li>æ˜¯å¦ä½¿ç”¨æ­£ç¡®çš„å‚æ•°ï¼ˆé€šå¸¸æ˜¯ä» action payload æˆ– redux ä¸­æ¥ï¼‰ï¼Œè°ƒç”¨äº†æ­£ç¡®çš„ API</li>
<li>å¯¹äº mock çš„ API è¿”å›ï¼Œæ˜¯å¦ä¿å­˜äº†æ­£ç¡®çš„æ•°æ®ï¼ˆé€šå¸¸æ˜¯é€šè¿‡ action ä¿å­˜åˆ° redux ä¸­å»ï¼‰</li>
<li>ä¸»è¦çš„ä¸šåŠ¡é€»è¾‘ï¼ˆæ¯”å¦‚ä»…å½“ç”¨æˆ·æ»¡è¶³æŸäº›æƒé™æ—¶æ‰è°ƒç”¨ API ç­‰åˆ†æ”¯é€»è¾‘ï¼‰</li>
<li>å¼‚å¸¸é€»è¾‘ï¼ˆæ¯”å¦‚æ‰¾ä¸åˆ°ç”¨æˆ·ç­‰å¼‚å¸¸é€»è¾‘ï¼‰</li>
<li>å…¶ä»–å‰¯ä½œç”¨æ˜¯å¦å‘ç”Ÿï¼ˆæ¯”å¦‚æœ‰æ—¶æœ‰éœ€è¦ Emit çš„äº‹ä»¶ã€éœ€è¦ä¿å­˜åˆ° IndexDB ä¸­å»çš„æ•°æ®ç­‰ï¼‰</li>
</ul>
<p>æˆ‘ä»¬è®¤ä¸ºçœŸæ­£èƒ½å¤Ÿä¿éšœè´¨é‡ã€é‡æ„å’Œå¼€å‘è€…ä½“éªŒçš„ saga æµ‹è¯•åº”è¯¥æ˜¯è¿™æ ·ï¼š</p>
<ul>
<li>ä¸ä¾èµ–å®ç°æ¬¡åºï¼›</li>
<li>å…è®¸ä»…å¯¹çœŸæ­£å…³å¿ƒçš„ã€æœ‰ä»·å€¼çš„ä¸šåŠ¡è¿›è¡Œæµ‹è¯•ï¼›</li>
<li>æ”¯æŒä¸æ”¹åŠ¨ä¸šåŠ¡è¡Œä¸ºçš„é‡æ„ï¼›</li>
</ul>
<p>å®˜æ–¹æä¾›äº†è¿™ä¹ˆä¸€ä¸ªè·‘æµ‹è¯•çš„å·¥å…·ï¼Œåˆšå¥½å¯ä»¥ç”¨æ¥å®Œç¾æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼šrunSagaã€‚æˆ‘ä»¬å¯ä»¥ç”¨å®ƒå°† saga å…¨éƒ¨æ‰§è¡Œä¸€éï¼Œæœé›†æ‰€æœ‰å‘å¸ƒå‡ºå»çš„ actionï¼Œç”±å¼€å‘è€…è‡ªç”±æ–­è¨€å…¶æ„Ÿå…´è¶£çš„ actionï¼åŸºäºè¿™ä¸ªå‘ç°ï¼Œæˆ‘ä»¬æ¨å‡ºäº†æˆ‘ä»¬çš„ç¬¬äºŒç‰ˆ saga æµ‹è¯•æ–¹æ¡ˆï¼šrunSaga + è‡ªå®šä¹‰æ‹“å±• jest çš„ expect æ–­è¨€ã€‚æœ€ç»ˆï¼Œä½¿ç”¨è¿™ä¸ªå·¥å…·å†™å‡ºæ¥çš„ saga æµ‹è¯•ï¼Œå‡ è¿‘å®Œç¾ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; put, call &#125; <span class="keyword">from</span> <span class="string">'saga-effects'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Api &#125; <span class="keyword">from</span> <span class="string">'src/utils/axios'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; testSaga &#125; <span class="keyword">from</span> <span class="string">'../../../testing-utils'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; onEnterProductDetailPage &#125; <span class="keyword">from</span> <span class="string">'./saga'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> product = <span class="function"><span class="params">productId</span> =&gt;</span> (&#123; productId &#125;);</span><br><span class="line">test(<span class="string">`</span></span><br><span class="line"><span class="string">    should only save the three recommended products and show ads</span></span><br><span class="line"><span class="string">    when user enters the product detail page</span></span><br><span class="line"><span class="string">    given the user is not a VIP</span></span><br><span class="line"><span class="string">    `</span>, <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> action = &#123; <span class="attr">payload</span>: &#123; <span class="attr">userId</span>: <span class="number">233</span> &#125; &#125;;</span><br><span class="line">  <span class="keyword">const</span> store = &#123; <span class="attr">credentials</span>: &#123; <span class="attr">vipList</span>: [<span class="number">2333</span>] &#125; &#125;;</span><br><span class="line">  <span class="keyword">const</span> recommendedProducts = [product(<span class="number">1</span>), product(<span class="number">2</span>), product(<span class="number">3</span>), product(<span class="number">4</span>)];</span><br><span class="line">  <span class="keyword">const</span> firstThreeRecommendations = [product(<span class="number">1</span>), product(<span class="number">2</span>), product(<span class="number">3</span>)];</span><br><span class="line"></span><br><span class="line">  Api.get = jest.fn().mockImplementations(<span class="function"><span class="params">()</span> =&gt;</span> recommendedProducts);</span><br><span class="line">  <span class="keyword">await</span> testSaga(onEnterProductDetailPage, action, store);</span><br><span class="line">  expect(Api.get).toHaveBeenCalledWith(<span class="string">'products/recommended'</span>);</span><br><span class="line">  expect(actions.importantActionToSaveRecommendedProducts).toHaveBeenDispatchedWith(</span><br><span class="line">    firstThreeRecommendations</span><br><span class="line">  );</span><br><span class="line">  expect(actions.importantActionToFetchAds).toHaveBeenDispatched();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="component-æµ‹è¯•"><a href="#component-æµ‹è¯•" class="headerlink" title="component æµ‹è¯•"></a>component æµ‹è¯•</h3><p>ç»„ä»¶æµ‹è¯•å…¶å®æ˜¯å®è·µæœ€å¤šã€æµ‹è¯•å®è·µçœ‹æ³•å’Œåˆ†æ­§ä¹Ÿæœ€å¤šçš„åœ°æ–¹ã€‚React ç»„ä»¶æ˜¯ä¸€ä¸ªé«˜åº¦è‡ªæ²»çš„å•å…ƒï¼Œä»åˆ†ç±»ä¸Šæ¥çœ‹ï¼Œå®ƒå¤§æ¦‚æœ‰è¿™ä¹ˆå‡ ç±»ï¼š</p>
<ul>
<li>å±•ç¤ºå‹ä¸šåŠ¡ç»„ä»¶</li>
<li>å®¹å™¨å‹ä¸šåŠ¡ç»„ä»¶</li>
<li>é€šç”¨ UI ç»„ä»¶</li>
<li>åŠŸèƒ½å‹ç»„ä»¶</li>
</ul>
<p>å…ˆæŠŠè¿™ä¸ªåˆ†ç±»æ”¾åœ¨è¿™é‡Œï¼Œå¾…ä¼šå›è¿‡å¤´æ¥è°ˆã€‚å¯¹äº React ç»„ä»¶æµ‹ä»€ä¹ˆä¸æµ‹ä»€ä¹ˆï¼Œæˆ‘æœ‰ä¸€äº›æ€è€ƒï¼Œä¹Ÿæœ‰ä¸€äº›åˆ¤æ–­æ ‡å‡†ï¼šé™¤å»åŠŸèƒ½å‹ç»„ä»¶ï¼Œå…¶ä»–ç±»å‹çš„ç»„ä»¶ä¸€èˆ¬æ˜¯ä»¥æ¸²æŸ“å‡ºä¸€ä¸ªè¯­æ³•æ ‘ä¸ºç»ˆç‚¹çš„ï¼Œå®ƒæè¿°äº†é¡µé¢çš„ UI å†…å®¹ã€ç»“æ„ã€æ ·å¼å’Œä¸€äº›é€»è¾‘ component(props) =&gt; UIã€‚å†…å®¹ã€ç»“æ„å’Œæ ·å¼ï¼Œæ¯”èµ·æµ‹è¯•ï¼Œç›´æ¥åœ¨é¡µé¢ä¸Šè°ƒè¯•åé¦ˆæ•ˆæœæ›´å¥½ã€‚æµ‹ä¹Ÿä¸æ˜¯ä¸è¡Œï¼Œä½†éƒ½éš¾å…æœ‰ä¸ç¨³å®šçš„æˆæœ¬åœ¨ï¼›é€»è¾‘è¿™å—ï¼Œæœ‰ä¸€æµ‹çš„ä»·å€¼ï¼Œä½†éœ€è¦æ§åˆ¶å¥½ä¾èµ–ã€‚ç»¼åˆä¸Šé¢æåˆ°çš„æµ‹è¯•åŸåˆ™è¿›è¡Œè€ƒè™‘ï¼Œå»ºè®®æ˜¯ï¼šä¸¤æµ‹ä¸¤ä¸æµ‹ã€‚</p>
<ul>
<li>ç»„ä»¶åˆ†æ”¯æ¸²æŸ“é€»è¾‘å¿…é¡»æµ‹</li>
<li>äº‹ä»¶è°ƒç”¨å’Œå‚æ•°ä¼ é€’ä¸€èˆ¬è¦æµ‹</li>
<li>è¿æ¥ redux çš„é«˜é˜¶ç»„ä»¶ä¸æµ‹</li>
<li>æ¸²æŸ“å‡ºæ¥çš„ UI ä¸åœ¨å•å…ƒæµ‹è¯•å±‚çº§æµ‹</li>
</ul>
<p>ç»„ä»¶ç±»å‹/æµ‹è¯•å†…å®¹ | åˆ†æ”¯æ¸²æŸ“é€»è¾‘ | äº‹ä»¶è°ƒç”¨ | @connect | çº¯ UI<br>å±•ç¤ºå‹ç»„ä»¶ | yes | yes | - | no<br>å®¹å™¨å‹ç»„ä»¶ | yes | yes | no | no<br>é€šç”¨ UI ç»„ä»¶ | yes | yes | - | no<br>åŠŸèƒ½å‹ç»„ä»¶ | yes | yes | no | no</p>
<h4 id="ä¸šåŠ¡å‹ç»„ä»¶â€”â€”åˆ†æ”¯æ¸²æŸ“"><a href="#ä¸šåŠ¡å‹ç»„ä»¶â€”â€”åˆ†æ”¯æ¸²æŸ“" class="headerlink" title="ä¸šåŠ¡å‹ç»„ä»¶â€”â€”åˆ†æ”¯æ¸²æŸ“"></a>ä¸šåŠ¡å‹ç»„ä»¶â€”â€”åˆ†æ”¯æ¸²æŸ“</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> CommentsSection = <span class="function">(<span class="params">&#123; comments &#125;</span>) =&gt;</span> (</span><br><span class="line"> &lt;div&gt;</span><br><span class="line"> &#123;comments.length &gt; <span class="number">0</span> &amp;&amp; (</span><br><span class="line">	&lt;h2&gt;Comments&lt;<span class="regexp">/h2&gt;</span></span><br><span class="line"><span class="regexp"> )&#125;</span></span><br><span class="line"><span class="regexp"> &#123;comments.map((comment) =&gt; (</span></span><br><span class="line"><span class="regexp">	&lt;Comment content=&#123;comment&#125; key=&#123;comment.id&#125; /</span>&gt;</span><br><span class="line"> )&#125;</span><br><span class="line"> &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">)</span></span><br></pre></td></tr></table></figure>
<p>å¯¹åº”çš„æµ‹è¯•å¦‚ä¸‹ï¼Œæµ‹è¯•çš„æ˜¯ä¸åŒçš„åˆ†æ”¯æ¸²æŸ“é€»è¾‘ï¼šæ²¡æœ‰è¯„è®ºæ—¶ï¼Œåˆ™ä¸æ¸²æŸ“ Comments headerã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; CommentsSection &#125; <span class="keyword">from</span> <span class="string">'./index'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Comment &#125; <span class="keyword">from</span> <span class="string">'./Comment'</span>;</span><br><span class="line"></span><br><span class="line">test(<span class="string">'should not render a header and any comment sections when there is no comments'</span>, () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> component = shallow(<span class="xml"><span class="tag">&lt;<span class="name">CommentsSection</span> <span class="attr">comments</span>=<span class="string">&#123;[]&#125;</span> /&gt;</span></span>);</span><br><span class="line">  <span class="keyword">const</span> header = component.find(<span class="string">'h2'</span>);</span><br><span class="line">  <span class="keyword">const</span> comments = component.find(Comment);</span><br><span class="line">  expect(header).toHaveLength(<span class="number">0</span>);</span><br><span class="line">  expect(comments).toHaveLength(<span class="number">0</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">test(<span class="string">'should render a comments section and a header when there are comments'</span>, () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> contents = [</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">author</span>: <span class="string">'ç”·***8'</span>, <span class="attr">comment</span>: <span class="string">'ä»·å»‰ç‰©ç¾ï¼Œç›¸ä¿¡å¥¥åº·æ——èˆ°åº—'</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">author</span>: <span class="string">'é›¨***æˆ'</span>, <span class="attr">comment</span>: <span class="string">'æ‰€ä»¥ä¸€åŒåˆè„šçš„é‹å­...'</span> &#125;,</span><br><span class="line">  ];</span><br><span class="line">  <span class="keyword">const</span> component = shallow(<span class="xml"><span class="tag">&lt;<span class="name">CommentsSection</span> <span class="attr">comments</span>=<span class="string">&#123;contents&#125;</span> /&gt;</span></span>);</span><br><span class="line">  <span class="keyword">const</span> header = component.find(<span class="string">'h2'</span>);</span><br><span class="line">  <span class="keyword">const</span> comments = component.find(Comment);</span><br><span class="line">  expect(header.html()).toBe(<span class="string">'Comments'</span>);</span><br><span class="line">  expect(comments).toHaveLength(<span class="number">2</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="ä¸šåŠ¡å‹ç»„ä»¶-â€“-äº‹ä»¶è°ƒç”¨"><a href="#ä¸šåŠ¡å‹ç»„ä»¶-â€“-äº‹ä»¶è°ƒç”¨" class="headerlink" title="ä¸šåŠ¡å‹ç»„ä»¶ â€“ äº‹ä»¶è°ƒç”¨"></a>ä¸šåŠ¡å‹ç»„ä»¶ â€“ äº‹ä»¶è°ƒç”¨</h4><p>æµ‹è¯•äº‹ä»¶çš„ä¸€ä¸ªåœºæ™¯å¦‚ä¸‹ï¼šå½“æŸæ¡äº§å“è¢«ç‚¹å‡»æ—¶ï¼Œåº”è¯¥å°†äº§å“ç›¸å…³çš„ä¿¡æ¯å‘é€ç»™åŸ‹ç‚¹ç³»ç»Ÿè¿›è¡ŒåŸ‹ç‚¹ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> ProductItem = <span class="function">(<span class="params">&#123; id, productName, introduction, trackPressEvent &#125;</span>) =&gt;</span> (</span><br><span class="line">  &lt;TouchableWithoutFeedback onPress=&#123;() =&gt; trackPressEvent(id, productName)&#125;&gt;</span><br><span class="line">    &lt;View&gt;</span><br><span class="line">      &lt;Title name=&#123;productName&#125; /&gt;</span><br><span class="line">      &lt;Introduction introduction=&#123;introduction&#125; /&gt;</span><br><span class="line">    &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>TouchableWithoutFeedback&gt;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; ProductItem &#125; <span class="keyword">from</span> <span class="string">'./index'</span>;</span><br><span class="line">test(<span class="string">`</span></span><br><span class="line"><span class="string">    should send product id and name to analytics system </span></span><br><span class="line"><span class="string">    when user press the product item</span></span><br><span class="line"><span class="string">    `</span>, () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> trackPressEvent = jest.fn();</span><br><span class="line">  <span class="keyword">const</span> component = shallow(</span><br><span class="line">    &lt;productitem</span><br><span class="line">      id=&#123;<span class="number">100832</span>&#125;</span><br><span class="line">      introduction=<span class="string">"iMac Pro - Power to the pro."</span></span><br><span class="line">      trackPressEvent=&#123;trackPressEvent&#125;</span><br><span class="line">    &gt;&lt;<span class="regexp">/productitem&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">  component.find(TouchableWithoutFeedback).simulate('press');</span></span><br><span class="line"><span class="regexp">  expect(trackPressEvent).toHaveBeenCalledWith(100832, 'iMac Pro - Power to the pro.');</span></span><br><span class="line"><span class="regexp">&#125;);</span></span><br></pre></td></tr></table></figure>
<h4 id="åŠŸèƒ½å‹ç»„ä»¶-â€“-children-å‹é«˜é˜¶ç»„ä»¶"><a href="#åŠŸèƒ½å‹ç»„ä»¶-â€“-children-å‹é«˜é˜¶ç»„ä»¶" class="headerlink" title="åŠŸèƒ½å‹ç»„ä»¶ â€“ children å‹é«˜é˜¶ç»„ä»¶"></a>åŠŸèƒ½å‹ç»„ä»¶ â€“ children å‹é«˜é˜¶ç»„ä»¶</h4><p>åŠŸèƒ½å‹ç»„ä»¶ï¼ŒæŒ‡çš„æ˜¯è·Ÿä¸šåŠ¡æ— å…³çš„å¦ä¸€ç±»ç»„ä»¶ï¼šå®ƒæ˜¯åŠŸèƒ½å‹çš„ï¼Œæ›´åƒæ˜¯åº•å±‚æ”¯æ’‘ç€ä¸šåŠ¡ç»„ä»¶è¿ä½œçš„åŸºç¡€ç»„ä»¶ï¼Œæ¯”å¦‚è·¯ç”±ç»„ä»¶ã€åˆ†é¡µç»„ä»¶ç­‰ã€‚è¿™äº›ç»„ä»¶ä¸€èˆ¬åé‡é€»è¾‘å¤šä¸€ç‚¹ï¼Œå…³å¿ƒ UI å°‘ä¸€äº›ã€‚å…¶æœ¬è´¨æµ‹æ³•è·Ÿä¸šåŠ¡ç»„ä»¶æ˜¯ä¸€è‡´çš„ï¼šä¸å…³å¿ƒ UI å…·ä½“æ¸²æŸ“ï¼Œåªæµ‹åˆ†æ”¯æ¸²æŸ“å’Œäº‹ä»¶è°ƒç”¨ã€‚ä½†ç”±äºå®ƒååŠŸèƒ½å‹çš„ç‰¹æ€§ï¼Œä½¿å¾—å®ƒåœ¨è®¾è®¡ä¸Šå¸¸ä¼šå‡ºç°ä¸€äº›ä¸šåŠ¡å‹ç»„ä»¶ä¸å¸¸å‡ºç°çš„è®¾è®¡æ¨¡å¼ï¼Œå¦‚é«˜é˜¶ç»„ä»¶ã€ä»¥å‡½æ•°ä¸ºå­ç»„ä»¶ç­‰ã€‚ä¸‹é¢åˆ†åˆ«é’ˆå¯¹è¿™å‡ ç§è¿›è¡Œåˆ†è¿°ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> FeatureToggle = <span class="function">(<span class="params">&#123; features, featureName, children &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (!features[featureName]) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> children;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(<span class="function"><span class="params">store</span> =&gt;</span> (&#123; <span class="attr">features</span>: store.global.features &#125;))(FeatureToggle);</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; shallow &#125; <span class="keyword">from</span> <span class="string">'enzyme'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; View &#125; <span class="keyword">from</span> <span class="string">'react-native'</span>;</span><br><span class="line"><span class="keyword">import</span> FeatureToggles <span class="keyword">from</span> <span class="string">'./featureToggleStatus'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; FeatureToggle &#125; <span class="keyword">from</span> <span class="string">'./index'</span>;</span><br><span class="line"><span class="keyword">const</span> DummyComponent = <span class="function"><span class="params">()</span> =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">View</span> /&gt;</span></span>;</span><br><span class="line">test(<span class="string">'should not render children component when remote toggle does not exist'</span>, () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> component = shallow(</span><br><span class="line">    &lt;FeatureToggle features=&#123;&#123;&#125;&#125; featureName=<span class="string">"promotion618"</span>&gt;</span><br><span class="line">      &lt;DummyComponent /&gt;</span><br><span class="line">    &lt;<span class="regexp">/FeatureToggle&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">  expect(component.find(DummyComponent)).toHaveLength(0);</span></span><br><span class="line"><span class="regexp">&#125;);</span></span><br><span class="line"><span class="regexp">test('should render children component when remote toggle is present and is on', () =&gt; &#123;</span></span><br><span class="line"><span class="regexp">  const features = &#123;</span></span><br><span class="line"><span class="regexp">    promotion618: FeatureToggles.on,</span></span><br><span class="line"><span class="regexp">  &#125;;</span></span><br><span class="line"><span class="regexp">  const component = shallow(</span></span><br><span class="line"><span class="regexp">    &lt;FeatureToggle features=&#123;features&#125; featureName="promotion618"&gt;</span></span><br><span class="line"><span class="regexp">      &lt;DummyComponent /</span>&gt;</span><br><span class="line">    &lt;<span class="regexp">/FeatureToggle&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">  expect(component.find(DummyComponent)).toHaveLength(1);</span></span><br><span class="line"><span class="regexp">&#125;);</span></span><br><span class="line"><span class="regexp">test('should not render children component when remote toggle is present but is off', () =&gt; &#123;</span></span><br><span class="line"><span class="regexp">  const features = &#123;</span></span><br><span class="line"><span class="regexp">    promotion618: FeatureToggles.off,</span></span><br><span class="line"><span class="regexp">  &#125;;</span></span><br><span class="line"><span class="regexp">  const component = shallow(</span></span><br><span class="line"><span class="regexp">    &lt;FeatureToggle features=&#123;features&#125; featureName="promotion618"&gt;</span></span><br><span class="line"><span class="regexp">      &lt;DummyComponent /</span>&gt;</span><br><span class="line">    &lt;<span class="regexp">/FeatureToggle&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">  expect(component.find(DummyComponent)).toHaveLength(0);</span></span><br><span class="line"><span class="regexp">&#125;);</span></span><br></pre></td></tr></table></figure>
<h4 id="utils-æµ‹è¯•"><a href="#utils-æµ‹è¯•" class="headerlink" title="utils æµ‹è¯•"></a>utils æµ‹è¯•</h4><p>æ¯ä¸ªé¡¹ç›®éƒ½ä¼šæœ‰ utilsã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬æœŸæœ› util éƒ½æ˜¯çº¯å‡½æ•°ï¼Œå³æ˜¯ä¸ä¾èµ–å¤–éƒ¨çŠ¶æ€ã€ä¸æ”¹å˜å‚æ•°å€¼ã€ä¸ç»´æŠ¤å†…éƒ¨çŠ¶æ€çš„å‡½æ•°ã€‚è¿™æ ·çš„å‡½æ•°æµ‹è¯•æ•ˆç‡ä¹Ÿéå¸¸é«˜ã€‚æµ‹è¯•åŸåˆ™è·Ÿå‰é¢æ‰€è¯´çš„ä¹Ÿå¹¶æ²¡ä»€ä¹ˆä¸åŒï¼Œä¸å†èµ˜è¿°ã€‚ä¸è¿‡å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå› ä¸º util å‡½æ•°å¤šæ˜¯æ•°æ®é©±åŠ¨ï¼Œä¸€ä¸ªè¾“å…¥å¯¹åº”ä¸€ä¸ªè¾“å‡ºï¼Œå¹¶ä¸”ä¸éœ€è¦å‡†å¤‡ä»»ä½•ä¾èµ–ï¼Œè¿™ä½¿å¾—å®ƒå¤šäº†ä¸€ç§æµ‹è¯•çš„é€‰æ‹©ï¼Œä¹Ÿå³æ˜¯å‚æ•°åŒ–æµ‹è¯•çš„æ–¹å¼ã€‚å‚æ•°åŒ–æµ‹è¯•å¯ä»¥æå‡æ•°æ®å‡†å¤‡æ•ˆç‡ï¼ŒåŒæ—¶ä¾ç„¶èƒ½ä¿æŒè¯¦ç»†çš„ç”¨ä¾‹ä¿¡æ¯ã€é”™è¯¯æç¤ºç­‰ä¼˜ç‚¹ã€‚jest ä» 23 åå°±å†…ç½®äº†å¯¹å‚æ•°åŒ–æµ‹è¯•çš„æ”¯æŒï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">test.each([</span><br><span class="line">  [[<span class="string">'0'</span>, <span class="string">'99'</span>], <span class="number">0.99</span>, <span class="string">'(æ•´æ•°éƒ¨åˆ†ä¸º0æ—¶ä¹Ÿåº”è¿”å›)'</span>],</span><br><span class="line">  [[<span class="string">'5'</span>, <span class="string">'00'</span>], <span class="number">5</span>, <span class="string">'(å°æ•°éƒ¨åˆ†ä¸è¶³æ—¶åº”è¯¥è¡¥0)'</span>],</span><br><span class="line">  [[<span class="string">'5'</span>, <span class="string">'10'</span>], <span class="number">5.1</span>, <span class="string">'(å°æ•°éƒ¨åˆ†ä¸è¶³æ—¶åº”è¯¥è¡¥0)'</span>],</span><br><span class="line">  [[<span class="string">'4'</span>, <span class="string">'38'</span>], <span class="number">4.38</span>, <span class="string">'(å°æ•°éƒ¨åˆ†ä¸è¶³æ—¶åº”è¯¥è¡¥0)'</span>],</span><br><span class="line">  [[<span class="string">'4'</span>, <span class="string">'99'</span>], <span class="number">4.994</span>, <span class="string">'(è¶…è¿‡é»˜è®¤2ä½çš„å°æ•°çš„ç›´æ¥æˆªæ–­ï¼Œä¸å››èˆäº”å…¥)'</span>],</span><br><span class="line">  [[<span class="string">'4'</span>, <span class="string">'99'</span>], <span class="number">4.995</span>, <span class="string">'(è¶…è¿‡é»˜è®¤2ä½çš„å°æ•°çš„ç›´æ¥æˆªæ–­ï¼Œä¸å››èˆäº”å…¥)'</span>],</span><br><span class="line">  [[<span class="string">'4'</span>, <span class="string">'99'</span>], <span class="number">4.996</span>, <span class="string">'(è¶…è¿‡é»˜è®¤2ä½çš„å°æ•°çš„ç›´æ¥æˆªæ–­ï¼Œä¸å››èˆäº”å…¥)'</span>],</span><br><span class="line">  [[<span class="string">'-0'</span>, <span class="string">'50'</span>], <span class="number">-0.5</span>, <span class="string">'(æ•´æ•°éƒ¨åˆ†ä¸ºè´Ÿæ•°æ—¶åº”è¯¥ä¿ç•™è´Ÿå·)'</span>],</span><br><span class="line">])(<span class="string">'should return %s when number is %s (%s)'</span>, (expected, input, description) =&gt; &#123;</span><br><span class="line">  expect(truncateAndPadTrailingZeros(input)).toEqual(expected);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</div></article></div><div class="post-paginator"><div class="post-links"><div class="post-prev"><a href="/2018/07/12/tools/ã€å·¥å…·ã€‘é¢œè‰²è‹±æ–‡åç§°/" class="prev">Previous Post<span>ã€å·¥å…·ã€‘webé¢œè‰²è‹±æ–‡åç§°.md</span></a></div><div class="post-next"><a href="/2018/06/15/ux_way/ã€ŠUXè®¾è®¡ä¹‹é“ã€‹â€”10.è®¾è®¡åŸåˆ™/" class="next">Next Post<span>ã€ŠUXè®¾è®¡ä¹‹é“ã€‹â€”10.è®¾è®¡åŸåˆ™</span></a></div></div></div></div><div class="sidebar"><div class="social-links"><ul><li class="social-link"><a href="http://github.com/MichealWayne" target="_blank" class="link-github"><i class="icon icon-github"></i></a></li><li class="social-link"><a href="mailto:michealwayne@163.com" target="_self" class="link-mail"><i class="icon icon-mail"></i></a></li></ul></div><div class="recent-posts widget"><h3 class="widget-title"> Recent Posts</h3><div class="widget-content"><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2024/06/16/html/è®°å½•HTMLä¸­ä¸æ€§èƒ½:æ¸²æŸ“æœ‰å…³çš„å‡ ä¸ªæ–°å±æ€§/">è®°å½•HTMLä¸­ä¸æ€§èƒ½/æ¸²æŸ“æœ‰å…³çš„å‡ ä¸ªæ–°å±æ€§</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/06/02/python/ã€ç¬”è®°ã€‘ã€Šç¼–å†™é«˜è´¨é‡Pythonä»£ç çš„90ä¸ªæœ‰æ•ˆæ–¹æ³•ã€‹-75è‡³90/">ã€ç¬”è®°ã€‘Effective Pythonã€Šç¼–å†™é«˜è´¨é‡ Python ä»£ç çš„ 90 ä¸ªæœ‰æ•ˆæ–¹æ³•ã€‹â€”â€”ç¬¬ 75 ï½ 90 æ¡è¯»ä¹¦ç¬”è®°</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/05/25/python/ã€ç¬”è®°ã€‘ã€Šç¼–å†™é«˜è´¨é‡Pythonä»£ç çš„90ä¸ªæœ‰æ•ˆæ–¹æ³•ã€‹-52è‡³74/">ã€ç¬”è®°ã€‘Effective Pythonã€Šç¼–å†™é«˜è´¨é‡ Python ä»£ç çš„ 90 ä¸ªæœ‰æ•ˆæ–¹æ³•ã€‹â€”â€”ç¬¬ 52 ï½ 74 æ¡è¯»ä¹¦ç¬”è®°</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/04/14/python/ã€ç¬”è®°ã€‘ã€Šç¼–å†™é«˜è´¨é‡Pythonä»£ç çš„90ä¸ªæœ‰æ•ˆæ–¹æ³•ã€‹-31è‡³51/">ã€ç¬”è®°ã€‘Effective Pythonã€Šç¼–å†™é«˜è´¨é‡ Python ä»£ç çš„ 90 ä¸ªæœ‰æ•ˆæ–¹æ³•ã€‹â€”â€”ç¬¬ 31 ï½ 51 æ¡è¯»ä¹¦ç¬”è®°</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/03/17/python/ã€ç¬”è®°ã€‘ã€Šç¼–å†™é«˜è´¨é‡Pythonä»£ç çš„90ä¸ªæœ‰æ•ˆæ–¹æ³•ã€‹-1è‡³30/">ã€ç¬”è®°ã€‘Effective Pythonã€Šç¼–å†™é«˜è´¨é‡ Python ä»£ç çš„ 90 ä¸ªæœ‰æ•ˆæ–¹æ³•ã€‹â€”â€”ç¬¬ 1 ï½ 30 æ¡è¯»ä¹¦ç¬”è®°</a></li></ul></div></div><div class="recent-comment widget"><h3 class="widget-title"> Author</h3><div class="widget-content"><div class="m-author"><div class="u-avatar"><img src="data:image/jpeg;base64,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"></div><div class="u-author_tit"><p>My name is Micheal Wayne and this is my blog.<br>I am a front-end software engineer.<br>Contact: <a href="mailto:michealwayne@163.com"> <span>michealwayne@163.com</span></a></p></div></div></div></div><div class="tag-lists widget"><h3 class="widget-title"> Tags</h3><div class="widget-content"><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/APM/">APM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BOM/">BOM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Bun/">Bun</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DOM/">DOM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML/">HTML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IDE/">IDE</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OKR/">OKR</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UML/">UML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UX/">UX</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WebApi/">WebApi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WebSocket/">WebSocket</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Zepto/">Zepto</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ai/">ai</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es/">es</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es6/">es6</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/eslint/">eslint</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gpt/">gpt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html5/">html5</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http/">http</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jQuery/">jQuery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lerna/">lerna</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lottie/">lottie</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/">nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/">nodejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/prettier/">prettier</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/prompt/">prompt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pwa/">pwa</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react/">react</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sketch/">sketch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/skywalking/">skywalking</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/taro/">taro</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tslint/">tslint</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/typescript/">typescript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/">vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webApi/">webApi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webpack/">webpack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ä»£ç è§„èŒƒ/">ä»£ç è§„èŒƒ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/å‰ç«¯/">å‰ç«¯</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/åŠ¨æ•ˆ/">åŠ¨æ•ˆ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/å›¾å½¢/">å›¾å½¢</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/å®‰å…¨/">å®‰å…¨</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/å°ç¨‹åº/">å°ç¨‹åº</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/å·¥å…·/">å·¥å…·</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/å·¥ç¨‹/">å·¥ç¨‹</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/å¾®å‰ç«¯/">å¾®å‰ç«¯</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æ€ç»´é€»è¾‘/">æ€ç»´é€»è¾‘</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æ€§èƒ½/">æ€§èƒ½</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æ’ä»¶/">æ’ä»¶</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æ—¥å¸¸å·¥ä½œ/">æ—¥å¸¸å·¥ä½œ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æ¶æ„/">æ¶æ„</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æ¦‚å¿µ/">æ¦‚å¿µ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æ­£åˆ™/">æ­£åˆ™</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æµè§ˆå™¨/">æµè§ˆå™¨</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ç”¨æˆ·ä½“éªŒ/">ç”¨æˆ·ä½“éªŒ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ç¬”è®°/">ç¬”è®°</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ç®—æ³•/">ç®—æ³•</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ç¼–ç /">ç¼–ç </a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ç½‘ç»œåè®®/">ç½‘ç»œåè®®</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/è§„èŒƒ/">è§„èŒƒ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/è®¾è®¡æ¨¡å¼/">è®¾è®¡æ¨¡å¼</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/è°ƒè¯•/">è°ƒè¯•</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/è´¨é‡/">è´¨é‡</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/è·¨ç«¯/">è·¨ç«¯</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/è½¯ä»¶/">è½¯ä»¶</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/è½¯ä»¶å·¥ç¨‹/">è½¯ä»¶å·¥ç¨‹</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/é¡¹ç›®ç®¡ç†/">é¡¹ç›®ç®¡ç†</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/é«˜å¹¶å‘/">é«˜å¹¶å‘</a></li></ul></div></div><div class="archive-lists widget"><h3 class="widget-title"> Archive</h3><div class="widget-content"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/06/">June 2024</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/05/">May 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/04/">April 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/03/">March 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/02/">February 2024</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/01/">January 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/12/">December 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/11/">November 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/10/">October 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/09/">September 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/08/">August 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/07/">July 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/06/">June 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">April 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">March 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">February 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">January 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">December 2022</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">November 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">October 2022</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a><span class="archive-list-count">5</span></li></ul></div></div></div></div></div><footer><div class="copyright"><div class="container"><div class="col-6"><div class="site-info">Â© 2016 - 2024 <a href="http://blog.michealwayne.cn">Micheal Wayne</a></div></div><div class="col-6"><div class="site-contact"><div class="social-links"><ul><li class="social-link"><a href="http://github.com/MichealWayne" target="_blank" class="link-github"><i class="icon icon-github"></i></a></li><li class="social-link"><a href="mailto:michealwayne@163.com" target="_self" class="link-mail"><i class="icon icon-mail"></i></a></li></ul></div></div></div></div></div></footer><a class="scroll-up"><span class="icon icon-up"></span></a><script src="https://code.jquery.com/jquery-3.1.0.min.js"></script><script src="/js/posfixed.js"></script><script src="/js/utils.js"></script><script src="/js/search.js"></script></body></html>